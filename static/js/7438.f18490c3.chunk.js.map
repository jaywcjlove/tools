{"version":3,"file":"static/js/7438.f18490c3.chunk.js","mappings":"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","sources":["../../packages/svg-optimizer/src/compress.ts","../../packages/svg-optimizer/src/utils.ts","../../packages/svg-optimizer/src/index.tsx"],"sourcesContent":["import {\n  optimize,\n  OptimizeOptions,\n  OptimizedSvg,\n  OptimizedError,\n  Plugin,\n  CustomPlugin,\n  Js2SvgOptions,\n} from 'svgo/dist/svgo.browser';\n\nexport type Settings = OptimizeOptions &\n  Js2SvgOptions & {\n    /**\n     * Precision of floating point numbers. Will be passed to each plugin that suppors this param.\n     * 0 almost always breaks images when used on `cleanupNumericValues`.\n     */\n    floatPrecision?: number | undefined;\n  };\n\nexport type Dimensions = { width: number; height: number };\ntype CreateDimensionsExtractor = () => [Dimensions, Plugin];\n\nconst createDimensionsExtractor: CreateDimensionsExtractor = () => {\n  const dimensions: Dimensions = { width: 0, height: 0 };\n  const plugin: CustomPlugin<any> = {\n    // @ts-ignore\n    type: 'visitor',\n    name: 'extract-dimensions',\n    fn: () => {\n      return {\n        element: {\n          // Node, parentNode\n          enter: ({ name, attributes }, { type }) => {\n            if (name === 'svg' && type === 'root') {\n              if (attributes.width !== undefined && attributes.height !== undefined) {\n                dimensions.width = Number.parseFloat(attributes.width);\n                dimensions.height = Number.parseFloat(attributes.height);\n              } else if (attributes.viewBox !== undefined) {\n                const viewBox = attributes.viewBox.split(/,\\s*|\\s+/);\n                dimensions.width = Number.parseFloat(viewBox[2]);\n                dimensions.height = Number.parseFloat(viewBox[3]);\n              }\n            }\n          },\n        },\n      };\n    },\n  };\n  return [dimensions, plugin];\n};\n\nexport function compress(svgInput: string, settings: Settings) {\n  const plugins: Plugin[] = [];\n\n  (settings.plugins || []).forEach((item) => {\n    if (item === 'cleanupNumericValues') {\n      const floatPrecision = Number(settings.floatPrecision);\n      plugins.push({\n        name: 'cleanupNumericValues',\n        params: {\n          floatPrecision: floatPrecision === 0 ? 1 : floatPrecision,\n        },\n      });\n    } else {\n      plugins.push(item);\n    }\n  });\n\n  const [dimensions, extractDimensionsPlugin] = createDimensionsExtractor();\n  const { data, modernError } = optimize(svgInput, {\n    multipass: settings.multipass,\n    floatPrecision: settings.floatPrecision,\n    plugins: [...plugins, extractDimensionsPlugin],\n    js2svg: {\n      indent: 2,\n      pretty: settings.pretty,\n    },\n  }) as OptimizedSvg;\n  return { data, dimensions, error: modernError ? (modernError as any).message : '' };\n}\n","/**\n * Use an array dictionary of units to be accessed based on the exponent.\n * Use `Number.prototype.toPrecision()` to truncate the number to a certain number of digits.\n * Return the prettified string by building it up, taking into account the supplied options and whether it is negative or not.\n * Omit the second argument, `precision`, to use a default precision of `3` digits.\n * Omit the third argument, `addSpace`, to add space between the number and unit by default.\n */\nexport const prettyBytes = (num: number, precision = 3, addSpace = true) => {\n  const UNITS = ['B', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];\n  if (Math.abs(num) < 1) return num + (addSpace ? ' ' : '') + UNITS[0];\n  const exponent = Math.min(Math.floor(Math.log10(num < 0 ? -num : num) / 3), UNITS.length - 1);\n  const n = Number(((num < 0 ? -num : num) / 1000 ** exponent).toPrecision(precision));\n  return (num < 0 ? '-' : '') + n + (addSpace ? ' ' : '') + UNITS[exponent];\n};\n\nexport function fileReader(file: File, type: 'base64' | 'text'): Promise<string> {\n  return new Promise((resolve, reject) => {\n    const reader = new FileReader();\n    if (type === 'base64') reader.readAsDataURL(file);\n    if (type === 'text') reader.readAsText(file);\n    reader.onloadend = () => {\n      if (reader.result) {\n        resolve(reader.result.toString());\n      } else {\n        resolve('');\n      }\n    };\n    reader.onerror = (err) => {\n      reject(err);\n    };\n  });\n}\n\nexport function round(num: number, places: number) {\n  const mult = 10 ** places;\n  return Math.floor(Math.round(num * mult)) / mult;\n}\n","import { useEffect, useState, Fragment } from 'react';\nimport { Wrapper, StyledLayout, CopyButton, ResultCode, Spacing, Button } from '@wcj/tools-react-components';\nimport styled, { css } from 'styled-components';\nimport { useTranslation } from 'react-i18next';\nimport { Plugin } from 'svgo/dist/svgo.browser';\nimport { gzip } from 'pako';\nimport { Settings, compress, Dimensions } from './compress';\nimport { fileReader, prettyBytes, round } from './utils';\n\nexport interface ResultProps {\n  title?: string;\n  className?: string;\n}\n\nconst Info = styled.span`\n  color: var(--color-fg-subtle);\n`;\n\nconst Iframe = styled.iframe`\n  border: none;\n  overflow: hidden;\n  pointer-events: none;\n  max-width: 100%;\n`;\n\nconst InputFile = styled.input`\n  width: 100%;\n  display: block;\n`;\n\nconst PrettyBytesInfo = styled.div`\n  background-color: var(--color-neutral-muted);\n  padding: 10px;\n  margin-bottom: 60px;\n  margin-top: 15px;\n  display: flex;\n  align-items: center;\n  gap: 12px;\n`;\n\nconst Percen = styled.span<{ num: number }>`\n  font-weight: bold;\n  ${(props) => {\n    if (props.num > 100 || props.num === 0) {\n      return css`\n        color: red;\n      `;\n    }\n    if (props.num < 100) {\n      return css`\n        color: green;\n      `;\n    }\n    return css``;\n  }}\n`;\n\nconst defaultOptions: Settings = {\n  multipass: true,\n  pretty: true,\n  floatPrecision: 8,\n  plugins: [\n    'mergeStyles',\n    'cleanupAttrs',\n    'inlineStyles',\n    'minifyStyles',\n    'cleanupIDs',\n    'removeUselessDefs',\n    'cleanupNumericValues',\n    'convertColors',\n    'removeUnknownsAndDefaults',\n    'removeNonInheritableGroupAttrs',\n    'removeUselessStrokeAndFill',\n    'removeViewBox',\n    'cleanupEnableBackground',\n    'removeHiddenElems',\n    'removeEmptyText',\n    'convertShapeToPath',\n    'moveElemsAttrsToGroup',\n    'moveGroupAttrsToElems',\n    'collapseGroups',\n    'convertPathData',\n    'convertEllipseToCircle',\n    'convertTransform',\n    'removeEmptyAttrs',\n    'removeEmptyContainers',\n    'mergePaths',\n    'removeUnusedNS',\n    'sortDefsChildren',\n    'removeTitle',\n    'removeDesc',\n  ],\n};\n\ninterface CheckboxProps\n  extends React.DetailedHTMLProps<React.InputHTMLAttributes<HTMLInputElement>, HTMLInputElement> {}\nconst Checkbox: React.FC<React.PropsWithChildren<CheckboxProps>> = ({ children, ...other }) => {\n  return (\n    <label>\n      <span>\n        <input type=\"checkbox\" {...other} />\n        {children}\n      </span>\n    </label>\n  );\n};\n\nconst includesPlugin = (name: Plugin, plugins: Plugin[] = []) => plugins.includes(name);\n\ninterface ImageData {\n  raw?: string;\n  base64?: string;\n  tiny?: string;\n  error?: string;\n  name?: string;\n  dimensions?: Dimensions;\n}\n\nexport default function SVGOptimizer() {\n  const { t } = useTranslation(['svg-optimizer', 'common']);\n  const [options, setOptions] = useState<Settings>(defaultOptions);\n  const [imageData, setImageData] = useState<ImageData[]>([]);\n  const handleChange = async (evn: React.ChangeEvent<HTMLInputElement>) => {\n    const files = (evn.target as HTMLInputElement).files || [];\n    const data = await Promise.all(\n      Array.from(files).map(async (file) => {\n        console.log(file);\n        const base64 = await fileReader(file, 'base64');\n        const raw = await fileReader(file, 'text');\n        const d = compress(raw || '', options);\n        return { base64, raw, name: file.name, dimensions: d.dimensions, tiny: d.data };\n      }),\n    );\n    setImageData(data);\n  };\n  const settingPlugin = (name: Plugin, checked: boolean): Settings => {\n    const plugins: Plugin[] = [...(options.plugins || [])];\n    if (checked) {\n      if (!plugins.includes(name)) {\n        plugins.push(name);\n      }\n    } else {\n      plugins.splice(plugins.indexOf(name), 1);\n    }\n    return { ...options, plugins };\n  };\n\n  useEffect(() => {\n    if (options) {\n      const data: ImageData[] = [];\n      imageData.forEach((item) => {\n        const d = compress(item.raw || '', options);\n        data.push({ ...item, dimensions: d.dimensions, tiny: d.data, error: d.error });\n      });\n      setImageData(data);\n    }\n  }, [options]);\n\n  const opts: { plugin: Plugin; label: string; content: string }[] = [\n    { plugin: 'removeDoctype', label: 'Remove doctype', content: t('remove doctype declaration') },\n    { plugin: 'removeXMLProcInst', label: 'Remove XML ProcInst', content: t('remove XML processing instructions') },\n    { plugin: 'removeComments', label: 'Remove Comments', content: t('remove comments') },\n    { plugin: 'removeMetadata', label: 'Remove <metadata>', content: t('remove <metadata>') },\n    { plugin: 'removeXMLNS', label: 'Remove xmlns', content: t('removes the xmlns attribute (for inline SVG)') },\n    {\n      plugin: 'removeEditorsNSData',\n      label: 'Remove Editors Data',\n      content: t('remove editors namespaces, elements, and attributes'),\n    },\n    {\n      plugin: 'cleanupAttrs',\n      label: 'Cleanup attribute whitespace',\n      content: t('cleanup attributes from newlines, trailing, and repeating spaces'),\n    },\n    { plugin: 'mergeStyles', label: 'Merge Styles', content: t('merge multiple style elements into one') },\n    {\n      plugin: 'inlineStyles',\n      label: 'Inline Styles',\n      content: t('move and merge styles from <style> elements to element style attributes'),\n    },\n    { plugin: 'minifyStyles', label: 'Minify Styles', content: t('minify <style> elements content with CSSO') },\n    {\n      plugin: 'convertStyleToAttrs',\n      label: t('Style to attributes'),\n      content: t('convert styles into attributes'),\n    },\n    {\n      plugin: 'cleanupIDs',\n      label: t('Clean IDs'),\n      content: t('remove unused and minify used IDs'),\n    },\n    {\n      plugin: 'removeRasterImages',\n      label: t('Remove raster images'),\n      content: t('remove raster images'),\n    },\n    {\n      plugin: 'removeUselessDefs',\n      label: t('Remove unused defs'),\n      content: t('remove elements of <defs> without id'),\n    },\n    {\n      plugin: 'cleanupNumericValues',\n      label: t('Round/rewrite numbers'),\n      content: t('round numeric values to the fixed precision, remove default px units'),\n    },\n    {\n      plugin: 'cleanupListOfValues',\n      label: t('Round/rewrite number lists'),\n      content: t('round numeric values in attributes that take a list of numbers (like viewBox or enable-background)'),\n    },\n    {\n      plugin: 'convertColors',\n      label: t('Minify colours'),\n      content: t('convert colors (from rgb() to #rrggbb, from #rrggbb to #rgb)'),\n    },\n    {\n      plugin: 'removeUnknownsAndDefaults',\n      label: t('Remove unknowns & defaults'),\n      content: t('remove unknown elements content and attributes, remove attributes with default values'),\n    },\n    {\n      plugin: 'removeNonInheritableGroupAttrs',\n      label: t('Remove unneeded group attrs'),\n      content: t(`remove non-inheritable group's \"presentation\" attributes`),\n    },\n    {\n      plugin: 'removeUselessStrokeAndFill',\n      label: t('Remove useless stroke & fill'),\n      content: t(`remove useless stroke and fill attributes`),\n    },\n    {\n      plugin: 'removeViewBox',\n      label: t('Remove viewBox'),\n      content: t(`remove viewBox attribute when possible`),\n    },\n    {\n      plugin: 'cleanupEnableBackground',\n      label: t('Remove/tidy enable-background'),\n      content: t(`remove or cleanup enable-background attribute when possible`),\n    },\n    {\n      plugin: 'removeHiddenElems',\n      label: t('Remove hidden elements'),\n      content: t(`remove hidden elements`),\n    },\n    { plugin: 'removeEmptyText', label: 'Remove empty text', content: t('remove empty Text elements') },\n    {\n      plugin: 'convertShapeToPath',\n      label: 'Shapes to (smaller) paths',\n      content: t('convert some basic shapes to <path>'),\n    },\n    {\n      plugin: 'moveElemsAttrsToGroup',\n      label: 'Move attrs to parent group',\n      content: t(`move elements' attributes to their enclosing group`),\n    },\n    {\n      plugin: 'moveGroupAttrsToElems',\n      label: 'Move group attrs to elements',\n      content: t('move some group attributes to the contained elements'),\n    },\n    { plugin: 'collapseGroups', label: 'Collapse useless groups', content: t('collapse useless groups') },\n    {\n      plugin: 'convertPathData',\n      label: 'Round/rewrite paths',\n      content: t(\n        'convert Path data to relative or absolute (whichever is shorter), convert one segment to another, trim useless delimiters, smart rounding, and much more',\n      ),\n    },\n    {\n      plugin: 'convertEllipseToCircle',\n      label: 'Convert non-eccentric <ellipse> to <circle>',\n      content: t('convert non-eccentric <ellipse> to <circle>'),\n    },\n    {\n      plugin: 'convertTransform',\n      label: 'Round/rewrite transforms',\n      content: t('collapse multiple transforms into one, convert matrices to the short aliases, and much more'),\n    },\n    { plugin: 'removeEmptyAttrs', label: 'Remove empty attrs', content: t('remove empty attributes') },\n    {\n      plugin: 'removeEmptyContainers',\n      label: 'Remove empty containers',\n      content: t('remove empty Container elements'),\n    },\n    { plugin: 'mergePaths', label: 'Merge paths', content: t('merge multiple Paths into one') },\n    { plugin: 'removeUnusedNS', label: 'Remove unused namespaces', content: t('remove unused namespaces declaration') },\n    {\n      plugin: 'reusePaths',\n      label: 'Replace duplicate elements with links',\n      content: t('Find duplicated elements and replace them with links'),\n    },\n    { plugin: 'sortAttrs', label: 'Sort attrs', content: t('sort element attributes for epic readability') },\n    {\n      plugin: 'sortDefsChildren',\n      label: 'Sort children of <defs>',\n      content: t('sort children of <defs> in order to improve compression'),\n    },\n    { plugin: 'removeTitle', label: 'Remove <title>', content: t('remove <title>') },\n    { plugin: 'removeDesc', label: 'Remove <desc>', content: t('remove <desc>') },\n    {\n      plugin: 'removeDimensions',\n      label: 'Prefer viewBox to width/height',\n      content: t(`remove width/height and add viewBox if it's missing (opposite to removeViewBox, disable it first)`),\n    },\n    { plugin: 'removeStyleElement', label: 'Remove style elements', content: t('remove <style> elements') },\n    { plugin: 'removeScriptElement', label: 'Remove script elements', content: t('remove <script> elements') },\n  ];\n\n  return (\n    <Wrapper>\n      <StyledLayout\n        title={t(`SVG Optimizer`)}\n        extra={<InputFile type=\"file\" accept=\"image/svg+xml\" multiple onChange={handleChange} />}\n      >\n        <ResultCode\n          codeProps={{\n            style: {\n              height: 'calc(100vh - 87px)',\n              overflow: 'auto',\n              margin: 0,\n              backgroundSize: '16px 16px',\n              backgroundImage: `url('data:image/svg+xml,%3Csvg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 2 2\"%3E%3Cpath d=\"M1 2V0h1v1H0v1z\" fill-opacity=\".05\"/%3E%3C/svg%3E')`,\n            },\n          }}\n        >\n          {imageData &&\n            imageData.length > 0 &&\n            imageData.map((item, key) => {\n              const rawLength = item.raw ? gzip(item.raw).buffer.byteLength : 0;\n              const tinyLength = item.tiny ? gzip(item.tiny).buffer.byteLength : 0;\n              const percen = round((tinyLength / rawLength) * 100, 2);\n              return (\n                <div key={key}>\n                  {item.tiny && item.dimensions && (\n                    <Iframe\n                      sandbox=\"allow-scripts\"\n                      scrolling=\"no\"\n                      src={`data:image/svg+xml,${encodeURIComponent(item.tiny)}`}\n                      width={item.dimensions.width}\n                      height={item.dimensions.height}\n                    />\n                  )}\n                  {item.error && (\n                    <div key={key} style={{ color: 'red' }}>\n                      {item.error}\n                    </div>\n                  )}\n                  <PrettyBytesInfo>\n                    <img src={item.base64} height={23} />\n                    <span>\n                      {prettyBytes(rawLength, 2, false)} → {prettyBytes(tinyLength, 2, false)}\n                    </span>\n                    <Percen num={percen}>{percen}%</Percen>\n                    <CopyButton value={item.tiny || ''} />\n                    <a href={`data:image/svg+xml,${item.tiny}`} download={item.name}>\n                      download <b>{item.name}</b>\n                    </a>\n                  </PrettyBytesInfo>\n                </div>\n              );\n            })}\n        </ResultCode>\n      </StyledLayout>\n      {imageData && imageData.length > 0 && (\n        <StyledLayout\n          title={t(`Options`, { ns: 'common' })}\n          style={{ maxWidth: 420 }}\n          extra={\n            <Fragment>\n              <Button onClick={() => setOptions(defaultOptions)}>Reset</Button>\n            </Fragment>\n          }\n        >\n          <ResultCode codeProps={{ style: { height: 'calc(100vh - 87px)', overflow: 'auto', margin: 0 } }}>\n            <Spacing>\n              <Checkbox\n                checked={!!options.pretty}\n                onChange={({ target }) => setOptions({ ...options, pretty: target.checked })}\n              >\n                Prettify markup <Info>{t<string>('Prettify markup')}</Info>\n              </Checkbox>\n              <Checkbox\n                checked={!!options.multipass}\n                onChange={({ target }) => setOptions({ ...options, multipass: target.checked })}\n              >\n                {t<string>('multipass')}{' '}\n                <Info>{t<string>('Pass over SVGs multiple times to ensure all optimizations are applied')}</Info>\n              </Checkbox>\n              <Checkbox\n                type=\"range\"\n                max=\"8\"\n                min=\"0\"\n                step=\"1\"\n                value={options.floatPrecision}\n                onChange={({ target }) => setOptions({ ...options, floatPrecision: Number(target.value) })}\n              >\n                {options.floatPrecision} {t<string>('Precision')}{' '}\n                <Info>\n                  {t<string>(\n                    'Precision of floating point numbers. Will be passed to each plugin that suppors this param.',\n                  )}\n                </Info>\n              </Checkbox>\n              {opts.map((item, key) => {\n                return (\n                  <Checkbox\n                    key={key}\n                    checked={includesPlugin(item.plugin, options.plugins)}\n                    onChange={({ target }) => setOptions(settingPlugin(item.plugin, target.checked))}\n                  >\n                    {t<string>(item.label)} <Info>{t<string>(item.content)}</Info>\n                  </Checkbox>\n                );\n              })}\n            </Spacing>\n          </ResultCode>\n        </StyledLayout>\n      )}\n    </Wrapper>\n  );\n}\n"],"names":["compress","svgInput","settings","plugins","forEach","item","floatPrecision","Number","push","name","params","dimensions","width","height","plugin","type","fn","element","enter","_ref","attributes","_ref2","undefined","parseFloat","viewBox","split","createDimensionsExtractor","extractDimensionsPlugin","optimize","multipass","js2svg","indent","pretty","data","modernError","error","message","prettyBytes","num","precision","addSpace","UNITS","Math","abs","exponent","min","floor","log10","length","toPrecision","fileReader","file","Promise","resolve","reject","reader","FileReader","readAsDataURL","readAsText","onloadend","result","toString","onerror","err","Info","styled","Iframe","InputFile","PrettyBytesInfo","Percen","props","css","defaultOptions","Checkbox","children","other","_jsx","_jsxs","SVGOptimizer","t","useTranslation","useState","options","setOptions","imageData","setImageData","handleChange","evn","files","target","all","Array","from","map","console","log","base64","raw","d","tiny","useEffect","opts","label","content","Wrapper","StyledLayout","title","extra","accept","multiple","onChange","ResultCode","codeProps","style","overflow","margin","backgroundSize","backgroundImage","key","rawLength","gzip","buffer","byteLength","tinyLength","percen","places","mult","round","sandbox","scrolling","src","encodeURIComponent","color","CopyButton","value","href","download","ns","maxWidth","Fragment","Button","onClick","Spacing","checked","_ref4","_ref5","max","step","_ref6","includes","_ref7","splice","indexOf","settingPlugin"],"sourceRoot":""}