{"version":3,"file":"static/js/6421.98d653a4.chunk.js","mappings":"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","sources":["../../packages/pdf-to-img/esm/index.js"],"sourcesContent":["import _taggedTemplateLiteralLoose from \"@babel/runtime/helpers/taggedTemplateLiteralLoose\";\nvar _templateObject, _templateObject2;\nimport { useState, useRef, useEffect } from 'react';\nimport { Wrapper, Spacing, StyledLayout, Button } from '@wcj/tools-react-components';\nimport * as PDF from 'pdfjs-dist';\nimport styled from 'styled-components';\n\n// @ts-ignore\nimport pdfjsWorker from 'pdfjs-dist/build/pdf.worker.entry';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nPDF.GlobalWorkerOptions.workerSrc = pdfjsWorker;\nvar InputPDF = styled.input(_templateObject || (_templateObject = _taggedTemplateLiteralLoose([\"\"])));\nvar Canvas = styled.canvas(_templateObject2 || (_templateObject2 = _taggedTemplateLiteralLoose([\"\\n  border: 1px solid var(--color-border-default);\\n\"])));\nexport default function QRCodeGenerator() {\n  var canvas = useRef(null);\n  var [type, setType] = useState('png');\n  var [saveAll, setSaveAll] = useState(false);\n  var [pdf, setPdf] = useState();\n  var [name, setName] = useState();\n  var [pageNum, setPageNum] = useState(1);\n  var [pageNumInfo, setPageNumInfo] = useState();\n  var [loading, setLoading] = useState();\n  useEffect(() => {\n    if (saveAll) {\n      renderPage(() => {\n        if (pageNum >= pdf.numPages) {\n          setSaveAll(false);\n          return;\n        }\n        save();\n        setPageNum(pageNum + 1);\n        setSaveAll(true);\n      });\n    } else if (pdf && pageNum) {\n      renderPage();\n    }\n  }, [pdf, pageNum, saveAll]);\n  function renderPage(callback) {\n    pdf == null ? void 0 : pdf.getPage(pageNum).then(page => {\n      var scale = 1.5;\n      var viewport = page.getViewport({\n        scale: scale\n      });\n      canvas.current.height = viewport.height;\n      canvas.current.width = viewport.width;\n      canvas.current.style.width = viewport.width + \"px\";\n      canvas.current.style.height = viewport.height + \"px\";\n      var context = canvas.current.getContext('2d');\n      var renderContext = {\n        canvasContext: context,\n        viewport: viewport\n      };\n      page.render(renderContext).promise.then(callback);\n    });\n    setPageNumInfo(pageNum + \" / \" + pdf.numPages);\n  }\n  function showPDF(url) {\n    var loadingTask = PDF.getDocument(url);\n    loadingTask.promise.then(doc => {\n      setLoading(false);\n      setPdf(doc);\n      setPageNum(1);\n    }, reason => {\n      alert(reason);\n    });\n  }\n  var handleInput = evn => {\n    if (!evn.target.files) return;\n    var file = evn.target.files[0];\n    setLoading(true);\n    setPageNumInfo('');\n    setName(file.name);\n    var reader = new FileReader();\n    reader.onload = e => {\n      var _e$target;\n      return showPDF((_e$target = e.target) == null ? void 0 : _e$target.result);\n    };\n    reader.readAsDataURL(file);\n  };\n  function save() {\n    var a = document.createElement('a');\n    var event = new MouseEvent('click');\n    a.download = name + '-' + pageNum + '.' + type;\n    a.href = canvas.current.toDataURL(type === 'png' ? 'image/png' : 'image/jpeg');\n    a.dispatchEvent(event);\n  }\n  var savePage = () => {\n    if (pageNum > pdf.numPages) {\n      alert('All saved successfully');\n      return;\n    }\n    save();\n  };\n  function prevPage() {\n    if (pageNum <= 1) {\n      return;\n    }\n    setPageNum(pageNum - 1);\n  }\n  function nextPage() {\n    if (pageNum >= pdf.numPages) {\n      return;\n    }\n    setPageNum(pageNum + 1);\n  }\n  return /*#__PURE__*/_jsx(Wrapper, {\n    children: /*#__PURE__*/_jsx(StyledLayout, {\n      title: \"Selected PDF File\",\n      overflow: \"initial\",\n      children: /*#__PURE__*/_jsxs(Spacing, {\n        children: [/*#__PURE__*/_jsx(InputPDF, {\n          type: \"file\",\n          accept: \"application/pdf\",\n          onChange: handleInput\n        }), pageNumInfo && /*#__PURE__*/_jsxs(Spacing, {\n          direction: \"row\",\n          children: [/*#__PURE__*/_jsx(Button, {\n            onClick: prevPage,\n            disabled: pageNum === 1,\n            children: \"Previous page\"\n          }), /*#__PURE__*/_jsx(Button, {\n            onClick: nextPage,\n            disabled: !pdf || pageNum >= pdf.numPages,\n            children: \"Next page\"\n          }), /*#__PURE__*/_jsx(Button, {\n            onClick: savePage,\n            children: \"Save this page\"\n          }), /*#__PURE__*/_jsx(Button, {\n            onClick: () => {\n              setPageNum(1);\n              setSaveAll(true);\n            },\n            children: \"Save all\"\n          })]\n        }), pageNumInfo && /*#__PURE__*/_jsxs(\"div\", {\n          children: [name, \", Page: \", pageNumInfo]\n        }), loading === true && /*#__PURE__*/_jsx(\"div\", {\n          children: \"Loading...\"\n        }), loading === false && /*#__PURE__*/_jsx(Canvas, {\n          ref: canvas\n        })]\n      })\n    })\n  });\n}"],"names":["_templateObject","_templateObject2","PDF","pdfjsWorker","InputPDF","styled","_taggedTemplateLiteralLoose","Canvas","QRCodeGenerator","canvas","useRef","_useState","useState","_useState2","_slicedToArray","type","_useState3","_useState4","saveAll","setSaveAll","_useState5","_useState6","pdf","setPdf","_useState7","_useState8","name","setName","_useState9","_useState10","pageNum","setPageNum","_useState11","_useState12","pageNumInfo","setPageNumInfo","_useState13","_useState14","loading","setLoading","renderPage","callback","getPage","then","page","viewport","getViewport","scale","current","height","width","style","renderContext","canvasContext","getContext","render","promise","numPages","useEffect","save","a","document","createElement","event","MouseEvent","download","href","toDataURL","dispatchEvent","_jsx","Wrapper","children","StyledLayout","title","overflow","_jsxs","Spacing","accept","onChange","evn","target","files","file","reader","FileReader","onload","e","_e$target","url","result","doc","reason","alert","readAsDataURL","direction","Button","onClick","disabled","ref"],"sourceRoot":""}