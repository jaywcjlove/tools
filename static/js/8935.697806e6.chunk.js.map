{"version":3,"file":"static/js/8935.697806e6.chunk.js","mappings":"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","sources":["../../packages/chinese-pinyin-conversion/src/index.tsx"],"sourcesContent":["import { Fragment, InputHTMLAttributes, useEffect, useState } from 'react';\nimport { Wrapper, Textarea, StyledLayout, CopyButton, ResultCode, Button } from '@wcj/tools-react-components';\nimport styled from 'styled-components';\nimport { useTranslation } from 'react-i18next';\n// @ts-ignore\nimport pinyin from 'pinyin/lib/web-pinyin';\n// import { IPinyinStyle } from 'pinyin';\n\ntype IPinyinStyle = any;\n\nconst sample = `将进酒·君不见 - 李白\\n君不见，黄河之水天上来，奔流到海不复回。\n君不见，高堂明镜悲白发，朝如青丝暮成雪。\n人生得意须尽欢，莫使金樽空对月。\n天生我材必有用，千金散尽还复来。\n烹羊宰牛且为乐，会须一饮三百杯。\n岑夫子，丹丘生，将进酒，杯莫停。\n与君歌一曲，请君为我倾耳听。\n钟鼓馔玉不足贵，但愿长醉不愿醒。\n古来圣贤皆寂寞，惟有饮者留其名。\n陈王昔时宴平乐，斗酒十千恣欢谑。\n主人何为言少钱，径须沽取对君酌。\n五花马，千金裘，呼儿将出换美酒，与尔同销万古愁。`;\n\ntype ResultHans = string | { hans: string; py: string };\n\nconst Hans = styled.div`\n  line-height: 38px;\n  & rt {\n    letter-spacing: 0;\n  }\n  & ruby {\n    text-align: center;\n    margin: 0 5px;\n  }\n`;\n\nconst Text = styled.span`\n  letter-spacing: 0;\n`;\n\nconst ExtraLayout = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 10px;\n`;\n\ninterface InputRadioProps\n  extends Omit<React.DetailedHTMLProps<InputHTMLAttributes<HTMLInputElement>, HTMLInputElement>, 'style'> {\n  style?: IPinyinStyle;\n  value?: IPinyinStyle;\n}\n\nconst InputRadio: React.FC<React.PropsWithChildren<InputRadioProps>> = ({ style, value, children, ...props }) => (\n  <label>\n    <input type=\"radio\" name=\"style\" {...props} value={value} checked={style === value} /> {children}\n  </label>\n);\n\nexport default function ChinesePinyinConversion() {\n  const { t } = useTranslation();\n  const [value, setValue] = useState<string>();\n  const [style, setStyle] = useState<IPinyinStyle>('TONE');\n  const [result, setResult] = useState<string>();\n  const [resultHans, setResultHans] = useState<ResultHans[]>([]);\n  const handleInput = (value: string = '') => {\n    setValue(value);\n    const json = pinyin(value, { style: style, group: true });\n    const textPinyin = json\n      .join(' ')\n      .replace(\n        /[。，（）]/g,\n        (c: string) => (({ '。': '.', '，': ',', '（': '(', '）': ')' } as Record<string, string>)[c]),\n      );\n    setResult(textPinyin);\n\n    const arr = json.flat();\n    let pyIndx = 0;\n    let hans = '';\n    const result: ResultHans[] = [];\n    for (let i = 0; i < value.length; i++) {\n      if (/[\\u4e00-\\u9fa5]/g.test(value[i])) {\n        result.push({ hans: value[i], py: arr[pyIndx] });\n        pyIndx += 1;\n        hans = '';\n      } else {\n        hans += value[i];\n        if (hans === arr[pyIndx]) {\n          result.push(hans);\n          pyIndx += 1;\n        }\n      }\n    }\n    setResultHans(result);\n  };\n  const ResultTitle = () => (\n    <ruby>\n      拼 <rt>pīn</rt>音 <rt>yīn</rt>\n    </ruby>\n  );\n  const hanldeChange = (evn: React.ChangeEvent<HTMLInputElement>) => {\n    const typeVal = (evn.target as HTMLInputElement).value as IPinyinStyle;\n    setStyle(typeVal);\n  };\n  useEffect(() => {\n    if (value && style) {\n      handleInput(value);\n    }\n  }, [style, value]);\n  return (\n    <Wrapper>\n      <StyledLayout\n        title={t('menu./chinese-pinyin-conversion.label')}\n        extra={\n          <Fragment>\n            <Button onClick={() => setValue(sample)}>Sample</Button>\n            {value && <CopyButton value={value} />}\n          </Fragment>\n        }\n      >\n        <Textarea\n          spellCheck={false}\n          value={value}\n          style={{ fontSize: 16 }}\n          onInput={(evn) => handleInput((evn.target as HTMLTextAreaElement).value)}\n        />\n      </StyledLayout>\n      <StyledLayout title=\"Result\">\n        <ResultCode\n          title={<ResultTitle />}\n          extra={\n            <ExtraLayout>\n              <InputRadio onChange={hanldeChange} style={style} value=\"NORMAL\">\n                NORMAL\n              </InputRadio>\n              <InputRadio onChange={hanldeChange} style={style} value=\"TONE\">\n                TONE\n              </InputRadio>\n              <InputRadio onChange={hanldeChange} style={style} value=\"FIRST_LETTER\">\n                FIRST_LETTER\n              </InputRadio>\n              {result && <CopyButton value={result} />}\n            </ExtraLayout>\n          }\n        >\n          {result}\n        </ResultCode>\n        <ResultCode>\n          <Hans>\n            {resultHans.map((item, idx) => {\n              if (typeof item === 'string') {\n                return <Text key={idx}>{item}</Text>;\n              }\n              return (\n                <ruby key={idx}>\n                  {item.hans}\n                  <rt>{item.py}</rt>\n                </ruby>\n              );\n            })}\n          </Hans>\n        </ResultCode>\n      </StyledLayout>\n    </Wrapper>\n  );\n}\n"],"names":["Hans","styled","Text","ExtraLayout","InputRadio","_ref","style","value","children","props","_jsxs","_jsx","type","name","checked","ChinesePinyinConversion","t","useTranslation","useState","setValue","setStyle","result","setResult","resultHans","setResultHans","handleInput","json","pinyin","group","textPinyin","join","replace","c","arr","flat","pyIndx","hans","i","length","test","push","py","ResultTitle","hanldeChange","evn","typeVal","target","useEffect","Wrapper","StyledLayout","title","extra","Fragment","Button","onClick","CopyButton","Textarea","spellCheck","fontSize","onInput","ResultCode","onChange","map","item","idx"],"sourceRoot":""}