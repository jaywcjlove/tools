{"version":3,"file":"static/js/817.306c3a1a.chunk.js","mappings":"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","sources":["../../node_modules/boolbase/index.js","../../node_modules/css-selector-parser/lib/index.js","../../node_modules/css-selector-parser/lib/parser-context.js","../../node_modules/css-selector-parser/lib/render.js","../../node_modules/css-selector-parser/lib/utils.js","../../node_modules/nth-check/lib/compile.js","../../node_modules/nth-check/lib/index.js","../../node_modules/nth-check/lib/parse.js","../../node_modules/prop-types/factoryWithThrowingShims.js","../../node_modules/prop-types/index.js","../../node_modules/prop-types/lib/ReactPropTypesSecret.js","../../node_modules/react-markdown/node_modules/react-is/cjs/react-is.production.min.js","../../node_modules/react-markdown/node_modules/react-is/index.js","../../node_modules/react-markdown/lib/rehype-filter.js","../../node_modules/react-markdown/lib/uri-transformer.js","../../node_modules/react-markdown/lib/ast-to-react.js","../../node_modules/react-markdown/lib/react-markdown.js","../../node_modules/rehype-attr/src/utils.ts","../../node_modules/rehype-attr/src/index.ts","../../src/generator.js","../../src/all.js","../../src/common.js","../../node_modules/direction/index.js","../../node_modules/hast-util-select/lib/util.js","../../node_modules/hast-util-select/lib/enter-state.js","../../node_modules/hast-util-select/lib/nest.js","../../node_modules/bcp-47-match/index.js","../../node_modules/hast-util-select/lib/pseudo.js","../../node_modules/hast-util-select/lib/attribute.js","../../node_modules/hast-util-select/lib/test.js","../../node_modules/hast-util-select/lib/name.js","../../node_modules/hast-util-select/lib/class-name.js","../../node_modules/hast-util-select/lib/id.js","../../node_modules/hast-util-select/lib/any.js","../../node_modules/hast-util-select/lib/parse.js","../../node_modules/hast-util-select/index.js","../../node_modules/rehype-rewrite/src/index.ts","../../node_modules/@uiw/react-markdown-preview/src/nodes/octiconLink.ts","../../node_modules/@uiw/react-markdown-preview/src/plugins/reservedMeta.ts","../../node_modules/@uiw/react-markdown-preview/src/index.tsx","../../node_modules/@uiw/react-markdown-preview/src/nodes/copy.ts","../../node_modules/@uiw/react-md-editor/src/Context.tsx","../../node_modules/@uiw/react-md-editor/src/components/TextArea/shortcuts.ts","../../node_modules/rehype/index.js","../../node_modules/@uiw/react-md-editor/src/components/TextArea/Markdown.tsx","../../node_modules/@uiw/react-md-editor/src/utils/markdownUtils.ts","../../node_modules/@uiw/react-md-editor/src/commands/bold.tsx","../../node_modules/@uiw/react-md-editor/src/commands/code.tsx","../../node_modules/@uiw/react-md-editor/src/commands/italic.tsx","../../node_modules/@uiw/react-md-editor/src/commands/link.tsx","../../node_modules/@uiw/react-md-editor/src/commands/list.tsx","../../node_modules/@uiw/react-md-editor/src/utils/InsertTextAtPosition.ts","../../node_modules/@uiw/react-md-editor/src/commands/quote.tsx","../../node_modules/@uiw/react-md-editor/src/commands/hr.tsx","../../node_modules/@uiw/react-md-editor/src/commands/title2.tsx","../../node_modules/@uiw/react-md-editor/src/commands/title.tsx","../../node_modules/@uiw/react-md-editor/src/commands/comment.tsx","../../node_modules/@uiw/react-md-editor/src/commands/divider.tsx","../../node_modules/@uiw/react-md-editor/src/commands/preview.tsx","../../node_modules/@uiw/react-md-editor/src/commands/fullscreen.tsx","../../node_modules/@uiw/react-md-editor/src/commands/image.tsx","../../node_modules/@uiw/react-md-editor/src/commands/strikeThrough.tsx","../../node_modules/@uiw/react-md-editor/src/commands/index.ts","../../node_modules/@uiw/react-md-editor/src/components/TextArea/handleKeyDown.tsx","../../node_modules/@uiw/react-md-editor/src/components/TextArea/Textarea.tsx","../../node_modules/@uiw/react-md-editor/src/components/TextArea/index.tsx","../../node_modules/@uiw/react-md-editor/src/components/Toolbar/Child.tsx","../../node_modules/@uiw/react-md-editor/src/components/Toolbar/index.tsx","../../node_modules/@uiw/react-md-editor/src/components/DragBar/index.tsx","../../node_modules/@uiw/react-md-editor/src/Editor.tsx","../../node_modules/@uiw/react-md-editor/src/index.tsx","../../packages/simple-markdown-editor/src/index.tsx"],"sourcesContent":["module.exports = {\n\ttrueFunc: function trueFunc(){\n\t\treturn true;\n\t},\n\tfalseFunc: function falseFunc(){\n\t\treturn false;\n\t}\n};","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar parser_context_1 = require(\"./parser-context\");\nvar render_1 = require(\"./render\");\nvar CssSelectorParser = /** @class */ (function () {\n    function CssSelectorParser() {\n        this.pseudos = {};\n        this.attrEqualityMods = {};\n        this.ruleNestingOperators = {};\n        this.substitutesEnabled = false;\n    }\n    CssSelectorParser.prototype.registerSelectorPseudos = function () {\n        var pseudos = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            pseudos[_i] = arguments[_i];\n        }\n        for (var _a = 0, pseudos_1 = pseudos; _a < pseudos_1.length; _a++) {\n            var pseudo = pseudos_1[_a];\n            this.pseudos[pseudo] = 'selector';\n        }\n        return this;\n    };\n    CssSelectorParser.prototype.unregisterSelectorPseudos = function () {\n        var pseudos = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            pseudos[_i] = arguments[_i];\n        }\n        for (var _a = 0, pseudos_2 = pseudos; _a < pseudos_2.length; _a++) {\n            var pseudo = pseudos_2[_a];\n            delete this.pseudos[pseudo];\n        }\n        return this;\n    };\n    CssSelectorParser.prototype.registerNumericPseudos = function () {\n        var pseudos = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            pseudos[_i] = arguments[_i];\n        }\n        for (var _a = 0, pseudos_3 = pseudos; _a < pseudos_3.length; _a++) {\n            var pseudo = pseudos_3[_a];\n            this.pseudos[pseudo] = 'numeric';\n        }\n        return this;\n    };\n    CssSelectorParser.prototype.unregisterNumericPseudos = function () {\n        var pseudos = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            pseudos[_i] = arguments[_i];\n        }\n        for (var _a = 0, pseudos_4 = pseudos; _a < pseudos_4.length; _a++) {\n            var pseudo = pseudos_4[_a];\n            delete this.pseudos[pseudo];\n        }\n        return this;\n    };\n    CssSelectorParser.prototype.registerNestingOperators = function () {\n        var operators = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            operators[_i] = arguments[_i];\n        }\n        for (var _a = 0, operators_1 = operators; _a < operators_1.length; _a++) {\n            var operator = operators_1[_a];\n            this.ruleNestingOperators[operator] = true;\n        }\n        return this;\n    };\n    CssSelectorParser.prototype.unregisterNestingOperators = function () {\n        var operators = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            operators[_i] = arguments[_i];\n        }\n        for (var _a = 0, operators_2 = operators; _a < operators_2.length; _a++) {\n            var operator = operators_2[_a];\n            delete this.ruleNestingOperators[operator];\n        }\n        return this;\n    };\n    CssSelectorParser.prototype.registerAttrEqualityMods = function () {\n        var mods = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            mods[_i] = arguments[_i];\n        }\n        for (var _a = 0, mods_1 = mods; _a < mods_1.length; _a++) {\n            var mod = mods_1[_a];\n            this.attrEqualityMods[mod] = true;\n        }\n        return this;\n    };\n    CssSelectorParser.prototype.unregisterAttrEqualityMods = function () {\n        var mods = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            mods[_i] = arguments[_i];\n        }\n        for (var _a = 0, mods_2 = mods; _a < mods_2.length; _a++) {\n            var mod = mods_2[_a];\n            delete this.attrEqualityMods[mod];\n        }\n        return this;\n    };\n    CssSelectorParser.prototype.enableSubstitutes = function () {\n        this.substitutesEnabled = true;\n        return this;\n    };\n    CssSelectorParser.prototype.disableSubstitutes = function () {\n        this.substitutesEnabled = false;\n        return this;\n    };\n    CssSelectorParser.prototype.parse = function (str) {\n        return parser_context_1.parseCssSelector(str, 0, this.pseudos, this.attrEqualityMods, this.ruleNestingOperators, this.substitutesEnabled);\n    };\n    CssSelectorParser.prototype.render = function (path) {\n        return render_1.renderEntity(path).trim();\n    };\n    return CssSelectorParser;\n}());\nexports.CssSelectorParser = CssSelectorParser;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar utils_1 = require(\"./utils\");\nfunction parseCssSelector(str, pos, pseudos, attrEqualityMods, ruleNestingOperators, substitutesEnabled) {\n    var l = str.length;\n    var chr = '';\n    function getStr(quote, escapeTable) {\n        var result = '';\n        pos++;\n        chr = str.charAt(pos);\n        while (pos < l) {\n            if (chr === quote) {\n                pos++;\n                return result;\n            }\n            else if (chr === '\\\\') {\n                pos++;\n                chr = str.charAt(pos);\n                var esc = void 0;\n                if (chr === quote) {\n                    result += quote;\n                }\n                else if ((esc = escapeTable[chr]) !== undefined) {\n                    result += esc;\n                }\n                else if (utils_1.isHex(chr)) {\n                    var hex = chr;\n                    pos++;\n                    chr = str.charAt(pos);\n                    while (utils_1.isHex(chr)) {\n                        hex += chr;\n                        pos++;\n                        chr = str.charAt(pos);\n                    }\n                    if (chr === ' ') {\n                        pos++;\n                        chr = str.charAt(pos);\n                    }\n                    result += String.fromCharCode(parseInt(hex, 16));\n                    continue;\n                }\n                else {\n                    result += chr;\n                }\n            }\n            else {\n                result += chr;\n            }\n            pos++;\n            chr = str.charAt(pos);\n        }\n        return result;\n    }\n    function getIdent() {\n        var result = '';\n        chr = str.charAt(pos);\n        while (pos < l) {\n            if (utils_1.isIdent(chr)) {\n                result += chr;\n            }\n            else if (chr === '\\\\') {\n                pos++;\n                if (pos >= l) {\n                    throw Error('Expected symbol but end of file reached.');\n                }\n                chr = str.charAt(pos);\n                if (utils_1.identSpecialChars[chr]) {\n                    result += chr;\n                }\n                else if (utils_1.isHex(chr)) {\n                    var hex = chr;\n                    pos++;\n                    chr = str.charAt(pos);\n                    while (utils_1.isHex(chr)) {\n                        hex += chr;\n                        pos++;\n                        chr = str.charAt(pos);\n                    }\n                    if (chr === ' ') {\n                        pos++;\n                        chr = str.charAt(pos);\n                    }\n                    result += String.fromCharCode(parseInt(hex, 16));\n                    continue;\n                }\n                else {\n                    result += chr;\n                }\n            }\n            else {\n                return result;\n            }\n            pos++;\n            chr = str.charAt(pos);\n        }\n        return result;\n    }\n    function skipWhitespace() {\n        chr = str.charAt(pos);\n        var result = false;\n        while (chr === ' ' || chr === \"\\t\" || chr === \"\\n\" || chr === \"\\r\" || chr === \"\\f\") {\n            result = true;\n            pos++;\n            chr = str.charAt(pos);\n        }\n        return result;\n    }\n    function parse() {\n        var res = parseSelector();\n        if (pos < l) {\n            throw Error('Rule expected but \"' + str.charAt(pos) + '\" found.');\n        }\n        return res;\n    }\n    function parseSelector() {\n        var selector = parseSingleSelector();\n        if (!selector) {\n            return null;\n        }\n        var res = selector;\n        chr = str.charAt(pos);\n        while (chr === ',') {\n            pos++;\n            skipWhitespace();\n            if (res.type !== 'selectors') {\n                res = {\n                    type: 'selectors',\n                    selectors: [selector]\n                };\n            }\n            selector = parseSingleSelector();\n            if (!selector) {\n                throw Error('Rule expected after \",\".');\n            }\n            res.selectors.push(selector);\n        }\n        return res;\n    }\n    function parseSingleSelector() {\n        skipWhitespace();\n        var selector = {\n            type: 'ruleSet'\n        };\n        var rule = parseRule();\n        if (!rule) {\n            return null;\n        }\n        var currentRule = selector;\n        while (rule) {\n            rule.type = 'rule';\n            currentRule.rule = rule;\n            currentRule = rule;\n            skipWhitespace();\n            chr = str.charAt(pos);\n            if (pos >= l || chr === ',' || chr === ')') {\n                break;\n            }\n            if (ruleNestingOperators[chr]) {\n                var op = chr;\n                pos++;\n                skipWhitespace();\n                rule = parseRule();\n                if (!rule) {\n                    throw Error('Rule expected after \"' + op + '\".');\n                }\n                rule.nestingOperator = op;\n            }\n            else {\n                rule = parseRule();\n                if (rule) {\n                    rule.nestingOperator = null;\n                }\n            }\n        }\n        return selector;\n    }\n    // @ts-ignore no-overlap\n    function parseRule() {\n        var rule = null;\n        while (pos < l) {\n            chr = str.charAt(pos);\n            if (chr === '*') {\n                pos++;\n                (rule = rule || {}).tagName = '*';\n            }\n            else if (utils_1.isIdentStart(chr) || chr === '\\\\') {\n                (rule = rule || {}).tagName = getIdent();\n            }\n            else if (chr === '.') {\n                pos++;\n                rule = rule || {};\n                (rule.classNames = rule.classNames || []).push(getIdent());\n            }\n            else if (chr === '#') {\n                pos++;\n                (rule = rule || {}).id = getIdent();\n            }\n            else if (chr === '[') {\n                pos++;\n                skipWhitespace();\n                var attr = {\n                    name: getIdent()\n                };\n                skipWhitespace();\n                // @ts-ignore\n                if (chr === ']') {\n                    pos++;\n                }\n                else {\n                    var operator = '';\n                    if (attrEqualityMods[chr]) {\n                        operator = chr;\n                        pos++;\n                        chr = str.charAt(pos);\n                    }\n                    if (pos >= l) {\n                        throw Error('Expected \"=\" but end of file reached.');\n                    }\n                    if (chr !== '=') {\n                        throw Error('Expected \"=\" but \"' + chr + '\" found.');\n                    }\n                    attr.operator = operator + '=';\n                    pos++;\n                    skipWhitespace();\n                    var attrValue = '';\n                    attr.valueType = 'string';\n                    // @ts-ignore\n                    if (chr === '\"') {\n                        attrValue = getStr('\"', utils_1.doubleQuotesEscapeChars);\n                        // @ts-ignore\n                    }\n                    else if (chr === '\\'') {\n                        attrValue = getStr('\\'', utils_1.singleQuoteEscapeChars);\n                        // @ts-ignore\n                    }\n                    else if (substitutesEnabled && chr === '$') {\n                        pos++;\n                        attrValue = getIdent();\n                        attr.valueType = 'substitute';\n                    }\n                    else {\n                        while (pos < l) {\n                            if (chr === ']') {\n                                break;\n                            }\n                            attrValue += chr;\n                            pos++;\n                            chr = str.charAt(pos);\n                        }\n                        attrValue = attrValue.trim();\n                    }\n                    skipWhitespace();\n                    if (pos >= l) {\n                        throw Error('Expected \"]\" but end of file reached.');\n                    }\n                    if (chr !== ']') {\n                        throw Error('Expected \"]\" but \"' + chr + '\" found.');\n                    }\n                    pos++;\n                    attr.value = attrValue;\n                }\n                rule = rule || {};\n                (rule.attrs = rule.attrs || []).push(attr);\n            }\n            else if (chr === ':') {\n                pos++;\n                var pseudoName = getIdent();\n                var pseudo = {\n                    name: pseudoName\n                };\n                // @ts-ignore\n                if (chr === '(') {\n                    pos++;\n                    var value = '';\n                    skipWhitespace();\n                    if (pseudos[pseudoName] === 'selector') {\n                        pseudo.valueType = 'selector';\n                        value = parseSelector();\n                    }\n                    else {\n                        pseudo.valueType = pseudos[pseudoName] || 'string';\n                        // @ts-ignore\n                        if (chr === '\"') {\n                            value = getStr('\"', utils_1.doubleQuotesEscapeChars);\n                            // @ts-ignore\n                        }\n                        else if (chr === '\\'') {\n                            value = getStr('\\'', utils_1.singleQuoteEscapeChars);\n                            // @ts-ignore\n                        }\n                        else if (substitutesEnabled && chr === '$') {\n                            pos++;\n                            value = getIdent();\n                            pseudo.valueType = 'substitute';\n                        }\n                        else {\n                            while (pos < l) {\n                                if (chr === ')') {\n                                    break;\n                                }\n                                value += chr;\n                                pos++;\n                                chr = str.charAt(pos);\n                            }\n                            value = value.trim();\n                        }\n                        skipWhitespace();\n                    }\n                    if (pos >= l) {\n                        throw Error('Expected \")\" but end of file reached.');\n                    }\n                    if (chr !== ')') {\n                        throw Error('Expected \")\" but \"' + chr + '\" found.');\n                    }\n                    pos++;\n                    pseudo.value = value;\n                }\n                rule = rule || {};\n                (rule.pseudos = rule.pseudos || []).push(pseudo);\n            }\n            else {\n                break;\n            }\n        }\n        return rule;\n    }\n    return parse();\n}\nexports.parseCssSelector = parseCssSelector;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar utils_1 = require(\"./utils\");\nfunction renderEntity(entity) {\n    var res = '';\n    switch (entity.type) {\n        case 'ruleSet':\n            var currentEntity = entity.rule;\n            var parts = [];\n            while (currentEntity) {\n                if (currentEntity.nestingOperator) {\n                    parts.push(currentEntity.nestingOperator);\n                }\n                parts.push(renderEntity(currentEntity));\n                currentEntity = currentEntity.rule;\n            }\n            res = parts.join(' ');\n            break;\n        case 'selectors':\n            res = entity.selectors.map(renderEntity).join(', ');\n            break;\n        case 'rule':\n            if (entity.tagName) {\n                if (entity.tagName === '*') {\n                    res = '*';\n                }\n                else {\n                    res = utils_1.escapeIdentifier(entity.tagName);\n                }\n            }\n            if (entity.id) {\n                res += \"#\" + utils_1.escapeIdentifier(entity.id);\n            }\n            if (entity.classNames) {\n                res += entity.classNames.map(function (cn) {\n                    return \".\" + (utils_1.escapeIdentifier(cn));\n                }).join('');\n            }\n            if (entity.attrs) {\n                res += entity.attrs.map(function (attr) {\n                    if ('operator' in attr) {\n                        if (attr.valueType === 'substitute') {\n                            return \"[\" + utils_1.escapeIdentifier(attr.name) + attr.operator + \"$\" + attr.value + \"]\";\n                        }\n                        else {\n                            return \"[\" + utils_1.escapeIdentifier(attr.name) + attr.operator + utils_1.escapeStr(attr.value) + \"]\";\n                        }\n                    }\n                    else {\n                        return \"[\" + utils_1.escapeIdentifier(attr.name) + \"]\";\n                    }\n                }).join('');\n            }\n            if (entity.pseudos) {\n                res += entity.pseudos.map(function (pseudo) {\n                    if (pseudo.valueType) {\n                        if (pseudo.valueType === 'selector') {\n                            return \":\" + utils_1.escapeIdentifier(pseudo.name) + \"(\" + renderEntity(pseudo.value) + \")\";\n                        }\n                        else if (pseudo.valueType === 'substitute') {\n                            return \":\" + utils_1.escapeIdentifier(pseudo.name) + \"($\" + pseudo.value + \")\";\n                        }\n                        else if (pseudo.valueType === 'numeric') {\n                            return \":\" + utils_1.escapeIdentifier(pseudo.name) + \"(\" + pseudo.value + \")\";\n                        }\n                        else {\n                            return (\":\" + utils_1.escapeIdentifier(pseudo.name) +\n                                \"(\" + utils_1.escapeIdentifier(pseudo.value) + \")\");\n                        }\n                    }\n                    else {\n                        return \":\" + utils_1.escapeIdentifier(pseudo.name);\n                    }\n                }).join('');\n            }\n            break;\n        default:\n            throw Error('Unknown entity type: \"' + entity.type + '\".');\n    }\n    return res;\n}\nexports.renderEntity = renderEntity;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction isIdentStart(c) {\n    return (c >= 'a' && c <= 'z') || (c >= 'A' && c <= 'Z') || (c === '-') || (c === '_');\n}\nexports.isIdentStart = isIdentStart;\nfunction isIdent(c) {\n    return (c >= 'a' && c <= 'z') || (c >= 'A' && c <= 'Z') || (c >= '0' && c <= '9') || c === '-' || c === '_';\n}\nexports.isIdent = isIdent;\nfunction isHex(c) {\n    return (c >= 'a' && c <= 'f') || (c >= 'A' && c <= 'F') || (c >= '0' && c <= '9');\n}\nexports.isHex = isHex;\nfunction escapeIdentifier(s) {\n    var len = s.length;\n    var result = '';\n    var i = 0;\n    while (i < len) {\n        var chr = s.charAt(i);\n        if (exports.identSpecialChars[chr]) {\n            result += '\\\\' + chr;\n        }\n        else {\n            if (!(chr === '_' || chr === '-' ||\n                (chr >= 'A' && chr <= 'Z') ||\n                (chr >= 'a' && chr <= 'z') ||\n                (i !== 0 && chr >= '0' && chr <= '9'))) {\n                var charCode = chr.charCodeAt(0);\n                if ((charCode & 0xF800) === 0xD800) {\n                    var extraCharCode = s.charCodeAt(i++);\n                    if ((charCode & 0xFC00) !== 0xD800 || (extraCharCode & 0xFC00) !== 0xDC00) {\n                        throw Error('UCS-2(decode): illegal sequence');\n                    }\n                    charCode = ((charCode & 0x3FF) << 10) + (extraCharCode & 0x3FF) + 0x10000;\n                }\n                result += '\\\\' + charCode.toString(16) + ' ';\n            }\n            else {\n                result += chr;\n            }\n        }\n        i++;\n    }\n    return result;\n}\nexports.escapeIdentifier = escapeIdentifier;\nfunction escapeStr(s) {\n    var len = s.length;\n    var result = '';\n    var i = 0;\n    var replacement;\n    while (i < len) {\n        var chr = s.charAt(i);\n        if (chr === '\"') {\n            chr = '\\\\\"';\n        }\n        else if (chr === '\\\\') {\n            chr = '\\\\\\\\';\n        }\n        else if ((replacement = exports.strReplacementsRev[chr]) !== undefined) {\n            chr = replacement;\n        }\n        result += chr;\n        i++;\n    }\n    return \"\\\"\" + result + \"\\\"\";\n}\nexports.escapeStr = escapeStr;\nexports.identSpecialChars = {\n    '!': true,\n    '\"': true,\n    '#': true,\n    '$': true,\n    '%': true,\n    '&': true,\n    '\\'': true,\n    '(': true,\n    ')': true,\n    '*': true,\n    '+': true,\n    ',': true,\n    '.': true,\n    '/': true,\n    ';': true,\n    '<': true,\n    '=': true,\n    '>': true,\n    '?': true,\n    '@': true,\n    '[': true,\n    '\\\\': true,\n    ']': true,\n    '^': true,\n    '`': true,\n    '{': true,\n    '|': true,\n    '}': true,\n    '~': true\n};\nexports.strReplacementsRev = {\n    '\\n': '\\\\n',\n    '\\r': '\\\\r',\n    '\\t': '\\\\t',\n    '\\f': '\\\\f',\n    '\\v': '\\\\v'\n};\nexports.singleQuoteEscapeChars = {\n    n: '\\n',\n    r: '\\r',\n    t: '\\t',\n    f: '\\f',\n    '\\\\': '\\\\',\n    '\\'': '\\''\n};\nexports.doubleQuotesEscapeChars = {\n    n: '\\n',\n    r: '\\r',\n    t: '\\t',\n    f: '\\f',\n    '\\\\': '\\\\',\n    '\"': '\"'\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.compile = void 0;\nvar boolbase_1 = require(\"boolbase\");\n/**\n * Returns a function that checks if an elements index matches the given rule\n * highly optimized to return the fastest solution.\n *\n * @param parsed A tuple [a, b], as returned by `parse`.\n * @returns A highly optimized function that returns whether an index matches the nth-check.\n * @example\n * const check = nthCheck.compile([2, 3]);\n *\n * check(0); // `false`\n * check(1); // `false`\n * check(2); // `true`\n * check(3); // `false`\n * check(4); // `true`\n * check(5); // `false`\n * check(6); // `true`\n */\nfunction compile(parsed) {\n    var a = parsed[0];\n    // Subtract 1 from `b`, to convert from one- to zero-indexed.\n    var b = parsed[1] - 1;\n    /*\n     * When `b <= 0`, `a * n` won't be lead to any matches for `a < 0`.\n     * Besides, the specification states that no elements are\n     * matched when `a` and `b` are 0.\n     *\n     * `b < 0` here as we subtracted 1 from `b` above.\n     */\n    if (b < 0 && a <= 0)\n        return boolbase_1.falseFunc;\n    // When `a` is in the range -1..1, it matches any element (so only `b` is checked).\n    if (a === -1)\n        return function (index) { return index <= b; };\n    if (a === 0)\n        return function (index) { return index === b; };\n    // When `b <= 0` and `a === 1`, they match any element.\n    if (a === 1)\n        return b < 0 ? boolbase_1.trueFunc : function (index) { return index >= b; };\n    /*\n     * Otherwise, modulo can be used to check if there is a match.\n     *\n     * Modulo doesn't care about the sign, so let's use `a`s absolute value.\n     */\n    var absA = Math.abs(a);\n    // Get `b mod a`, + a if this is negative.\n    var bMod = ((b % absA) + absA) % absA;\n    return a > 1\n        ? function (index) { return index >= b && index % absA === bMod; }\n        : function (index) { return index <= b && index % absA === bMod; };\n}\nexports.compile = compile;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.compile = exports.parse = void 0;\nvar parse_1 = require(\"./parse\");\nObject.defineProperty(exports, \"parse\", { enumerable: true, get: function () { return parse_1.parse; } });\nvar compile_1 = require(\"./compile\");\nObject.defineProperty(exports, \"compile\", { enumerable: true, get: function () { return compile_1.compile; } });\n/**\n * Parses and compiles a formula to a highly optimized function.\n * Combination of `parse` and `compile`.\n *\n * If the formula doesn't match any elements,\n * it returns [`boolbase`](https://github.com/fb55/boolbase)'s `falseFunc`.\n * Otherwise, a function accepting an _index_ is returned, which returns\n * whether or not the passed _index_ matches the formula.\n *\n * Note: The nth-rule starts counting at `1`, the returned function at `0`.\n *\n * @param formula The formula to compile.\n * @example\n * const check = nthCheck(\"2n+3\");\n *\n * check(0); // `false`\n * check(1); // `false`\n * check(2); // `true`\n * check(3); // `false`\n * check(4); // `true`\n * check(5); // `false`\n * check(6); // `true`\n */\nfunction nthCheck(formula) {\n    return (0, compile_1.compile)((0, parse_1.parse)(formula));\n}\nexports.default = nthCheck;\n","\"use strict\";\n// Following http://www.w3.org/TR/css3-selectors/#nth-child-pseudo\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.parse = void 0;\n// Whitespace as per https://www.w3.org/TR/selectors-3/#lex is \" \\t\\r\\n\\f\"\nvar whitespace = new Set([9, 10, 12, 13, 32]);\nvar ZERO = \"0\".charCodeAt(0);\nvar NINE = \"9\".charCodeAt(0);\n/**\n * Parses an expression.\n *\n * @throws An `Error` if parsing fails.\n * @returns An array containing the integer step size and the integer offset of the nth rule.\n * @example nthCheck.parse(\"2n+3\"); // returns [2, 3]\n */\nfunction parse(formula) {\n    formula = formula.trim().toLowerCase();\n    if (formula === \"even\") {\n        return [2, 0];\n    }\n    else if (formula === \"odd\") {\n        return [2, 1];\n    }\n    // Parse [ ['-'|'+']? INTEGER? {N} [ S* ['-'|'+'] S* INTEGER ]?\n    var idx = 0;\n    var a = 0;\n    var sign = readSign();\n    var number = readNumber();\n    if (idx < formula.length && formula.charAt(idx) === \"n\") {\n        idx++;\n        a = sign * (number !== null && number !== void 0 ? number : 1);\n        skipWhitespace();\n        if (idx < formula.length) {\n            sign = readSign();\n            skipWhitespace();\n            number = readNumber();\n        }\n        else {\n            sign = number = 0;\n        }\n    }\n    // Throw if there is anything else\n    if (number === null || idx < formula.length) {\n        throw new Error(\"n-th rule couldn't be parsed ('\" + formula + \"')\");\n    }\n    return [a, sign * number];\n    function readSign() {\n        if (formula.charAt(idx) === \"-\") {\n            idx++;\n            return -1;\n        }\n        if (formula.charAt(idx) === \"+\") {\n            idx++;\n        }\n        return 1;\n    }\n    function readNumber() {\n        var start = idx;\n        var value = 0;\n        while (idx < formula.length &&\n            formula.charCodeAt(idx) >= ZERO &&\n            formula.charCodeAt(idx) <= NINE) {\n            value = value * 10 + (formula.charCodeAt(idx) - ZERO);\n            idx++;\n        }\n        // Return `null` if we didn't read anything.\n        return idx === start ? null : value;\n    }\n    function skipWhitespace() {\n        while (idx < formula.length &&\n            whitespace.has(formula.charCodeAt(idx))) {\n            idx++;\n        }\n    }\n}\nexports.parse = parse;\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = require('./lib/ReactPropTypesSecret');\n\nfunction emptyFunction() {}\nfunction emptyFunctionWithReset() {}\nemptyFunctionWithReset.resetWarningCache = emptyFunction;\n\nmodule.exports = function() {\n  function shim(props, propName, componentName, location, propFullName, secret) {\n    if (secret === ReactPropTypesSecret) {\n      // It is still safe when called from React.\n      return;\n    }\n    var err = new Error(\n      'Calling PropTypes validators directly is not supported by the `prop-types` package. ' +\n      'Use PropTypes.checkPropTypes() to call them. ' +\n      'Read more at http://fb.me/use-check-prop-types'\n    );\n    err.name = 'Invariant Violation';\n    throw err;\n  };\n  shim.isRequired = shim;\n  function getShim() {\n    return shim;\n  };\n  // Important!\n  // Keep this list in sync with production version in `./factoryWithTypeCheckers.js`.\n  var ReactPropTypes = {\n    array: shim,\n    bigint: shim,\n    bool: shim,\n    func: shim,\n    number: shim,\n    object: shim,\n    string: shim,\n    symbol: shim,\n\n    any: shim,\n    arrayOf: getShim,\n    element: shim,\n    elementType: shim,\n    instanceOf: getShim,\n    node: shim,\n    objectOf: getShim,\n    oneOf: getShim,\n    oneOfType: getShim,\n    shape: getShim,\n    exact: getShim,\n\n    checkPropTypes: emptyFunctionWithReset,\n    resetWarningCache: emptyFunction\n  };\n\n  ReactPropTypes.PropTypes = ReactPropTypes;\n\n  return ReactPropTypes;\n};\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nif (process.env.NODE_ENV !== 'production') {\n  var ReactIs = require('react-is');\n\n  // By explicitly using `prop-types` you are opting into new development behavior.\n  // http://fb.me/prop-types-in-prod\n  var throwOnDirectAccess = true;\n  module.exports = require('./factoryWithTypeCheckers')(ReactIs.isElement, throwOnDirectAccess);\n} else {\n  // By explicitly using `prop-types` you are opting into new production behavior.\n  // http://fb.me/prop-types-in-prod\n  module.exports = require('./factoryWithThrowingShims')();\n}\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED';\n\nmodule.exports = ReactPropTypesSecret;\n","/**\n * @license React\n * react-is.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';var b=Symbol.for(\"react.element\"),c=Symbol.for(\"react.portal\"),d=Symbol.for(\"react.fragment\"),e=Symbol.for(\"react.strict_mode\"),f=Symbol.for(\"react.profiler\"),g=Symbol.for(\"react.provider\"),h=Symbol.for(\"react.context\"),k=Symbol.for(\"react.server_context\"),l=Symbol.for(\"react.forward_ref\"),m=Symbol.for(\"react.suspense\"),n=Symbol.for(\"react.suspense_list\"),p=Symbol.for(\"react.memo\"),q=Symbol.for(\"react.lazy\"),t=Symbol.for(\"react.offscreen\"),u;u=Symbol.for(\"react.module.reference\");\nfunction v(a){if(\"object\"===typeof a&&null!==a){var r=a.$$typeof;switch(r){case b:switch(a=a.type,a){case d:case f:case e:case m:case n:return a;default:switch(a=a&&a.$$typeof,a){case k:case h:case l:case q:case p:case g:return a;default:return r}}case c:return r}}}exports.ContextConsumer=h;exports.ContextProvider=g;exports.Element=b;exports.ForwardRef=l;exports.Fragment=d;exports.Lazy=q;exports.Memo=p;exports.Portal=c;exports.Profiler=f;exports.StrictMode=e;exports.Suspense=m;\nexports.SuspenseList=n;exports.isAsyncMode=function(){return!1};exports.isConcurrentMode=function(){return!1};exports.isContextConsumer=function(a){return v(a)===h};exports.isContextProvider=function(a){return v(a)===g};exports.isElement=function(a){return\"object\"===typeof a&&null!==a&&a.$$typeof===b};exports.isForwardRef=function(a){return v(a)===l};exports.isFragment=function(a){return v(a)===d};exports.isLazy=function(a){return v(a)===q};exports.isMemo=function(a){return v(a)===p};\nexports.isPortal=function(a){return v(a)===c};exports.isProfiler=function(a){return v(a)===f};exports.isStrictMode=function(a){return v(a)===e};exports.isSuspense=function(a){return v(a)===m};exports.isSuspenseList=function(a){return v(a)===n};\nexports.isValidElementType=function(a){return\"string\"===typeof a||\"function\"===typeof a||a===d||a===f||a===e||a===m||a===n||a===t||\"object\"===typeof a&&null!==a&&(a.$$typeof===q||a.$$typeof===p||a.$$typeof===g||a.$$typeof===h||a.$$typeof===l||a.$$typeof===u||void 0!==a.getModuleId)?!0:!1};exports.typeOf=v;\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-is.production.min.js');\n} else {\n  module.exports = require('./cjs/react-is.development.js');\n}\n","import {visit} from 'unist-util-visit'\n\n/**\n * @typedef {import('unist').Node} Node\n * @typedef {import('hast').Root} Root\n * @typedef {import('hast').Element} Element\n *\n * @callback AllowElement\n * @param {Element} element\n * @param {number} index\n * @param {Element|Root} parent\n * @returns {boolean|undefined}\n *\n * @typedef Options\n * @property {Array<string>} [allowedElements]\n * @property {Array<string>} [disallowedElements=[]]\n * @property {AllowElement} [allowElement]\n * @property {boolean} [unwrapDisallowed=false]\n */\n\n/**\n * @type {import('unified').Plugin<[Options], Root>}\n */\nexport default function rehypeFilter(options) {\n  if (options.allowedElements && options.disallowedElements) {\n    throw new TypeError(\n      'Only one of `allowedElements` and `disallowedElements` should be defined'\n    )\n  }\n\n  if (\n    options.allowedElements ||\n    options.disallowedElements ||\n    options.allowElement\n  ) {\n    return (tree) => {\n      visit(tree, 'element', (node, index, parent_) => {\n        const parent = /** @type {Element|Root} */ (parent_)\n        /** @type {boolean|undefined} */\n        let remove\n\n        if (options.allowedElements) {\n          remove = !options.allowedElements.includes(node.tagName)\n        } else if (options.disallowedElements) {\n          remove = options.disallowedElements.includes(node.tagName)\n        }\n\n        if (!remove && options.allowElement && typeof index === 'number') {\n          remove = !options.allowElement(node, index, parent)\n        }\n\n        if (remove && typeof index === 'number') {\n          if (options.unwrapDisallowed && node.children) {\n            parent.children.splice(index, 1, ...node.children)\n          } else {\n            parent.children.splice(index, 1)\n          }\n\n          return index\n        }\n\n        return undefined\n      })\n    }\n  }\n}\n","const protocols = ['http', 'https', 'mailto', 'tel']\n\n/**\n * @param {string} uri\n * @returns {string}\n */\nexport function uriTransformer(uri) {\n  const url = (uri || '').trim()\n  const first = url.charAt(0)\n\n  if (first === '#' || first === '/') {\n    return url\n  }\n\n  const colon = url.indexOf(':')\n  if (colon === -1) {\n    return url\n  }\n\n  let index = -1\n\n  while (++index < protocols.length) {\n    const protocol = protocols[index]\n\n    if (\n      colon === protocol.length &&\n      url.slice(0, protocol.length).toLowerCase() === protocol\n    ) {\n      return url\n    }\n  }\n\n  index = url.indexOf('?')\n  if (index !== -1 && colon > index) {\n    return url\n  }\n\n  index = url.indexOf('#')\n  if (index !== -1 && colon > index) {\n    return url\n  }\n\n  // eslint-disable-next-line no-script-url\n  return 'javascript:void(0)'\n}\n","/**\n * @template T\n * @typedef {import('react').ComponentType<T>} ComponentType<T>\n */\n\n/**\n * @template T\n * @typedef {import('react').ComponentPropsWithoutRef<T>} ComponentPropsWithoutRef<T>\n */\n\n/**\n * @typedef {import('react').ReactNode} ReactNode\n * @typedef {import('unist').Position} Position\n * @typedef {import('hast').Element} Element\n * @typedef {import('hast').ElementContent} ElementContent\n * @typedef {import('hast').Root} Root\n * @typedef {import('hast').Text} Text\n * @typedef {import('hast').Comment} Comment\n * @typedef {import('hast').DocType} Doctype\n * @typedef {import('property-information').Info} Info\n * @typedef {import('property-information').Schema} Schema\n * @typedef {import('./complex-types').ReactMarkdownProps} ReactMarkdownProps\n *\n * @typedef Raw\n * @property {'raw'} type\n * @property {string} value\n *\n * @typedef Context\n * @property {Options} options\n * @property {Schema} schema\n * @property {number} listDepth\n *\n * @callback TransformLink\n * @param {string} href\n * @param {Array<ElementContent>} children\n * @param {string?} title\n * @returns {string}\n *\n * @callback TransformImage\n * @param {string} src\n * @param {string} alt\n * @param {string?} title\n * @returns {string}\n *\n * @typedef {import('react').HTMLAttributeAnchorTarget} TransformLinkTargetType\n *\n * @callback TransformLinkTarget\n * @param {string} href\n * @param {Array<ElementContent>} children\n * @param {string?} title\n * @returns {TransformLinkTargetType|undefined}\n *\n * @typedef {keyof JSX.IntrinsicElements} ReactMarkdownNames\n *\n * To do: is `data-sourcepos` typeable?\n *\n * @typedef {ComponentPropsWithoutRef<'code'> & ReactMarkdownProps & {inline?: boolean}} CodeProps\n * @typedef {ComponentPropsWithoutRef<'h1'> & ReactMarkdownProps & {level: number}} HeadingProps\n * @typedef {ComponentPropsWithoutRef<'li'> & ReactMarkdownProps & {checked: boolean|null, index: number, ordered: boolean}} LiProps\n * @typedef {ComponentPropsWithoutRef<'ol'> & ReactMarkdownProps & {depth: number, ordered: true}} OrderedListProps\n * @typedef {ComponentPropsWithoutRef<'table'> & ReactMarkdownProps & {style?: Record<string, unknown>, isHeader: boolean}} TableCellProps\n * @typedef {ComponentPropsWithoutRef<'tr'> & ReactMarkdownProps & {isHeader: boolean}} TableRowProps\n * @typedef {ComponentPropsWithoutRef<'ul'> & ReactMarkdownProps & {depth: number, ordered: false}} UnorderedListProps\n *\n * @typedef {ComponentType<CodeProps>} CodeComponent\n * @typedef {ComponentType<HeadingProps>} HeadingComponent\n * @typedef {ComponentType<LiProps>} LiComponent\n * @typedef {ComponentType<OrderedListProps>} OrderedListComponent\n * @typedef {ComponentType<TableCellProps>} TableCellComponent\n * @typedef {ComponentType<TableRowProps>} TableRowComponent\n * @typedef {ComponentType<UnorderedListProps>} UnorderedListComponent\n *\n * @typedef SpecialComponents\n * @property {CodeComponent|ReactMarkdownNames} code\n * @property {HeadingComponent|ReactMarkdownNames} h1\n * @property {HeadingComponent|ReactMarkdownNames} h2\n * @property {HeadingComponent|ReactMarkdownNames} h3\n * @property {HeadingComponent|ReactMarkdownNames} h4\n * @property {HeadingComponent|ReactMarkdownNames} h5\n * @property {HeadingComponent|ReactMarkdownNames} h6\n * @property {LiComponent|ReactMarkdownNames} li\n * @property {OrderedListComponent|ReactMarkdownNames} ol\n * @property {TableCellComponent|ReactMarkdownNames} td\n * @property {TableCellComponent|ReactMarkdownNames} th\n * @property {TableRowComponent|ReactMarkdownNames} tr\n * @property {UnorderedListComponent|ReactMarkdownNames} ul\n *\n * @typedef {Partial<Omit<import('./complex-types').NormalComponents, keyof SpecialComponents> & SpecialComponents>} Components\n *\n * @typedef Options\n * @property {boolean} [sourcePos=false]\n * @property {boolean} [rawSourcePos=false]\n * @property {boolean} [skipHtml=false]\n * @property {boolean} [includeElementIndex=false]\n * @property {null|false|TransformLink} [transformLinkUri]\n * @property {TransformImage} [transformImageUri]\n * @property {TransformLinkTargetType|TransformLinkTarget} [linkTarget]\n * @property {Components} [components]\n */\n\nimport React from 'react'\nimport ReactIs from 'react-is'\nimport {whitespace} from 'hast-util-whitespace'\nimport {svg, find, hastToReact} from 'property-information'\nimport {stringify as spaces} from 'space-separated-tokens'\nimport {stringify as commas} from 'comma-separated-tokens'\nimport style from 'style-to-object'\n\nconst own = {}.hasOwnProperty\n\n// The table-related elements that must not contain whitespace text according\n// to React.\nconst tableElements = new Set(['table', 'thead', 'tbody', 'tfoot', 'tr'])\n\n/**\n * @param {Context} context\n * @param {Element|Root} node\n */\nexport function childrenToReact(context, node) {\n  /** @type {Array<ReactNode>} */\n  const children = []\n  let childIndex = -1\n  /** @type {Comment|Doctype|Element|Raw|Text} */\n  let child\n\n  while (++childIndex < node.children.length) {\n    child = node.children[childIndex]\n\n    if (child.type === 'element') {\n      children.push(toReact(context, child, childIndex, node))\n    } else if (child.type === 'text') {\n      // Currently, a warning is triggered by react for *any* white space in\n      // tables.\n      // So we drop it.\n      // See: <https://github.com/facebook/react/pull/7081>.\n      // See: <https://github.com/facebook/react/pull/7515>.\n      // See: <https://github.com/remarkjs/remark-react/issues/64>.\n      // See: <https://github.com/remarkjs/react-markdown/issues/576>.\n      if (\n        node.type !== 'element' ||\n        !tableElements.has(node.tagName) ||\n        !whitespace(child)\n      ) {\n        children.push(child.value)\n      }\n    } else if (child.type === 'raw' && !context.options.skipHtml) {\n      // Default behavior is to show (encoded) HTML.\n      children.push(child.value)\n    }\n  }\n\n  return children\n}\n\n/**\n * @param {Context} context\n * @param {Element} node\n * @param {number} index\n * @param {Element|Root} parent\n */\nfunction toReact(context, node, index, parent) {\n  const options = context.options\n  const parentSchema = context.schema\n  /** @type {ReactMarkdownNames} */\n  // @ts-expect-error assume a known HTML/SVG element.\n  const name = node.tagName\n  /** @type {Record<string, unknown>} */\n  const properties = {}\n  let schema = parentSchema\n  /** @type {string} */\n  let property\n\n  if (parentSchema.space === 'html' && name === 'svg') {\n    schema = svg\n    context.schema = schema\n  }\n\n  if (node.properties) {\n    for (property in node.properties) {\n      if (own.call(node.properties, property)) {\n        addProperty(properties, property, node.properties[property], context)\n      }\n    }\n  }\n\n  if (name === 'ol' || name === 'ul') {\n    context.listDepth++\n  }\n\n  const children = childrenToReact(context, node)\n\n  if (name === 'ol' || name === 'ul') {\n    context.listDepth--\n  }\n\n  // Restore parent schema.\n  context.schema = parentSchema\n\n  // Nodes created by plugins do not have positional info, in which case we use\n  // an object that matches the position interface.\n  const position = node.position || {\n    start: {line: null, column: null, offset: null},\n    end: {line: null, column: null, offset: null}\n  }\n  const component =\n    options.components && own.call(options.components, name)\n      ? options.components[name]\n      : name\n  const basic = typeof component === 'string' || component === React.Fragment\n\n  if (!ReactIs.isValidElementType(component)) {\n    throw new TypeError(\n      `Component for name \\`${name}\\` not defined or is not renderable`\n    )\n  }\n\n  properties.key = [\n    name,\n    position.start.line,\n    position.start.column,\n    index\n  ].join('-')\n\n  if (name === 'a' && options.linkTarget) {\n    properties.target =\n      typeof options.linkTarget === 'function'\n        ? options.linkTarget(\n            String(properties.href || ''),\n            node.children,\n            typeof properties.title === 'string' ? properties.title : null\n          )\n        : options.linkTarget\n  }\n\n  if (name === 'a' && options.transformLinkUri) {\n    properties.href = options.transformLinkUri(\n      String(properties.href || ''),\n      node.children,\n      typeof properties.title === 'string' ? properties.title : null\n    )\n  }\n\n  if (\n    !basic &&\n    name === 'code' &&\n    parent.type === 'element' &&\n    parent.tagName !== 'pre'\n  ) {\n    properties.inline = true\n  }\n\n  if (\n    !basic &&\n    (name === 'h1' ||\n      name === 'h2' ||\n      name === 'h3' ||\n      name === 'h4' ||\n      name === 'h5' ||\n      name === 'h6')\n  ) {\n    properties.level = Number.parseInt(name.charAt(1), 10)\n  }\n\n  if (name === 'img' && options.transformImageUri) {\n    properties.src = options.transformImageUri(\n      String(properties.src || ''),\n      String(properties.alt || ''),\n      typeof properties.title === 'string' ? properties.title : null\n    )\n  }\n\n  if (!basic && name === 'li' && parent.type === 'element') {\n    const input = getInputElement(node)\n    properties.checked =\n      input && input.properties ? Boolean(input.properties.checked) : null\n    properties.index = getElementsBeforeCount(parent, node)\n    properties.ordered = parent.tagName === 'ol'\n  }\n\n  if (!basic && (name === 'ol' || name === 'ul')) {\n    properties.ordered = name === 'ol'\n    properties.depth = context.listDepth\n  }\n\n  if (name === 'td' || name === 'th') {\n    if (properties.align) {\n      if (!properties.style) properties.style = {}\n      // @ts-expect-error assume `style` is an object\n      properties.style.textAlign = properties.align\n      delete properties.align\n    }\n\n    if (!basic) {\n      properties.isHeader = name === 'th'\n    }\n  }\n\n  if (!basic && name === 'tr' && parent.type === 'element') {\n    properties.isHeader = Boolean(parent.tagName === 'thead')\n  }\n\n  // If `sourcePos` is given, pass source information (line/column info from markdown source).\n  if (options.sourcePos) {\n    properties['data-sourcepos'] = flattenPosition(position)\n  }\n\n  if (!basic && options.rawSourcePos) {\n    properties.sourcePosition = node.position\n  }\n\n  // If `includeElementIndex` is given, pass node index info to components.\n  if (!basic && options.includeElementIndex) {\n    properties.index = getElementsBeforeCount(parent, node)\n    properties.siblingCount = getElementsBeforeCount(parent)\n  }\n\n  if (!basic) {\n    properties.node = node\n  }\n\n  // Ensure no React warnings are emitted for void elements w/ children.\n  return children.length > 0\n    ? React.createElement(component, properties, children)\n    : React.createElement(component, properties)\n}\n\n/**\n * @param {Element|Root} node\n * @returns {Element?}\n */\nfunction getInputElement(node) {\n  let index = -1\n\n  while (++index < node.children.length) {\n    const child = node.children[index]\n\n    if (child.type === 'element' && child.tagName === 'input') {\n      return child\n    }\n  }\n\n  return null\n}\n\n/**\n * @param {Element|Root} parent\n * @param {Element} [node]\n * @returns {number}\n */\nfunction getElementsBeforeCount(parent, node) {\n  let index = -1\n  let count = 0\n\n  while (++index < parent.children.length) {\n    if (parent.children[index] === node) break\n    if (parent.children[index].type === 'element') count++\n  }\n\n  return count\n}\n\n/**\n * @param {Record<string, unknown>} props\n * @param {string} prop\n * @param {unknown} value\n * @param {Context} ctx\n */\nfunction addProperty(props, prop, value, ctx) {\n  const info = find(ctx.schema, prop)\n  let result = value\n\n  // Ignore nullish and `NaN` values.\n  // eslint-disable-next-line no-self-compare\n  if (result === null || result === undefined || result !== result) {\n    return\n  }\n\n  // Accept `array`.\n  // Most props are space-separated.\n  if (Array.isArray(result)) {\n    result = info.commaSeparated ? commas(result) : spaces(result)\n  }\n\n  if (info.property === 'style' && typeof result === 'string') {\n    result = parseStyle(result)\n  }\n\n  if (info.space && info.property) {\n    props[\n      own.call(hastToReact, info.property)\n        ? hastToReact[info.property]\n        : info.property\n    ] = result\n  } else if (info.attribute) {\n    props[info.attribute] = result\n  }\n}\n\n/**\n * @param {string} value\n * @returns {Record<string, string>}\n */\nfunction parseStyle(value) {\n  /** @type {Record<string, string>} */\n  const result = {}\n\n  try {\n    style(value, iterator)\n  } catch {\n    // Silent.\n  }\n\n  return result\n\n  /**\n   * @param {string} name\n   * @param {string} v\n   */\n  function iterator(name, v) {\n    const k = name.slice(0, 4) === '-ms-' ? `ms-${name.slice(4)}` : name\n    result[k.replace(/-([a-z])/g, styleReplacer)] = v\n  }\n}\n\n/**\n * @param {unknown} _\n * @param {string} $1\n */\nfunction styleReplacer(_, $1) {\n  return $1.toUpperCase()\n}\n\n/**\n * @param {Position|{start: {line: null, column: null, offset: null}, end: {line: null, column: null, offset: null}}} pos\n * @returns {string}\n */\nfunction flattenPosition(pos) {\n  return [\n    pos.start.line,\n    ':',\n    pos.start.column,\n    '-',\n    pos.end.line,\n    ':',\n    pos.end.column\n  ]\n    .map((d) => String(d))\n    .join('')\n}\n","/**\n * @typedef {import('react').ReactNode} ReactNode\n * @typedef {import('react').ReactElement<{}>} ReactElement\n * @typedef {import('unified').PluggableList} PluggableList\n * @typedef {import('hast').Root} Root\n * @typedef {import('./rehype-filter.js').Options} FilterOptions\n * @typedef {import('./ast-to-react.js').Options} TransformOptions\n *\n * @typedef CoreOptions\n * @property {string} children\n *\n * @typedef PluginOptions\n * @property {PluggableList} [remarkPlugins=[]]\n * @property {PluggableList} [rehypePlugins=[]]\n * @property {import('remark-rehype').Options | undefined} [remarkRehypeOptions={}]\n *\n * @typedef LayoutOptions\n * @property {string} [className]\n *\n * @typedef {CoreOptions & PluginOptions & LayoutOptions & FilterOptions & TransformOptions} ReactMarkdownOptions\n *\n * @typedef Deprecation\n * @property {string} id\n * @property {string} [to]\n */\n\nimport React from 'react'\nimport {VFile} from 'vfile'\nimport {unified} from 'unified'\nimport remarkParse from 'remark-parse'\nimport remarkRehype from 'remark-rehype'\nimport PropTypes from 'prop-types'\nimport {html} from 'property-information'\nimport rehypeFilter from './rehype-filter.js'\nimport {uriTransformer} from './uri-transformer.js'\nimport {childrenToReact} from './ast-to-react.js'\n\nconst own = {}.hasOwnProperty\nconst changelog =\n  'https://github.com/remarkjs/react-markdown/blob/main/changelog.md'\n\n/** @type {Record<string, Deprecation>} */\nconst deprecated = {\n  plugins: {to: 'plugins', id: 'change-plugins-to-remarkplugins'},\n  renderers: {to: 'components', id: 'change-renderers-to-components'},\n  astPlugins: {id: 'remove-buggy-html-in-markdown-parser'},\n  allowDangerousHtml: {id: 'remove-buggy-html-in-markdown-parser'},\n  escapeHtml: {id: 'remove-buggy-html-in-markdown-parser'},\n  source: {to: 'children', id: 'change-source-to-children'},\n  allowNode: {\n    to: 'allowElement',\n    id: 'replace-allownode-allowedtypes-and-disallowedtypes'\n  },\n  allowedTypes: {\n    to: 'allowedElements',\n    id: 'replace-allownode-allowedtypes-and-disallowedtypes'\n  },\n  disallowedTypes: {\n    to: 'disallowedElements',\n    id: 'replace-allownode-allowedtypes-and-disallowedtypes'\n  },\n  includeNodeIndex: {\n    to: 'includeElementIndex',\n    id: 'change-includenodeindex-to-includeelementindex'\n  }\n}\n\n/**\n * React component to render markdown.\n *\n * @param {ReactMarkdownOptions} options\n * @returns {ReactElement}\n */\nexport function ReactMarkdown(options) {\n  for (const key in deprecated) {\n    if (own.call(deprecated, key) && own.call(options, key)) {\n      const deprecation = deprecated[key]\n      console.warn(\n        `[react-markdown] Warning: please ${\n          deprecation.to ? `use \\`${deprecation.to}\\` instead of` : 'remove'\n        } \\`${key}\\` (see <${changelog}#${deprecation.id}> for more info)`\n      )\n      delete deprecated[key]\n    }\n  }\n\n  const processor = unified()\n    .use(remarkParse)\n    .use(options.remarkPlugins || [])\n    .use(remarkRehype, {\n      ...options.remarkRehypeOptions,\n      allowDangerousHtml: true\n    })\n    .use(options.rehypePlugins || [])\n    .use(rehypeFilter, options)\n\n  const file = new VFile()\n\n  if (typeof options.children === 'string') {\n    file.value = options.children\n  } else if (options.children !== undefined && options.children !== null) {\n    console.warn(\n      `[react-markdown] Warning: please pass a string as \\`children\\` (not: \\`${options.children}\\`)`\n    )\n  }\n\n  const hastNode = processor.runSync(processor.parse(file), file)\n\n  if (hastNode.type !== 'root') {\n    throw new TypeError('Expected a `root` node')\n  }\n\n  /** @type {ReactElement} */\n  let result = React.createElement(\n    React.Fragment,\n    {},\n    childrenToReact({options, schema: html, listDepth: 0}, hastNode)\n  )\n\n  if (options.className) {\n    result = React.createElement('div', {className: options.className}, result)\n  }\n\n  return result\n}\n\nReactMarkdown.defaultProps = {transformLinkUri: uriTransformer}\n\nReactMarkdown.propTypes = {\n  // Core options:\n  children: PropTypes.string,\n  // Layout options:\n  className: PropTypes.string,\n  // Filter options:\n  allowElement: PropTypes.func,\n  allowedElements: PropTypes.arrayOf(PropTypes.string),\n  disallowedElements: PropTypes.arrayOf(PropTypes.string),\n  unwrapDisallowed: PropTypes.bool,\n  // Plugin options:\n  remarkPlugins: PropTypes.arrayOf(\n    PropTypes.oneOfType([\n      PropTypes.object,\n      PropTypes.func,\n      PropTypes.arrayOf(\n        PropTypes.oneOfType([\n          PropTypes.bool,\n          PropTypes.string,\n          PropTypes.object,\n          PropTypes.func,\n          PropTypes.arrayOf(\n            // prettier-ignore\n            // type-coverage:ignore-next-line\n            PropTypes.any\n          )\n        ])\n      )\n    ])\n  ),\n  rehypePlugins: PropTypes.arrayOf(\n    PropTypes.oneOfType([\n      PropTypes.object,\n      PropTypes.func,\n      PropTypes.arrayOf(\n        PropTypes.oneOfType([\n          PropTypes.bool,\n          PropTypes.string,\n          PropTypes.object,\n          PropTypes.func,\n          PropTypes.arrayOf(\n            // prettier-ignore\n            // type-coverage:ignore-next-line\n            PropTypes.any\n          )\n        ])\n      )\n    ])\n  ),\n  // Transform options:\n  sourcePos: PropTypes.bool,\n  rawSourcePos: PropTypes.bool,\n  skipHtml: PropTypes.bool,\n  includeElementIndex: PropTypes.bool,\n  transformLinkUri: PropTypes.oneOfType([PropTypes.func, PropTypes.bool]),\n  linkTarget: PropTypes.oneOfType([PropTypes.func, PropTypes.string]),\n  transformImageUri: PropTypes.func,\n  components: PropTypes.object\n}\n","import { Element, Comment, Literal, ElementContent, RootContent, Properties } from 'hast';\nimport { RehypeAttrsOptions } from './';\n\nexport const getURLParameters = (url: string): Record<string, string | number | boolean> =>\n(url.match(/([^?=&]+)(=([^&]*))/g) || []).reduce(\n  (a: Record<string, string | number>, v: string) => (\n    (a[v.slice(0, v.indexOf('='))] = v.slice(v.indexOf('=') + 1)), a\n  ),\n  {},\n);\n\nexport const prevChild = (data: Literal[] = [], index: number): Comment | undefined => {\n  let i = index;\n  while (i > -1) {\n    i--;\n    if (!data[i]) return\n    if ((data[i] && data[i].value && (data[i].value as string).replace(/(\\n|\\s)/g, '') !== '') || data[i].type !== 'text') {\n      if (!/^rehype:/.test(data[i].value as string) || (data[i].type as string) !== 'comment') return;\n      return data[i] as unknown as Comment;\n    }\n  }\n  return;\n}\n\nexport const nextChild = (data: RootContent[] | ElementContent[] = [], index: number, tagName?: string): ElementContent | undefined => {\n  let i = index;\n  while (i < data.length) {\n    i++;\n    if (tagName) {\n      const element = data[i] as Literal & Element;\n      if (element && element.value && (element.value as string).replace(/(\\n|\\s)/g, '') !== '' || data[i] && (data[i].type as string) === 'element') {\n        return element.tagName === tagName ? element : undefined\n      }\n    } else {\n      const element = data[i] as ElementContent & Literal;\n      if (!element || (element.type !== 'text' && (element.type as string) !== 'comment') || (element.type === 'text' && (element.value as string).replace(/(\\n|\\s)/g, '') !== '')) return;\n      if ((element.type as string) === 'comment') {\n        if (!/^rehype:/.test(element.value as string)) return;\n        const nextNode = nextChild(data, i, 'pre')\n        if (nextNode) return;\n        return element;\n      }\n    }\n  }\n  return\n}\n\n/**\n * 获取代码注视的位置\n * @param data 数据\n * @param index 当前数据所在的位置\n * @returns 返回 当前参数数据 Object，`{}`\n */\nexport const getCommentObject = ({ value = '' }: Comment): Properties => {\n  const param = getURLParameters(value.replace(/^rehype:/, ''));\n  Object.keys(param).forEach((keyName: string) => {\n    if (param[keyName] === 'true') {\n      param[keyName] = true;\n    }\n    if (param[keyName] === 'false') {\n      param[keyName] = false;\n    }\n    if (typeof param[keyName] === 'string' && !/^0/.test(param[keyName] as string) && !isNaN(+param[keyName])) {\n      param[keyName] = +param[keyName];\n    }\n  })\n  return param;\n}\n\nexport type DataConfig = {\n  'data-config': Properties\n}\n\nexport const propertiesHandle = (defaultAttrs?: Properties | null, attrs?: Properties, type?: RehypeAttrsOptions['properties']): Properties | DataConfig => {\n  if (type === 'string') {\n    return { ...defaultAttrs, 'data-config': JSON.stringify({ ...attrs, rehyp: true })}\n  } else if (type === 'attr') {\n    return { ...defaultAttrs, ...attrs}\n  }\n  return { ...defaultAttrs, 'data-config': { ...attrs, rehyp: true }}\n}","import { Plugin } from 'unified';\nimport { Root, Element, Comment, Properties, Literal } from 'hast';\nimport { visit } from 'unist-util-visit';\nimport { propertiesHandle, nextChild, prevChild, getCommentObject } from './utils';\n\nexport type RehypeAttrsOptions = {\n  /**\n   * ## `data`\n   * \n   * ```markdown\n   * text\n   * <!--rehype:title=Rehype Attrs&abc=2-->\n   * ```\n   * \n   * ⇣⇣⇣⇣⇣⇣\n   * \n   * ```html\n   * <p data-config=\"data-config='[object Object]'\">text</p>\n   * ```\n   * \n   * ## `string`\n   * \n   * ```markdown\n   * text\n   * <!--rehype:title=Rehype Attrs-->\n   * ```\n   * \n   * ⇣⇣⇣⇣⇣⇣\n   * \n   * ```html\n   * <p data-config=\"{&#x22;title&#x22;:&#x22;Rehype Attrs&#x22;,&#x22;rehyp&#x22;:true}\">text</p>\n   * ```\n   * \n   * ## attr\n   * \n   * ```markdown\n   * text\n   * <!--rehype:title=Rehype Attrs-->\n   * ```\n   * ⇣⇣⇣⇣⇣⇣\n   * ```html\n   * <p title=\"Rehype Attrs\">text</p>\n   * ```\n   */\n  properties: 'data' | 'string' | 'attr';\n}\n\nconst defaultOptions: RehypeAttrsOptions = {\n  properties: 'data',\n}\n\nconst rehypeAttrs: Plugin<[RehypeAttrsOptions?], Root> = (options) => {\n  const opts = { ...defaultOptions, ...options }\n  return (tree) => {\n    visit(tree, 'element', (node, index, parent) => {\n      if (node.tagName === 'pre' && node && Array.isArray(node.children) && parent && Array.isArray(parent.children) && parent.children.length > 1) {\n        const firstChild = node.children[0] as Element;\n        if (firstChild && firstChild.tagName === 'code' && typeof index === 'number') {\n          const child = prevChild(parent.children as Literal[], index);\n          if (child) {\n            const attr = getCommentObject(child);\n            if (Object.keys(attr).length > 0) {\n              node.properties = { ...node.properties, ...{ 'data-type': 'rehyp' } }\n              firstChild.properties = propertiesHandle(firstChild.properties, attr, opts.properties) as Properties\n            }\n          }\n        }\n      }\n\n      if (/^(em|strong|b|a|i|p|pre|kbd|blockquote|h(1|2|3|4|5|6)|code|table|img|del|ul|ol)$/.test(node.tagName) && parent && Array.isArray(parent.children) && typeof index === 'number') {\n        const child = nextChild(parent.children, index)\n        if (child) {\n          const attr = getCommentObject(child as Comment)\n          if (Object.keys(attr).length > 0) {\n            node.properties = propertiesHandle(node.properties, attr, opts.properties) as Properties\n          }\n        }\n      }\n    });\n  }\n}\n\n\nexport default rehypeAttrs\n","/**\n * @typedef {import('hast').Element} Element\n * @typedef {import('hast').Root} Root\n * @typedef Options options\n *   Configuration.\n * @property {boolean} [showLineNumbers]\n *   Set `showLineNumbers` to `true` to always display line number\n * @property {boolean} [ignoreMissing]\n *   Set `ignoreMissing` to `true` to ignore unsupported languages and line highlighting when no language is specified\n */\n\nimport { visit } from 'unist-util-visit'\nimport { toString } from 'hast-util-to-string'\nimport { filter } from 'unist-util-filter'\nimport rangeParser from 'parse-numeric-range'\n\n/**\n * @param {Element} node\n * @return {string|null}\n */\nconst getLanguage = (node) => {\n  const className = node.properties.className\n  //@ts-ignore\n  for (const classListItem of className) {\n    if (classListItem.slice(0, 9) === 'language-') {\n      return classListItem.slice(9).toLowerCase()\n    }\n  }\n  return null\n}\n\n/**\n * Create a closure that determines if we have to highlight the given index\n *\n * @param {string} meta\n * @return { (index:number) => boolean }\n */\nconst calculateLinesToHighlight = (meta) => {\n  const RE = /{([\\d,-]+)}/\n  // Remove space between {} e.g. {1, 3}\n  const parsedMeta = meta\n    .split(',')\n    .map((str) => str.trim())\n    .join()\n  if (RE.test(parsedMeta)) {\n    const strlineNumbers = RE.exec(parsedMeta)[1]\n    const lineNumbers = rangeParser(strlineNumbers)\n    return (index) => lineNumbers.includes(index + 1)\n  } else {\n    return () => false\n  }\n}\n\n/**\n * Check if we want to start the line numbering from a given number or 1\n * showLineNumbers=5, will start the numbering from 5\n * @param {string} meta\n * @returns {number}\n */\nconst calculateStartingLine = (meta) => {\n  const RE = /showLineNumbers=(?<lines>\\d+)/i\n  // pick the line number after = using a named capturing group\n  if (RE.test(meta)) {\n    const {\n      groups: { lines },\n    } = RE.exec(meta)\n    return Number(lines)\n  }\n  return 1\n}\n\n/**\n * Split line to div node with className `code-line`\n *\n * @param {string} text\n * @return {Element[]}\n */\nconst splitLine = (text) => {\n  // Xdm Markdown parses every code line with \\n\n  const textArray = text.split(/\\n/)\n\n  // Remove last line \\n which results in empty array\n  if (textArray[textArray.length - 1].trim() === '') {\n    textArray.pop()\n  }\n\n  // Empty array are actually line segments so we convert them back to newlines\n  return textArray.map((line) => {\n    return {\n      type: 'element',\n      tagName: 'span',\n      properties: { className: ['code-line'] },\n      children: [{ type: 'text', value: line }],\n    }\n  })\n}\n\n/**\n * Add a node start and end line position information for each text node\n *\n * @return { (ast:Element['children']) => Element['children'] }\n *\n */\nconst addNodePositionClosure = () => {\n  let startLineNum = 1\n  /**\n   * @param {Element['children']} ast\n   * @return {Element['children']}\n   */\n  const addNodePosition = (ast) => {\n    // @ts-ignore\n    return ast.reduce((result, node) => {\n      if (node.type === 'text') {\n        const value = /** @type {string} */ (node.value)\n        const numLines = (value.match(/\\n/g) || '').length\n        node.position = {\n          // column: 0 is to make the ts compiler happy but we do not use this field\n          start: { line: startLineNum, column: 0 },\n          end: { line: startLineNum + numLines, column: 0 },\n        }\n        startLineNum = startLineNum + numLines\n        result.push(node)\n        return result\n      }\n\n      if (Object.prototype.hasOwnProperty.call(node, 'children')) {\n        const initialLineNum = startLineNum\n        // @ts-ignore\n        node.children = addNodePosition(node.children, startLineNum)\n        result.push(node)\n        node.position = {\n          start: { line: initialLineNum, column: 0 },\n          end: { line: startLineNum, column: 0 },\n        }\n        return result\n      }\n\n      result.push(node)\n      return result\n    }, [])\n  }\n  return addNodePosition\n}\n\n/**\n * Split multiline text nodes into individual nodes with positioning\n *\n * @param {Element['children']} ast\n * @return {Element['children']}\n */\nconst splitTextByLine = (ast) => {\n  //@ts-ignore\n  return ast.reduce((result, node) => {\n    if (node.type === 'text') {\n      if (node.value.indexOf('\\n') === -1) {\n        result.push(node)\n        return result\n      }\n\n      const lines = node.value.split('\\n')\n      for (const [i, line] of lines.entries()) {\n        result.push({\n          type: 'text',\n          value: i === lines.length - 1 ? line : line + '\\n',\n          position: {\n            start: { line: node.position.start.line + i },\n            end: { line: node.position.start.line + i },\n          },\n        })\n      }\n\n      return result\n    }\n\n    if (Object.prototype.hasOwnProperty.call(node, 'children')) {\n      // @ts-ignore\n      node.children = splitTextByLine(node.children)\n      result.push(node)\n      return result\n    }\n\n    result.push(node)\n    return result\n  }, [])\n}\n\n/**\n * Rehype prism plugin generator that highlights code blocks with refractor (prismjs)\n *\n * Pass in your own refractor object with the required languages registered:\n * https://github.com/wooorm/refractor#refractorregistersyntax\n *\n * @param {import('refractor/lib/core').Refractor} refractor\n * @return {import('unified').Plugin<[Options?], Root>}\n */\nconst rehypePrismGenerator = (refractor) => {\n  return (options = {}) => {\n    return (tree) => {\n      visit(tree, 'element', visitor)\n    }\n\n    /**\n     * @param {Element} node\n     * @param {number} index\n     * @param {Element} parent\n     */\n    function visitor(node, index, parent) {\n      if (!parent || parent.tagName !== 'pre' || node.tagName !== 'code') {\n        return\n      }\n\n      let meta = node.data && node.data.meta ? /** @type {string} */ (node.data.meta) : ''\n      // Coerce className to array\n      if (node.properties.className) {\n        if (typeof node.properties.className === 'boolean') {\n          node.properties.className = []\n        } else if (!Array.isArray(node.properties.className)) {\n          node.properties.className = [node.properties.className]\n        }\n      } else {\n        node.properties.className = []\n      }\n      node.properties.className.push('code-highlight')\n      const lang = getLanguage(node)\n\n      /** @type {Element} */\n      let refractorRoot\n      let langError = false\n\n      // Syntax highlight\n      if (lang) {\n        try {\n          // @ts-ignore\n          refractorRoot = refractor.highlight(toString(node), lang)\n          // @ts-ignore className is already an array\n          parent.properties.className = (parent.properties.className || []).concat(\n            'language-' + lang\n          )\n        } catch (err) {\n          if (options.ignoreMissing && /Unknown language/.test(err.message)) {\n            langError = true\n            refractorRoot = node\n          } else {\n            throw err\n          }\n        }\n      } else {\n        refractorRoot = node\n      }\n\n      const nodeWithPosition = addNodePositionClosure()(refractorRoot.children)\n      refractorRoot.children = splitTextByLine(nodeWithPosition)\n\n      if (refractorRoot.children.length > 0) {\n        refractorRoot.position = {\n          start: { line: refractorRoot.children[0].position.start.line, column: 0 },\n          end: {\n            line: refractorRoot.children[refractorRoot.children.length - 1].position.end.line,\n            column: 0,\n          },\n        }\n      }\n      const shouldHighlightLine = calculateLinesToHighlight(meta)\n      const startingLineNumber = calculateStartingLine(meta)\n      const codeLineArray = splitLine(toString(node))\n\n      for (const [i, line] of codeLineArray.entries()) {\n        // Code lines\n        if (\n          meta.toLowerCase().includes('showLineNumbers'.toLowerCase()) ||\n          options.showLineNumbers\n        ) {\n          line.properties.line = [(i + startingLineNumber).toString()]\n          // @ts-ignore\n          line.properties.className.push('line-number')\n        }\n\n        // Line highlight\n        if (shouldHighlightLine(i)) {\n          // @ts-ignore\n          line.properties.className.push('highlight-line')\n        }\n\n        if (lang === 'diff' && toString(line).substring(0, 1) === '-') {\n          // @ts-ignore\n          line.properties.className.push('deleted')\n        } else if (lang === 'diff' && toString(line).substring(0, 1) === '+') {\n          // @ts-ignore\n          line.properties.className.push('inserted')\n        }\n\n        // Syntax highlight\n        const treeExtract = filter(\n          refractorRoot,\n          (node) => node.position.start.line <= i + 1 && node.position.end.line >= i + 1\n        )\n        line.children = treeExtract.children\n      }\n\n      node.children = codeLineArray\n    }\n  }\n}\n\nexport default rehypePrismGenerator\n","import { refractor as refractorAll } from 'refractor/lib/all.js'\nimport rehypePrismGenerator from './generator.js'\n\n/**\n * Rehype prism plugin that highlights code blocks with refractor (prismjs)\n * This supports all the languages and should be used on the server side.\n *\n * Consider using rehypePrismCommon or rehypePrismGenerator to generate a plugin\n * that supports your required languages.\n */\nconst rehypePrismAll = rehypePrismGenerator(refractorAll)\n\nexport default rehypePrismAll\n","import { refractor as refractorCommon } from 'refractor/lib/common.js'\nimport rehypePrismGenerator from './generator.js'\n\n/**\n * Rehype prism plugin that highlights code blocks with refractor (prismjs)\n * Supported languages: https://github.com/wooorm/refractor#data\n *\n * Consider using rehypePrismGenerator to generate a plugin\n * that supports your required languages.\n */\nconst rehypePrismCommon = rehypePrismGenerator(refractorCommon)\n\nexport default rehypePrismCommon\n","const rtlRange = '\\u0591-\\u07FF\\uFB1D-\\uFDFD\\uFE70-\\uFEFC'\nconst ltrRange =\n  'A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6' +\n  '\\u00F8-\\u02B8\\u0300-\\u0590\\u0800-\\u1FFF\\u200E\\u2C00-\\uFB1C' +\n  '\\uFE00-\\uFE6F\\uFEFD-\\uFFFF'\n\n/* eslint-disable no-misleading-character-class */\nconst rtl = new RegExp('^[^' + ltrRange + ']*[' + rtlRange + ']')\nconst ltr = new RegExp('^[^' + rtlRange + ']*[' + ltrRange + ']')\n/* eslint-enable no-misleading-character-class */\n\n/**\n * Detect the direction of text: left-to-right, right-to-left, or neutral\n *\n * @param {string} value\n * @returns {'rtl'|'ltr'|'neutral'}\n */\nexport function direction(value) {\n  const source = String(value || '')\n  return rtl.test(source) ? 'rtl' : ltr.test(source) ? 'ltr' : 'neutral'\n}\n","/**\n * @typedef {import('./types.js').Node} Node\n * @typedef {import('./types.js').Element} Element\n * @typedef {import('./types.js').Parent} Parent\n * @typedef {import('hast-util-is-element').AssertPredicate<Element>} IsElement\n */\n\nimport {convertElement} from 'hast-util-is-element'\n\n/**\n * @param {Node} node\n * @returns {node is Parent}\n */\nexport function parent(node) {\n  // @ts-expect-error: hush.\n  return Array.isArray(node.children)\n}\n\n/** @type {IsElement} */\n// @ts-expect-error it works.\nexport const element = convertElement()\n","/**\n * @typedef {import('./types.js').SelectState} SelectState\n * @typedef {import('./types.js').HastNode} HastNode\n * @typedef {import('./types.js').ElementChild} ElementChild\n * @typedef {import('./types.js').Direction} Direction\n * @typedef {import('unist-util-visit').Visitor<ElementChild>} Visitor\n */\n\nimport {direction} from 'direction'\nimport {isElement} from 'hast-util-is-element'\nimport {toString} from 'hast-util-to-string'\nimport {svg} from 'property-information'\nimport {visit, EXIT, SKIP} from 'unist-util-visit'\nimport {element} from './util.js'\n\n/**\n * @param {SelectState} state\n * @param {HastNode} node\n * @returns {() => void}\n */\n// eslint-disable-next-line complexity\nexport function enterState(state, node) {\n  const schema = state.schema\n  const language = state.language\n  const currentDirection = state.direction\n  const editableOrEditingHost = state.editableOrEditingHost\n  /** @type {Direction|undefined} */\n  let dirInferred\n  /** @type {boolean|undefined} */\n  let found\n\n  if (element(node) && node.properties) {\n    const lang = node.properties.xmlLang || node.properties.lang\n    const type = node.properties.type || 'text'\n    const dir = dirProperty(node)\n\n    if (lang !== undefined && lang !== null) {\n      state.language = String(lang)\n      found = true\n    }\n\n    if (schema && schema.space === 'html') {\n      if (node.properties.contentEditable === 'true') {\n        state.editableOrEditingHost = true\n        found = true\n      }\n\n      if (isElement(node, 'svg')) {\n        state.schema = svg\n        found = true\n      }\n\n      // See: <https://html.spec.whatwg.org/#the-directionality>.\n      // Explicit `[dir=rtl]`.\n      if (dir === 'rtl') {\n        dirInferred = dir\n      } else if (\n        // Explicit `[dir=ltr]`.\n        dir === 'ltr' ||\n        // HTML with an invalid or no `[dir]`.\n        (dir !== 'auto' && isElement(node, 'html')) ||\n        // `input[type=tel]` with an invalid or no `[dir]`.\n        (dir !== 'auto' && isElement(node, 'input') && type === 'tel')\n      ) {\n        dirInferred = 'ltr'\n        // `[dir=auto]` or `bdi` with an invalid or no `[dir]`.\n      } else if (dir === 'auto' || isElement(node, 'bdi')) {\n        if (isElement(node, 'textarea')) {\n          // Check contents of `<textarea>`.\n          dirInferred = dirBidi(toString(node))\n        } else if (\n          isElement(node, 'input') &&\n          (type === 'email' ||\n            type === 'search' ||\n            type === 'tel' ||\n            type === 'text')\n        ) {\n          // Check value of `<input>`.\n          // @ts-expect-error something is `never` in types but this is needed.\n          dirInferred = node.properties.value\n            ? // @ts-expect-error Assume string\n              dirBidi(node.properties.value)\n            : 'ltr'\n        } else {\n          // Check text nodes in `node`.\n          visit(node, inferDirectionality)\n        }\n      }\n\n      if (dirInferred) {\n        state.direction = dirInferred\n        found = true\n      }\n    }\n    // Turn off editing mode in non-HTML spaces.\n    else if (state.editableOrEditingHost) {\n      state.editableOrEditingHost = false\n      found = true\n    }\n  }\n\n  return found ? reset : noop\n\n  function reset() {\n    state.schema = schema\n    state.language = language\n    state.direction = currentDirection\n    state.editableOrEditingHost = editableOrEditingHost\n  }\n\n  /** @type {Visitor} */\n  function inferDirectionality(child) {\n    if (child.type === 'text') {\n      dirInferred = dirBidi(child.value)\n      return dirInferred ? EXIT : null\n    }\n\n    if (\n      child !== node &&\n      (isElement(child, ['bdi', 'script', 'style', 'textare']) ||\n        dirProperty(child))\n    ) {\n      return SKIP\n    }\n  }\n}\n\n/**\n * @param {string} value\n * @returns {Direction|undefined}\n */\nfunction dirBidi(value) {\n  const result = direction(value)\n  return result === 'neutral' ? undefined : result\n}\n\n/**\n * @param {ElementChild} node\n * @returns {Direction|undefined}\n */\nfunction dirProperty(node) {\n  const value =\n    element(node) && node.properties && typeof node.properties.dir === 'string'\n      ? node.properties.dir.toLowerCase()\n      : undefined\n\n  return value === 'auto' || value === 'ltr' || value === 'rtl'\n    ? value\n    : undefined\n}\n\nfunction noop() {}\n","/**\n * @typedef {import('./types.js').Rule} Rule\n * @typedef {import('./types.js').Node} Node\n * @typedef {import('./types.js').Element} Element\n * @typedef {import('./types.js').Parent} Parent\n * @typedef {import('./types.js').SelectState} SelectState\n * @typedef {import('./types.js').SelectIterator} SelectIterator\n * @typedef {import('./types.js').Handler} Handler\n */\n\nimport {zwitch} from 'zwitch'\nimport {enterState} from './enter-state.js'\nimport {parent, element} from './util.js'\n\nconst own = {}.hasOwnProperty\n\nconst handle = zwitch('nestingOperator', {\n  // @ts-expect-error: hush.\n  unknown: unknownNesting,\n  // @ts-expect-error: hush.\n  invalid: topScan, // `undefined` is the top query selector.\n  handlers: {\n    // @ts-expect-error: hush.\n    null: descendant, // `null` is the descendant combinator.\n    // @ts-expect-error: hush.\n    '>': child,\n    // @ts-expect-error: hush.\n    '+': adjacentSibling,\n    // @ts-expect-error: hush.\n    '~': generalSibling\n  }\n})\n\n/** @type {Handler} */\nexport function nest(query, node, index, parent, state) {\n  handle(query, node, index, parent, state)\n}\n\n// Shouldn’t be called, parser gives correct data.\n/* c8 ignore next 6 */\n/**\n * @param {{[x: string]: unknown, type: string}} query\n */\nfunction unknownNesting(query) {\n  throw new Error('Unexpected nesting `' + query.nestingOperator + '`')\n}\n\n/** @type {Handler} */\nfunction topScan(query, node, index, parent, state) {\n  // Shouldn’t happen.\n  /* c8 ignore next 3 */\n  if (parent || index === null) {\n    throw new Error('topScan is supposed to be called from the root node')\n  }\n\n  // Shouldn’t happen.\n  /* c8 ignore next 3 */\n  if (!state.iterator) {\n    throw new Error('Expected `iterator`')\n  }\n\n  state.iterator(query, node, index, parent, state)\n  if (!state.shallow) descendant(query, node, index, parent, state)\n}\n\n/** @type {Handler} */\nfunction descendant(query, node, index, parent, state) {\n  const previous = state.iterator\n\n  state.iterator = iterator\n  child(query, node, index, parent, state)\n\n  /** @type {SelectIterator} */\n  function iterator(query, node, index, parent, state) {\n    // Shouldn’t happen.\n    /* c8 ignore next 3 */\n    if (!previous) {\n      throw new Error('Expected `iterator`')\n    }\n\n    state.iterator = previous\n    previous(query, node, index, parent, state)\n    state.iterator = iterator\n\n    if (state.one && state.found) return\n\n    child(query, node, index, parent, state)\n  }\n}\n\n/** @type {Handler} */\nfunction child(query, node, _1, _2, state) {\n  if (!parent(node)) return\n  if (node.children.length === 0) return\n  indexedSearch(query, node, state)\n}\n\n/** @type {Handler} */\nfunction adjacentSibling(query, _, index, parent, state) {\n  // Shouldn’t happen.\n  /* c8 ignore next */\n  if (!parent || index === null) return\n  indexedSearch(query, parent, state, index + 1, true)\n}\n\n/** @type {Handler} */\nfunction generalSibling(query, _, index, parent, state) {\n  // Shouldn’t happen.\n  /* c8 ignore next */\n  if (!parent || index === null) return\n  indexedSearch(query, parent, state, index + 1)\n}\n\n/**\n * Handles `typeIndex` and `typeCount` properties for every walker.\n *\n * @param {Rule} query\n * @param {Parent} parent\n * @param {SelectState} state\n * @param {number} [from=0]\n * @param {boolean} [firstElementOnly=false]\n */\nfunction indexedSearch(query, parent, state, from, firstElementOnly) {\n  const handle = state.index ? delay : add\n  const children = parent.children\n  let elements = 0\n  let index = -1\n  /** @type {Object.<string, number>} */\n  const types = {}\n  /** @type {Array.<Function>} */\n  const delayed = []\n\n  // Start looking at `from`\n  if (from === undefined || from === null) from = 0\n\n  // Exit if there are no further nodes.\n  if (from >= children.length) return\n\n  // If we need to index for types, do so for all elements before `from`.\n  if (state.index) {\n    while (++index < from) {\n      const child = children[index]\n      if (element(child)) count(child.tagName)\n    }\n  }\n\n  index = from - 1\n\n  while (++index < children.length) {\n    const child = children[index]\n    // Only check elements.\n    // Check either all elements, or only check the first sibling\n    if (element(child)) {\n      handle(child, index)\n\n      // Stop if we’re looking for one node and it’s already found.\n      if (state.one && state.found) return\n      if (firstElementOnly) break\n    }\n  }\n\n  if (state.index) {\n    index = -1\n\n    while (++index < delayed.length) {\n      delayed[index]()\n      if (state.one && state.found) return\n    }\n  }\n\n  /**\n   * @param {Element} node\n   * @param {number} childIndex\n   */\n  function delay(node, childIndex) {\n    const elementsBefore = elements\n    const elementsByTypeBefore = own.call(types, node.tagName)\n      ? types[node.tagName]\n      : 0\n\n    count(node.tagName)\n\n    delayed.push(fn)\n\n    function fn() {\n      // Before counting further elements:\n      state.elementIndex = elementsBefore\n      state.typeIndex = elementsByTypeBefore\n\n      // After counting all elements.\n      state.elementCount = elements\n      state.typeCount = types[node.tagName]\n\n      add(node, childIndex)\n    }\n  }\n\n  /**\n   * @param {Element} node\n   * @param {number} childIndex\n   */\n  function add(node, childIndex) {\n    const exit = enterState(state, node)\n\n    // Shouldn’t happen.\n    /* c8 ignore next 3 */\n    if (!state.iterator) {\n      throw new Error('Expected `iterator`')\n    }\n\n    state.iterator(query, node, childIndex, parent, state)\n    exit()\n  }\n\n  /**\n   * @param {string} name\n   */\n  function count(name) {\n    if (!own.call(types, name)) types[name] = 0\n    elements++\n    types[name]++\n  }\n}\n","/**\n * See <https://tools.ietf.org/html/rfc4647#section-3.1>\n * for more information on the algorithms.\n */\n\n/**\n * @typedef {string} Tag\n * @typedef {Array<Tag>} Tags\n * @typedef {string} Range\n * @typedef {Array<Range>} Ranges\n *\n * @callback Check\n * @param {Tag} tag\n * @param {Range} range\n * @returns {boolean}\n *\n * @typedef {FilterOrLookup<true>} Filter\n * @typedef {FilterOrLookup<false>} Lookup\n */\n\n/**\n * @template {boolean} IsFilter\n * @callback FilterOrLookup\n * @param {Tag|Tags} tags\n * @param {Range|Ranges} [ranges='*']\n * @returns {IsFilter extends true ? Tags : Tag|undefined}\n */\n\n/**\n * Factory to perform a filter or a lookup.\n * This factory creates a function that accepts a list of tags and a list of\n * ranges, and contains logic to exit early for lookups.\n * `check` just has to deal with one tag and one range.\n * This match function iterates over ranges, and for each range,\n * iterates over tags.  That way, earlier ranges matching any tag have\n * precedence over later ranges.\n *\n * @template {boolean} IsFilter\n * @param {Check} check\n * @param {IsFilter} filter\n * @returns {FilterOrLookup<IsFilter>}\n */\nfunction factory(check, filter) {\n  return function (tags, ranges) {\n    let left = cast(tags, 'tag')\n    const right = cast(\n      ranges === null || ranges === undefined ? '*' : ranges,\n      'range'\n    )\n    /** @type {Tags} */\n    const matches = []\n    let rightIndex = -1\n\n    while (++rightIndex < right.length) {\n      const range = right[rightIndex].toLowerCase()\n\n      // Ignore wildcards in lookup mode.\n      if (!filter && range === '*') continue\n\n      let leftIndex = -1\n      /** @type {Tags} */\n      const next = []\n\n      while (++leftIndex < left.length) {\n        if (check(left[leftIndex].toLowerCase(), range)) {\n          // Exit if this is a lookup and we have a match.\n          if (!filter) {\n            return /** @type {IsFilter extends true ? Tags : Tag|undefined} */ (\n              left[leftIndex]\n            )\n          }\n\n          matches.push(left[leftIndex])\n        } else {\n          next.push(left[leftIndex])\n        }\n      }\n\n      left = next\n    }\n\n    // If this is a filter, return the list.  If it’s a lookup, we didn’t find\n    // a match, so return `undefined`.\n    return /** @type {IsFilter extends true ? Tags : Tag|undefined} */ (\n      filter ? matches : undefined\n    )\n  }\n}\n\n/**\n * Basic Filtering (Section 3.3.1) matches a language priority list consisting\n * of basic language ranges (Section 2.1) to sets of language tags.\n */\nexport const basicFilter = factory(function (tag, range) {\n  return range === '*' || tag === range || tag.includes(range + '-')\n}, true)\n\n/**\n * Extended Filtering (Section 3.3.2) matches a language priority list\n * consisting of extended language ranges (Section 2.2) to sets of language\n * tags.\n */\nexport const extendedFilter = factory(function (tag, range) {\n  // 3.3.2.1\n  const left = tag.split('-')\n  const right = range.split('-')\n  let leftIndex = 0\n  let rightIndex = 0\n\n  // 3.3.2.2\n  if (right[rightIndex] !== '*' && left[leftIndex] !== right[rightIndex]) {\n    return false\n  }\n\n  leftIndex++\n  rightIndex++\n\n  // 3.3.2.3\n  while (rightIndex < right.length) {\n    // 3.3.2.3.A\n    if (right[rightIndex] === '*') {\n      rightIndex++\n      continue\n    }\n\n    // 3.3.2.3.B\n    if (!left[leftIndex]) return false\n\n    // 3.3.2.3.C\n    if (left[leftIndex] === right[rightIndex]) {\n      leftIndex++\n      rightIndex++\n      continue\n    }\n\n    // 3.3.2.3.D\n    if (left[leftIndex].length === 1) return false\n\n    // 3.3.2.3.E\n    leftIndex++\n  }\n\n  // 3.3.2.4\n  return true\n}, true)\n\n/**\n * Lookup (Section 3.4) matches a language priority list consisting of basic\n * language ranges to sets of language tags to find the one exact language tag\n * that best matches the range.\n */\nexport const lookup = factory(function (tag, range) {\n  let right = range\n\n  /* eslint-disable-next-line no-constant-condition */\n  while (true) {\n    if (right === '*' || tag === right) return true\n\n    let index = right.lastIndexOf('-')\n\n    if (index < 0) return false\n\n    if (right.charAt(index - 2) === '-') index -= 2\n\n    right = right.slice(0, index)\n  }\n}, false)\n\n/**\n * Validate tags or ranges, and cast them to arrays.\n *\n * @param {string|Array<string>} values\n * @param {string} name\n * @returns {Array<string>}\n */\nfunction cast(values, name) {\n  const value = values && typeof values === 'string' ? [values] : values\n\n  if (!value || typeof value !== 'object' || !('length' in value)) {\n    throw new Error(\n      'Invalid ' + name + ' `' + value + '`, expected non-empty string'\n    )\n  }\n\n  return value\n}\n","/**\n * @typedef {import('./types.js').Rule} Rule\n * @typedef {import('./types.js').RulePseudo} RulePseudo\n * @typedef {import('./types.js').RulePseudoNth} RulePseudoNth\n * @typedef {import('./types.js').RulePseudoSelector} RulePseudoSelector\n * @typedef {import('./types.js').Parent} Parent\n * @typedef {import('./types.js').Selector} Selector\n * @typedef {import('./types.js').Selectors} Selectors\n * @typedef {import('./types.js').SelectState} SelectState\n * @typedef {import('./types.js').Element} Element\n * @typedef {import('./types.js').ElementChild} ElementChild\n */\n\nimport {extendedFilter} from 'bcp-47-match'\nimport {parse as commas} from 'comma-separated-tokens'\nimport {hasProperty} from 'hast-util-has-property'\nimport {isElement} from 'hast-util-is-element'\nimport {whitespace} from 'hast-util-whitespace'\nimport {zwitch} from 'zwitch'\nimport {any} from './any.js'\n\nconst handle = zwitch('name', {\n  // @ts-expect-error: hush.\n  unknown: unknownPseudo,\n  invalid: invalidPseudo,\n  handlers: {\n    // @ts-expect-error: hush.\n    any: matches,\n    // @ts-expect-error: hush.\n    'any-link': anyLink,\n    // @ts-expect-error: hush.\n    blank,\n    // @ts-expect-error: hush.\n    checked,\n    // @ts-expect-error: hush.\n    dir,\n    // @ts-expect-error: hush.\n    disabled,\n    // @ts-expect-error: hush.\n    empty,\n    // @ts-expect-error: hush.\n    enabled,\n    // @ts-expect-error: hush.\n    'first-child': firstChild,\n    // @ts-expect-error: hush.\n    'first-of-type': firstOfType,\n    // @ts-expect-error: hush.\n    has,\n    // @ts-expect-error: hush.\n    lang,\n    // @ts-expect-error: hush.\n    'last-child': lastChild,\n    // @ts-expect-error: hush.\n    'last-of-type': lastOfType,\n    // @ts-expect-error: hush.\n    matches,\n    // @ts-expect-error: hush.\n    not,\n    // @ts-expect-error: hush.\n    'nth-child': nthChild,\n    // @ts-expect-error: hush.\n    'nth-last-child': nthLastChild,\n    // @ts-expect-error: hush.\n    'nth-of-type': nthOfType,\n    // @ts-expect-error: hush.\n    'nth-last-of-type': nthLastOfType,\n    // @ts-expect-error: hush.\n    'only-child': onlyChild,\n    // @ts-expect-error: hush.\n    'only-of-type': onlyOfType,\n    // @ts-expect-error: hush.\n    optional,\n    // @ts-expect-error: hush.\n    'read-only': readOnly,\n    // @ts-expect-error: hush.\n    'read-write': readWrite,\n    // @ts-expect-error: hush.\n    required,\n    // @ts-expect-error: hush.\n    root,\n    // @ts-expect-error: hush.\n    scope\n  }\n})\n\npseudo.needsIndex = [\n  'first-child',\n  'first-of-type',\n  'last-child',\n  'last-of-type',\n  'nth-child',\n  'nth-last-child',\n  'nth-of-type',\n  'nth-last-of-type',\n  'only-child',\n  'only-of-type'\n]\n\n/**\n * @param {Rule} query\n * @param {Element} element\n * @param {number|null} index\n * @param {Parent|null} parent\n * @param {SelectState} state\n * @returns {boolean}\n */\nexport function pseudo(query, element, index, parent, state) {\n  const pseudos = query.pseudos\n  let offset = -1\n\n  while (++offset < pseudos.length) {\n    if (!handle(pseudos[offset], element, index, parent, state)) return false\n  }\n\n  return true\n}\n\n/**\n * @param {RulePseudoSelector} query\n * @param {Element} element\n * @param {number|null} _1\n * @param {Parent|null} _2\n * @param {SelectState} state\n * @returns {boolean}\n */\nfunction matches(query, element, _1, _2, state) {\n  const shallow = state.shallow\n  const one = state.one\n\n  state.shallow = true\n  state.one = true\n\n  const result = any(query.value, element, state)[0] === element\n\n  state.shallow = shallow\n  state.one = one\n\n  return result\n}\n\n/**\n * @param {RulePseudoSelector} query\n * @param {Element} element\n * @param {number|null} index\n * @param {Parent|null} parent\n * @param {SelectState} state\n * @returns {boolean}\n */\nfunction not(query, element, index, parent, state) {\n  return !matches(query, element, index, parent, state)\n}\n\n/**\n * @param {RulePseudo} _\n * @param {Element} element\n * @returns {boolean}\n */\nfunction anyLink(_, element) {\n  return (\n    isElement(element, ['a', 'area', 'link']) && hasProperty(element, 'href')\n  )\n}\n\n/**\n * @param {RulePseudo} _\n * @param {Element} element\n * @returns {boolean}\n */\nfunction checked(_, element) {\n  if (isElement(element, ['input', 'menuitem'])) {\n    return Boolean(\n      element.properties &&\n        (element.properties.type === 'checkbox' ||\n          element.properties.type === 'radio') &&\n        hasProperty(element, 'checked')\n    )\n  }\n\n  if (isElement(element, 'option')) {\n    return hasProperty(element, 'selected')\n  }\n\n  return false\n}\n\n/**\n * @param {RulePseudo} query\n * @param {Element} _1\n * @param {number|null} _2\n * @param {Parent|null} _3\n * @param {SelectState} state\n * @returns {boolean}\n */\nfunction dir(query, _1, _2, _3, state) {\n  return state.direction === query.value\n}\n\n/**\n * @param {RulePseudo} _\n * @param {Element} element\n * @returns {boolean}\n */\nfunction disabled(_, element) {\n  return (\n    isElement(element, [\n      'button',\n      'input',\n      'select',\n      'textarea',\n      'optgroup',\n      'option',\n      'menuitem',\n      'fieldset'\n    ]) && hasProperty(element, 'disabled')\n  )\n}\n\n/**\n * @param {RulePseudo} query\n * @param {Element} element\n * @returns {boolean}\n */\nfunction enabled(query, element) {\n  return !disabled(query, element)\n}\n\n/**\n * @param {RulePseudo} _\n * @param {Element} element\n * @returns {boolean}\n */\nfunction required(_, element) {\n  return (\n    isElement(element, ['input', 'textarea', 'select']) &&\n    hasProperty(element, 'required')\n  )\n}\n\n/**\n * @param {RulePseudo} query\n * @param {Element} element\n * @returns {boolean}\n */\nfunction optional(query, element) {\n  return !required(query, element)\n}\n\n/**\n * @param {RulePseudo} _\n * @param {Element} element\n * @param {number|null} _1\n * @param {Parent|null} _2\n * @param {SelectState} state\n * @returns {boolean}\n */\nfunction readWrite(_, element, _1, _2, state) {\n  return isElement(element, ['input', 'textarea'])\n    ? !hasProperty(element, 'readOnly') && !hasProperty(element, 'disabled')\n    : Boolean(state.editableOrEditingHost)\n}\n\n/**\n * @param {RulePseudo} query\n * @param {Element} element\n * @param {number|null} index\n * @param {Parent|null} parent\n * @param {SelectState} state\n * @returns {boolean}\n */\nfunction readOnly(query, element, index, parent, state) {\n  return !readWrite(query, element, index, parent, state)\n}\n\n/**\n * @param {RulePseudo} _\n * @param {Element} element\n * @param {number|null} _1\n * @param {Parent|null} parent\n * @param {SelectState} state\n * @returns {boolean}\n */\nfunction root(_, element, _1, parent, state) {\n  return Boolean(\n    (!parent || parent.type === 'root') &&\n      state.schema &&\n      (state.schema.space === 'html' || state.schema.space === 'svg') &&\n      isElement(element, ['html', 'svg'])\n  )\n}\n\n/**\n * @param {RulePseudo} _\n * @param {Element} element\n * @param {number|null} _1\n * @param {Parent|null} _2\n * @param {SelectState} state\n * @returns {boolean}\n */\nfunction scope(_, element, _1, _2, state) {\n  return Boolean(\n    isElement(element) &&\n      state.scopeElements &&\n      state.scopeElements.includes(element)\n  )\n}\n\n/**\n * @param {RulePseudo} _\n * @param {Element} element\n * @returns {boolean}\n */\nfunction empty(_, element) {\n  return !someChildren(element, check)\n\n  /**\n   * @param {ElementChild} child\n   * @returns {boolean}\n   */\n  function check(child) {\n    return child.type === 'element' || child.type === 'text'\n  }\n}\n\n/**\n * @param {RulePseudo} _\n * @param {Element} element\n * @returns {boolean}\n */\nfunction blank(_, element) {\n  return !someChildren(element, check)\n\n  /**\n   * @param {ElementChild} child\n   * @returns {boolean}\n   */\n  function check(child) {\n    return (\n      child.type === 'element' || (child.type === 'text' && !whitespace(child))\n    )\n  }\n}\n\n/**\n * @param {RulePseudo} query\n * @param {Element} _1\n * @param {number|null} _2\n * @param {Parent|null} _3\n * @param {SelectState} state\n * @returns {boolean}\n */\nfunction firstChild(query, _1, _2, _3, state) {\n  assertDeep(state, query)\n  return state.elementIndex === 0\n}\n\n/**\n * @param {RulePseudo} query\n * @param {Element} _1\n * @param {number|null} _2\n * @param {Parent|null} _3\n * @param {SelectState} state\n * @returns {boolean}\n */\nfunction lang(query, _1, _2, _3, state) {\n  return (\n    state.language !== '' &&\n    state.language !== undefined &&\n    state.language !== null &&\n    // @ts-expect-error never `selectors`.\n    extendedFilter(state.language, commas(query.value)).length > 0\n  )\n}\n\n/**\n * @param {RulePseudo} query\n * @param {Element} _1\n * @param {number|null} _2\n * @param {Parent|null} _3\n * @param {SelectState} state\n * @returns {boolean}\n */\nfunction lastChild(query, _1, _2, _3, state) {\n  assertDeep(state, query)\n  return Boolean(\n    state.elementCount && state.elementIndex === state.elementCount - 1\n  )\n}\n\n/**\n * @param {RulePseudo} query\n * @param {Element} _1\n * @param {number|null} _2\n * @param {Parent|null} _3\n * @param {SelectState} state\n * @returns {boolean}\n */\nfunction onlyChild(query, _1, _2, _3, state) {\n  assertDeep(state, query)\n  return state.elementCount === 1\n}\n\n/**\n * @param {RulePseudoNth} query\n * @param {Element} _1\n * @param {number|null} _2\n * @param {Parent|null} _3\n * @param {SelectState} state\n * @returns {boolean}\n */\nfunction nthChild(query, _1, _2, _3, state) {\n  assertDeep(state, query)\n  return (\n    typeof state.elementIndex === 'number' && query.value(state.elementIndex)\n  )\n}\n\n/**\n * @param {RulePseudoNth} query\n * @param {Element} _1\n * @param {number|null} _2\n * @param {Parent|null} _3\n * @param {SelectState} state\n * @returns {boolean}\n */\nfunction nthLastChild(query, _1, _2, _3, state) {\n  assertDeep(state, query)\n  return Boolean(\n    typeof state.elementCount === 'number' &&\n      typeof state.elementIndex === 'number' &&\n      query.value(state.elementCount - state.elementIndex - 1)\n  )\n}\n\n/**\n * @param {RulePseudoNth} query\n * @param {Element} _1\n * @param {number|null} _2\n * @param {Parent|null} _3\n * @param {SelectState} state\n * @returns {boolean}\n */\nfunction nthOfType(query, _1, _2, _3, state) {\n  assertDeep(state, query)\n  return typeof state.typeIndex === 'number' && query.value(state.typeIndex)\n}\n\n/**\n * @param {RulePseudoNth} query\n * @param {Element} _1\n * @param {number|null} _2\n * @param {Parent|null} _3\n * @param {SelectState} state\n * @returns {boolean}\n */\nfunction nthLastOfType(query, _1, _2, _3, state) {\n  assertDeep(state, query)\n  return (\n    typeof state.typeCount === 'number' &&\n    typeof state.typeIndex === 'number' &&\n    query.value(state.typeCount - 1 - state.typeIndex)\n  )\n}\n\n/**\n * @param {RulePseudo} query\n * @param {Element} _1\n * @param {number|null} _2\n * @param {Parent|null} _3\n * @param {SelectState} state\n * @returns {boolean}\n */\nfunction firstOfType(query, _1, _2, _3, state) {\n  assertDeep(state, query)\n  return state.typeIndex === 0\n}\n\n/**\n * @param {RulePseudo} query\n * @param {Element} _1\n * @param {number|null} _2\n * @param {Parent|null} _3\n * @param {SelectState} state\n * @returns {boolean}\n */\nfunction lastOfType(query, _1, _2, _3, state) {\n  assertDeep(state, query)\n  return (\n    typeof state.typeIndex === 'number' &&\n    typeof state.typeCount === 'number' &&\n    state.typeIndex === state.typeCount - 1\n  )\n}\n\n/**\n * @param {RulePseudo} query\n * @param {Element} _1\n * @param {number|null} _2\n * @param {Parent|null} _3\n * @param {SelectState} state\n * @returns {boolean}\n */\nfunction onlyOfType(query, _1, _2, _3, state) {\n  assertDeep(state, query)\n  return state.typeCount === 1\n}\n\n/**\n * @param {Element} element\n * @param {(child: ElementChild) => boolean} check\n * @returns {boolean}\n */\nfunction someChildren(element, check) {\n  const children = element.children\n  let index = -1\n\n  while (++index < children.length) {\n    if (check(children[index])) return true\n  }\n\n  return false\n}\n\n// Shouldn’t be called, parser gives correct data.\n/* c8 ignore next 3 */\nfunction invalidPseudo() {\n  throw new Error('Invalid pseudo-selector')\n}\n\n/**\n * @param {RulePseudo} query\n */\nfunction unknownPseudo(query) {\n  if (query.name) {\n    throw new Error('Unknown pseudo-selector `' + query.name + '`')\n  }\n\n  throw new Error('Unexpected pseudo-element or empty pseudo-class')\n}\n\n/**\n * @param {SelectState} state\n * @param {RulePseudo|RulePseudoNth} query\n */\nfunction assertDeep(state, query) {\n  if (state.shallow) {\n    throw new Error('Cannot use `:' + query.name + '` without parent')\n  }\n}\n\n/**\n * @param {RulePseudoSelector} query\n * @param {Element} element\n * @param {number|null} _2\n * @param {Parent|null} _3\n * @param {SelectState} state\n * @returns {boolean}\n */\nfunction has(query, element, _2, _3, state) {\n  const shallow = state.shallow\n  const one = state.one\n  const scopeElements = state.scopeElements\n  const value = appendScope(query.value)\n\n  state.shallow = false\n  state.one = true\n  state.scopeElements = [element]\n\n  const result = any(value, element, state).length > 0\n\n  state.shallow = shallow\n  state.one = one\n  state.scopeElements = scopeElements\n\n  return result\n}\n\n/**\n * @param {Selector} value\n * @returns {Selectors}\n */\nfunction appendScope(value) {\n  /** @type {Selectors} */\n  const selector =\n    value.type === 'ruleSet' ? {type: 'selectors', selectors: [value]} : value\n  let index = -1\n\n  while (++index < selector.selectors.length) {\n    const rule = selector.selectors[index].rule\n    rule.nestingOperator = null\n\n    if (\n      !rule.pseudos ||\n      rule.pseudos.length !== 1 ||\n      rule.pseudos[0].name !== 'scope'\n    ) {\n      selector.selectors[index] = {\n        type: 'ruleSet',\n        // @ts-expect-error pseudos are fine w/ just a name!\n        rule: {type: 'rule', rule, pseudos: [{name: 'scope'}]}\n      }\n    }\n  }\n\n  return selector\n}\n","/**\n * @typedef {import('./types.js').Rule} Rule\n * @typedef {import('./types.js').RuleAttr} RuleAttr\n * @typedef {import('./types.js').Element} Element\n * @typedef {import('./types.js').Schema} Schema\n * @typedef {import('./types.js').Info} Info\n * @typedef {import('./types.js').PropertyValue} PropertyValue\n */\n\nimport {stringify as commas} from 'comma-separated-tokens'\nimport {hasProperty} from 'hast-util-has-property'\nimport {find} from 'property-information'\nimport {stringify as spaces} from 'space-separated-tokens'\nimport {zwitch} from 'zwitch'\n\nconst handle = zwitch('operator', {\n  // @ts-expect-error: hush.\n  unknown: unknownOperator,\n  // @ts-expect-error: hush.\n  invalid: exists,\n  handlers: {\n    // @ts-expect-error: hush.\n    '=': exact,\n    // @ts-expect-error: hush.\n    '~=': spaceSeparatedList,\n    // @ts-expect-error: hush.\n    '|=': exactOrPrefix,\n    // @ts-expect-error: hush.\n    '^=': begins,\n    // @ts-expect-error: hush.\n    '$=': ends,\n    // @ts-expect-error: hush.\n    '*=': contains\n  }\n})\n\n/**\n * @param {Rule} query\n * @param {Element} element\n * @param {Schema} schema\n * @returns {boolean}\n */\nexport function attribute(query, element, schema) {\n  const attrs = query.attrs\n  let index = -1\n\n  while (++index < attrs.length) {\n    if (!handle(attrs[index], element, find(schema, attrs[index].name))) {\n      return false\n    }\n  }\n\n  return true\n}\n\n/**\n * `[attr]`\n *\n * @param {RuleAttr} _\n * @param {Element} element\n * @param {Info} info\n * @returns {boolean}\n */\nfunction exists(_, element, info) {\n  return hasProperty(element, info.property)\n}\n\n/**\n * `[attr=value]`\n *\n * @param {RuleAttr} query\n * @param {Element} element\n * @param {Info} info\n * @returns {boolean}\n */\nfunction exact(query, element, info) {\n  return Boolean(\n    hasProperty(element, info.property) &&\n      element.properties &&\n      normalizeValue(element.properties[info.property], info) === query.value\n  )\n}\n\n/**\n * `[attr~=value]`\n *\n * @param {RuleAttr} query\n * @param {Element} element\n * @param {Info} info\n * @returns {boolean}\n */\nfunction spaceSeparatedList(query, element, info) {\n  const value = element.properties && element.properties[info.property]\n\n  return (\n    // If this is a comma-separated list, and the query is contained in it, return\n    // true.\n    (!info.commaSeparated &&\n      value &&\n      typeof value === 'object' &&\n      query.value &&\n      value.includes(query.value)) ||\n    // For all other values (including comma-separated lists), return whether this\n    // is an exact match.\n    (hasProperty(element, info.property) &&\n      normalizeValue(value, info) === query.value)\n  )\n}\n\n/**\n * `[attr|=value]`\n *\n * @param {RuleAttr} query\n * @param {Element} element\n * @param {Info} info\n * @returns {boolean}\n */\nfunction exactOrPrefix(query, element, info) {\n  const value = normalizeValue(\n    element.properties && element.properties[info.property],\n    info\n  )\n\n  return Boolean(\n    hasProperty(element, info.property) &&\n      query.value &&\n      (value === query.value ||\n        (value.slice(0, query.value.length) === query.value &&\n          value.charAt(query.value.length) === '-'))\n  )\n}\n\n/**\n * `[attr^=value]`\n *\n * @param {RuleAttr} query\n * @param {Element} element\n * @param {Info} info\n * @returns {boolean}\n */\nfunction begins(query, element, info) {\n  return Boolean(\n    hasProperty(element, info.property) &&\n      element.properties &&\n      query.value &&\n      normalizeValue(element.properties[info.property], info).slice(\n        0,\n        query.value.length\n      ) === query.value\n  )\n}\n\n/**\n * `[attr$=value]`\n *\n * @param {RuleAttr} query\n * @param {Element} element\n * @param {Info} info\n * @returns {boolean}\n */\nfunction ends(query, element, info) {\n  return Boolean(\n    hasProperty(element, info.property) &&\n      element.properties &&\n      query.value &&\n      normalizeValue(element.properties[info.property], info).slice(\n        -query.value.length\n      ) === query.value\n  )\n}\n\n/**\n * `[attr*=value]`\n *\n * @param {RuleAttr} query\n * @param {Element} element\n * @param {Info} info\n * @returns {boolean}\n */\nfunction contains(query, element, info) {\n  return Boolean(\n    hasProperty(element, info.property) &&\n      element.properties &&\n      query.value &&\n      normalizeValue(element.properties[info.property], info).includes(\n        query.value\n      )\n  )\n}\n\n// Shouldn’t be called, Parser throws an error instead.\n/**\n * @param {RuleAttr} query\n * @returns {boolean}\n */\n/* c8 ignore next 3 */\nfunction unknownOperator(query) {\n  throw new Error('Unknown operator `' + query.operator + '`')\n}\n\n/**\n * Stringify a hast value back to its HTML form.\n *\n * @param {PropertyValue} value\n * @param {Info} info\n * @returns {string}\n */\nfunction normalizeValue(value, info) {\n  if (typeof value === 'boolean') {\n    return info.attribute\n  }\n\n  if (Array.isArray(value)) {\n    return (info.commaSeparated ? commas : spaces)(value)\n  }\n\n  return String(value)\n}\n","/**\n * @typedef {import('./types.js').Rule} Rule\n * @typedef {import('./types.js').HastNode} HastNode\n * @typedef {import('./types.js').Element} Element\n * @typedef {import('./types.js').Parent} Parent\n * @typedef {import('./types.js').SelectState} SelectState\n * @typedef {import('hast-util-is-element').AssertPredicate<Element>} IsElement\n */\n\nimport {attribute} from './attribute.js'\nimport {className} from './class-name.js'\nimport {id} from './id.js'\nimport {name} from './name.js'\nimport {pseudo} from './pseudo.js'\nimport {element} from './util.js'\n\n/**\n * @param {Rule} query\n * @param {HastNode} node\n * @param {number|null} index\n * @param {Parent|null} parent\n * @param {SelectState} state\n * @returns {boolean}\n */\nexport function test(query, node, index, parent, state) {\n  return Boolean(\n    element(node) &&\n      state.schema &&\n      (!query.tagName || name(query, node)) &&\n      (!query.classNames || className(query, node)) &&\n      (!query.id || id(query, node)) &&\n      (!query.attrs || attribute(query, node, state.schema)) &&\n      (!query.pseudos || pseudo(query, node, index, parent, state))\n  )\n}\n","/**\n * @typedef {import('./types.js').Rule} Rule\n * @typedef {import('./types.js').Element} Element\n */\n\n/**\n * @param {Rule} query\n * @param {Element} element\n * @returns {boolean}\n */\nexport function name(query, element) {\n  return query.tagName === '*' || query.tagName === element.tagName\n}\n","/**\n * @typedef {import('./types.js').Rule} Rule\n * @typedef {import('./types.js').Element} Element\n */\n\n/**\n * @param {Rule} query\n * @param {Element} element\n * @returns {boolean}\n */\nexport function className(query, element) {\n  /** @type {Array.<string>} */\n  // @ts-expect-error Assume array.\n  const value = element.properties.className || []\n  let index = -1\n\n  if (query.classNames) {\n    while (++index < query.classNames.length) {\n      if (!value.includes(query.classNames[index])) return false\n    }\n  }\n\n  return true\n}\n","/**\n * @typedef {import('./types.js').Rule} Rule\n * @typedef {import('./types.js').Element} Element\n */\n\n/**\n * @param {Rule} query\n * @param {Element} element\n * @returns {boolean}\n */\nexport function id(query, element) {\n  return Boolean(element.properties && element.properties.id === query.id)\n}\n","/**\n * @typedef {import('hast').Element} Element\n * @typedef {import('./types.js').Selectors} Selectors\n * @typedef {import('./types.js').Rule} Rule\n * @typedef {import('./types.js').RuleSet} RuleSet\n * @typedef {import('./types.js').HastNode} HastNode\n * @typedef {import('./types.js').SelectIterator} SelectIterator\n * @typedef {import('./types.js').SelectState} SelectState\n */\n\nimport {html, svg} from 'property-information'\nimport {zwitch} from 'zwitch'\nimport {enterState} from './enter-state.js'\nimport {nest} from './nest.js'\nimport {pseudo} from './pseudo.js'\nimport {test} from './test.js'\n\nconst type = zwitch('type', {\n  // @ts-expect-error: hush.\n  unknown: unknownType,\n  invalid: invalidType,\n  // @ts-expect-error: hush.\n  handlers: {selectors, ruleSet, rule}\n})\n\n/**\n * @param {Selectors|RuleSet|Rule} query\n * @param {HastNode|undefined} node\n * @param {SelectState} state\n * @returns {Array.<Element>}\n */\nexport function any(query, node, state) {\n  // @ts-expect-error zwitch types are off.\n  return query && node ? type(query, node, state) : []\n}\n\n/**\n * @param {Selectors} query\n * @param {HastNode} node\n * @param {SelectState} state\n * @returns {Array.<Element>}\n */\nfunction selectors(query, node, state) {\n  const collector = new Collector(state.one)\n  let index = -1\n\n  while (++index < query.selectors.length) {\n    collector.collectAll(ruleSet(query.selectors[index], node, state))\n  }\n\n  return collector.result\n}\n\n/**\n * @param {RuleSet} query\n * @param {HastNode} node\n * @param {SelectState} state\n * @returns {Array.<Element>}\n */\nfunction ruleSet(query, node, state) {\n  return rule(query.rule, node, state)\n}\n\n/**\n * @param {Rule} query\n * @param {HastNode} tree\n * @param {SelectState} state\n * @returns {Array.<Element>}\n */\nfunction rule(query, tree, state) {\n  const collector = new Collector(state.one)\n\n  if (state.shallow && query.rule) {\n    throw new Error('Expected selector without nesting')\n  }\n\n  nest(\n    query,\n    tree,\n    0,\n    null,\n    configure(query, {\n      schema: state.space === 'svg' ? svg : html,\n      language: undefined,\n      direction: 'ltr',\n      editableOrEditingHost: false,\n      // @ts-expect-error assume elements.\n      scopeElements: tree.type === 'root' ? tree.children : [tree],\n      iterator,\n      one: state.one,\n      shallow: state.shallow\n    })\n  )\n\n  return collector.result\n\n  /** @type {SelectIterator} */\n  function iterator(query, node, index, parent, state) {\n    const exit = enterState(state, node)\n\n    if (test(query, node, index, parent, state)) {\n      if (query.rule) {\n        nest(query.rule, node, index, parent, configure(query.rule, state))\n      } else {\n        // @ts-expect-error `test` also asserts `node is Element`\n        collector.collect(node)\n        state.found = true\n      }\n    }\n\n    exit()\n  }\n\n  /**\n   * @template {SelectState} S\n   * @param {Rule} query\n   * @param {S} state\n   * @returns {S}\n   */\n  function configure(query, state) {\n    const pseudos = query.pseudos || []\n    let index = -1\n\n    while (++index < pseudos.length) {\n      if (pseudo.needsIndex.includes(pseudos[index].name)) {\n        state.index = true\n        break\n      }\n    }\n\n    return state\n  }\n}\n\n// Shouldn’t be called, all data is handled.\n/* c8 ignore next 6 */\n/**\n * @param {{[x: string]: unknown, type: string}} query\n */\nfunction unknownType(query) {\n  throw new Error('Unknown type `' + query.type + '`')\n}\n\n// Shouldn’t be called, parser gives correct data.\n/* c8 ignore next 3 */\nfunction invalidType() {\n  throw new Error('Invalid type')\n}\n\nclass Collector {\n  /**\n   * @param {boolean|undefined} [one]\n   */\n  constructor(one) {\n    /** @type {Array.<Element>} */\n    this.result = []\n    /** @type {boolean|undefined} */\n    this.one = one\n    /** @type {boolean} */\n    this.found = false\n  }\n\n  /**\n   * Append nodes to array, filtering out duplicates.\n   *\n   * @param {Array.<Element>} elements\n   */\n  collectAll(elements) {\n    let index = -1\n\n    while (++index < elements.length) {\n      this.collect(elements[index])\n    }\n  }\n\n  /**\n   * Append one node.\n   *\n   * @param {Element} element\n   */\n  collect(element) {\n    if (this.one) {\n      // Shouldn’t happen, safeguards performance problems.\n      /* c8 ignore next */\n      if (this.found) return\n      this.found = true\n    }\n\n    if (!this.result.includes(element)) this.result.push(element)\n  }\n}\n","/**\n * @typedef {import('./types.js').Selector} Selector\n * @typedef {import('./types.js').Selectors} Selectors\n * @typedef {import('./types.js').RuleSet} RuleSet\n * @typedef {import('./types.js').Rule} Rule\n * @typedef {import('./types.js').RulePseudo} RulePseudo\n * @typedef {import('./types.js').RulePseudoNth} RulePseudoNth\n */\n\nimport {CssSelectorParser} from 'css-selector-parser'\nimport fauxEsmNthCheck from 'nth-check'\nimport {zwitch} from 'zwitch'\n\n/** @type {import('nth-check').default} */\n// @ts-expect-error\nconst nthCheck = fauxEsmNthCheck.default\n\nconst nth = new Set([\n  'nth-child',\n  'nth-last-child',\n  'nth-of-type',\n  'nth-last-of-type'\n])\n\nconst parser = new CssSelectorParser()\n\n// @ts-expect-error: hush.\nconst compile = zwitch('type', {handlers: {selectors, ruleSet, rule}})\n\nparser.registerAttrEqualityMods('~', '|', '^', '$', '*')\nparser.registerSelectorPseudos('any', 'matches', 'not', 'has')\nparser.registerNestingOperators('>', '+', '~')\n\n/**\n * @param {string} selector\n * @returns {Selector}\n */\nexport function parse(selector) {\n  if (typeof selector !== 'string') {\n    throw new TypeError('Expected `string` as selector, not `' + selector + '`')\n  }\n\n  // @ts-expect-error types are wrong.\n  return compile(parser.parse(selector))\n}\n\n/**\n * @param {Selectors} query\n * @returns {Selectors}\n */\nfunction selectors(query) {\n  let index = -1\n\n  while (++index < query.selectors.length) {\n    compile(query.selectors[index])\n  }\n\n  return query\n}\n\n/**\n * @param {RuleSet} query\n * @returns {Rule}\n */\nfunction ruleSet(query) {\n  return rule(query.rule)\n}\n\n/**\n * @param {Rule} query\n * @returns {Rule}\n */\nfunction rule(query) {\n  const pseudos = query.pseudos || []\n  let index = -1\n\n  while (++index < pseudos.length) {\n    const pseudo = pseudos[index]\n\n    if (nth.has(pseudo.name)) {\n      // @ts-expect-error Patch a non-primitive type.\n      pseudo.value = nthCheck(pseudo.value)\n      // @ts-expect-error Patch a non-primitive type.\n      pseudo.valueType = 'function'\n    }\n  }\n\n  compile(query.rule)\n\n  return query\n}\n","/**\n * @typedef {import('./lib/types.js').Element} Element\n * @typedef {import('./lib/types.js').HastNode} HastNode\n * @typedef {import('./lib/types.js').Space} Space\n */\n\nimport {any} from './lib/any.js'\nimport {parse} from './lib/parse.js'\n\n/**\n * @param {string} selector\n * @param {HastNode} [node]\n * @param {Space} [space]\n * @returns {boolean}\n */\nexport function matches(selector, node, space) {\n  return Boolean(\n    any(parse(selector), node, {space, one: true, shallow: true})[0]\n  )\n}\n\n/**\n * @param {string} selector\n * @param {HastNode} [node]\n * @param {Space} [space]\n * @returns {Element|null}\n */\nexport function select(selector, node, space) {\n  return any(parse(selector), node, {space, one: true})[0] || null\n}\n\n/**\n * @param {string} selector\n * @param {HastNode} [node]\n * @param {Space} [space]\n * @returns {Array.<Element>}\n */\nexport function selectAll(selector, node, space) {\n  return any(parse(selector), node, {space})\n}\n","import { Plugin } from 'unified';\nimport { Root, Element, ElementContent, RootContent } from 'hast';\nimport { visit } from 'unist-util-visit';\nimport { selectAll } from 'hast-util-select';\nimport { Test } from 'unist-util-is';\n\n/** Get the node tree source code string */\nexport const getCodeString = (data: ElementContent[] = [], code: string = '') => {\n  data.forEach((node) => {\n    if (node.type === 'text') {\n      code += node.value;\n    } else if (node.type === 'element' && node.children && Array.isArray(node.children)) {\n      code += getCodeString(node.children);\n    }\n  });\n  return code;\n};\n\nexport type RehypeRewriteOptions = {\n  /**\n   * Select an element to be wrapped. Expects a string selector that can be passed to hast-util-select ([supported selectors](https://github.com/syntax-tree/hast-util-select/blob/master/readme.md#support)).\n   * If `selector` is not set then wrap will check for a body all elements.\n   */\n  selector?: string;\n  /** Rewrite Element. */\n  rewrite(node: Root | RootContent, index: number | null, parent: Root | Element | null): void;\n}\n\nconst remarkRewrite: Plugin<[RehypeRewriteOptions?], Root> = (options) => {\n  const { selector, rewrite } = options || {};\n  return (tree) => {\n    if (!rewrite || typeof rewrite !== 'function') return;\n    if (selector && typeof selector === 'string') {\n      const selected = selectAll(selector, tree);\n      if (selected && selected.length > 0) {\n        visit(tree, selected as unknown as Test, (node: Element, index, parent) => {\n          rewrite(node, index, parent);\n        });\n      }\n      return;\n    }\n\n    visit(tree, (node: Root | RootContent, index, parent) => {\n      rewrite(node, index, parent);\n    });\n  }\n}\n\nexport default remarkRewrite;\n","import { Element } from 'hast';\n\nexport const octiconLink: Element = {\n  type: 'element',\n  tagName: 'svg',\n  properties: {\n    className: 'octicon octicon-link',\n    viewBox: '0 0 16 16',\n    version: '1.1',\n    width: '16',\n    height: '16',\n    ariaHidden: 'true',\n  },\n  children: [\n    {\n      type: 'element',\n      tagName: 'path',\n      children: [],\n      properties: {\n        fillRule: 'evenodd',\n        d: 'M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z',\n      },\n    },\n  ],\n};\n","import { Plugin } from 'unified';\nimport { Root, RootContent } from 'hast';\nimport { visit } from 'unist-util-visit';\n\nexport interface ReservedMetaOptions {}\n\nexport const reservedMeta: Plugin<[ReservedMetaOptions?], Root> = (options = {}) => {\n  return (tree) => {\n    visit(tree, (node: Root | RootContent) => {\n      if (node.type === 'element' && node.tagName === 'code' && node.data && node.data.meta) {\n        node.properties = { ...node.properties, 'data-meta': String(node.data.meta) };\n      }\n    });\n  };\n};\n","import React, { useImperativeHandle } from 'react';\nimport ReactMarkdown, { Options } from 'react-markdown';\nimport { Root, Element, ElementContent } from 'hast';\nimport { PluggableList } from 'unified';\nimport gfm from 'remark-gfm';\nimport slug from 'rehype-slug';\nimport headings from 'rehype-autolink-headings';\nimport rehypeRaw from 'rehype-raw';\nimport rehypeAttrs from 'rehype-attr';\nimport rehypePrism from 'rehype-prism-plus';\nimport rehypeRewrite, { getCodeString } from 'rehype-rewrite';\nimport { octiconLink } from './nodes/octiconLink';\nimport { copyElement } from './nodes/copy';\nimport './styles/markdown.less';\n\nimport { reservedMeta } from './plugins/reservedMeta';\n\nexport interface MarkdownPreviewProps extends Omit<Options, 'children'> {\n  prefixCls?: string;\n  className?: string;\n  source?: string;\n  disableCopy?: boolean;\n  style?: React.CSSProperties;\n  pluginsFilter?: (type: 'rehype' | 'remark', plugin: PluggableList) => PluggableList;\n  warpperElement?: React.DetailedHTMLProps<React.HTMLAttributes<HTMLDivElement>, HTMLDivElement>;\n  onScroll?: (e: React.UIEvent<HTMLDivElement>) => void;\n  onMouseOver?: (e: React.MouseEvent<HTMLDivElement>) => void;\n}\n\nexport interface MarkdownPreviewRef extends MarkdownPreviewProps {\n  mdp: React.RefObject<HTMLDivElement>;\n}\n\nexport default React.forwardRef<MarkdownPreviewRef, MarkdownPreviewProps>((props, ref) => {\n  const {\n    prefixCls = 'wmde-markdown wmde-markdown-color',\n    className,\n    source,\n    style,\n    disableCopy = false,\n    onScroll,\n    onMouseOver,\n    pluginsFilter,\n    warpperElement = {},\n    ...other\n  } = props;\n  const mdp = React.createRef<HTMLDivElement>();\n  useImperativeHandle(ref, () => ({ ...props, mdp }), [mdp, props]);\n  const cls = `${prefixCls || ''} ${className || ''}`;\n\n  const rehypeRewriteHandle = (node: ElementContent, index: number | null, parent: Root | Element | null) => {\n    if (node.type === 'element' && parent && parent.type === 'root' && /h(1|2|3|4|5|6)/.test(node.tagName)) {\n      const child = node.children && (node.children[0] as Element);\n      if (child && child.properties && child.properties.ariaHidden === 'true') {\n        child.properties = { class: 'anchor', ...child.properties };\n        child.children = [octiconLink];\n      }\n    }\n    if (node.type === 'element' && node.tagName === 'pre' && !disableCopy) {\n      const code = getCodeString(node.children);\n      node.children.push(copyElement(code));\n    }\n  };\n\n  const rehypePlugins: PluggableList = [\n    reservedMeta,\n    [rehypePrism, { ignoreMissing: true }],\n    rehypeRaw,\n    slug,\n    headings,\n    [rehypeRewrite, { rewrite: rehypeRewriteHandle }],\n    [rehypeAttrs, { properties: 'attr' }],\n    ...(other.rehypePlugins || []),\n  ];\n  const remarkPlugins = [...(other.remarkPlugins || []), gfm];\n  return (\n    <div ref={mdp} onScroll={onScroll} onMouseOver={onMouseOver} {...warpperElement} className={cls} style={style}>\n      <ReactMarkdown\n        {...other}\n        rehypePlugins={pluginsFilter ? pluginsFilter('rehype', rehypePlugins) : rehypePlugins}\n        remarkPlugins={pluginsFilter ? pluginsFilter('remark', remarkPlugins) : remarkPlugins}\n        children={source || ''}\n      />\n    </div>\n  );\n});\n","import { Element } from 'hast';\nimport copyTextToClipboard from '@uiw/copy-to-clipboard';\n\nexport function copyElement(str: string = ''): Element {\n  return {\n    type: 'element',\n    tagName: 'div',\n    properties: {\n      // @ts-ignore\n      onClick: (event) => {\n        const target = event.currentTarget || event.target;\n        target.classList.add('active');\n        copyTextToClipboard(target.dataset.code as string, function () {\n          setTimeout(() => {\n            target.classList.remove('active');\n          }, 2000);\n        });\n      },\n      'data-code': str,\n      class: 'copied',\n    },\n    children: [\n      {\n        type: 'element',\n        tagName: 'svg',\n        properties: {\n          className: 'octicon-copy',\n          ariaHidden: 'true',\n          viewBox: '0 0 16 16',\n          fill: 'currentColor',\n          height: 12,\n          width: 12,\n        },\n        children: [\n          {\n            type: 'element',\n            tagName: 'path',\n            properties: {\n              fillRule: 'evenodd',\n              d: 'M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z',\n            },\n            children: [],\n          },\n          {\n            type: 'element',\n            tagName: 'path',\n            properties: {\n              fillRule: 'evenodd',\n              d: 'M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z',\n            },\n            children: [],\n          },\n        ],\n      },\n      {\n        type: 'element',\n        tagName: 'svg',\n        properties: {\n          className: 'octicon-check',\n          ariaHidden: 'true',\n          viewBox: '0 0 16 16',\n          fill: 'currentColor',\n          height: 12,\n          width: 12,\n        },\n        children: [\n          {\n            type: 'element',\n            tagName: 'path',\n            properties: {\n              fillRule: 'evenodd',\n              d: 'M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z',\n            },\n            children: [],\n          },\n        ],\n      },\n    ],\n  };\n}\n","import React from 'react';\nimport { ICommand, TextAreaCommandOrchestrator } from './commands';\n\nexport type PreviewType = 'live' | 'edit' | 'preview';\n\nexport type ContextStore = {\n  commands?: ICommand<string>[];\n  extraCommands?: ICommand<string>[];\n  markdown?: string;\n  preview?: PreviewType;\n  height?: number;\n  fullscreen?: boolean;\n  highlightEnable?: boolean;\n  autoFocus?: boolean;\n  textarea?: HTMLTextAreaElement;\n  commandOrchestrator?: TextAreaCommandOrchestrator;\n  textareaWarp?: HTMLDivElement;\n  textareaPre?: HTMLPreElement;\n  container?: HTMLDivElement | null;\n  dispatch?: React.Dispatch<ContextStore>;\n  barPopup?: Record<string, boolean>;\n  scrollTop?: number;\n  scrollTopPreview?: number;\n  tabSize?: number;\n  defaultTabEnable?: boolean;\n};\n\nexport type ExecuteCommandState = Pick<ContextStore, 'fullscreen' | 'preview' | 'highlightEnable'>;\n\nexport function reducer(state: ContextStore, action: ContextStore) {\n  return { ...state, ...action };\n}\n\nexport const EditorContext = React.createContext<ContextStore>({ markdown: '' });\n","import { ICommand, TextAreaCommandOrchestrator } from '../../commands';\nimport { ContextStore, ExecuteCommandState } from '../../Context';\n\nfunction getCommands(data: ICommand[] = [], resulte: Record<string, ICommand> = {}): Record<string, ICommand> {\n  data.forEach((item) => {\n    if (item.children && Array.isArray(item.children)) {\n      resulte = { ...resulte, ...getCommands(item.children || []) };\n    } else if (item.keyCommand && item.shortcuts && item.execute) {\n      resulte[item.shortcuts.toLocaleLowerCase()] = item;\n    }\n  });\n  return resulte;\n}\n\nexport default function shortcutsHandle(\n  e: KeyboardEvent | React.KeyboardEvent<HTMLTextAreaElement>,\n  commands: ICommand[] = [],\n  commandOrchestrator?: TextAreaCommandOrchestrator,\n  dispatch?: React.Dispatch<ContextStore>,\n  state?: ExecuteCommandState,\n) {\n  const data = getCommands(commands || []);\n  const shortcuts: (string | number)[] = [];\n  if (e.altKey) {\n    shortcuts.push('alt');\n  }\n  if (e.shiftKey) {\n    shortcuts.push('shift');\n  }\n  if (e.metaKey) {\n    shortcuts.push('cmd');\n  }\n  if (e.ctrlKey) {\n    shortcuts.push('ctrl');\n  }\n  if (shortcuts.length > 0 && !/(control|alt|meta|shift)/.test(e.key.toLocaleLowerCase())) {\n    shortcuts.push(e.key.toLocaleLowerCase());\n  }\n  if (/escape/.test(e.key.toLocaleLowerCase())) {\n    shortcuts.push('escape');\n  }\n  if (shortcuts.length < 1) {\n    return;\n  }\n\n  let equal = !!data[shortcuts.join('+')];\n  let command = equal ? data[shortcuts.join('+')] : undefined;\n\n  Object.keys(data).forEach((item) => {\n    const isequal = item.split('+').every((v) => {\n      if (/ctrlcmd/.test(v)) {\n        return shortcuts.includes('ctrl') || shortcuts.includes('cmd');\n      }\n      return shortcuts.includes(v);\n    });\n    if (isequal) {\n      command = data[item];\n    }\n  });\n  if (command && commandOrchestrator) {\n    e.stopPropagation();\n    e.preventDefault();\n    commandOrchestrator.executeCommand(command, dispatch, state);\n    return;\n  }\n}\n","import {unified} from 'unified'\nimport rehypeParse from 'rehype-parse'\nimport rehypeStringify from 'rehype-stringify'\n\nexport const rehype = unified().use(rehypeParse).use(rehypeStringify).freeze()\n","import React, { useContext, useEffect, useMemo } from 'react';\nimport { rehype } from 'rehype';\nimport rehypePrism from 'rehype-prism-plus';\nimport { IProps } from '../../Editor';\nimport { EditorContext } from '../../Context';\n\nexport interface MarkdownProps extends IProps, React.HTMLAttributes<HTMLPreElement> {}\n\nexport default function Markdown(props: MarkdownProps) {\n  const { prefixCls } = props;\n  const { markdown = '', dispatch } = useContext(EditorContext);\n  const preRef = React.createRef<HTMLPreElement>();\n  useEffect(() => {\n    if (preRef.current && dispatch) {\n      dispatch({ textareaPre: preRef.current });\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  function html2Escape(sHtml: string) {\n    return sHtml\n      .replace(/```(tsx?|jsx?|html|xml)(.*)\\s+([\\s\\S]*?)(\\s.+)?```/g, (str: string) => {\n        return str.replace(\n          /[<&\"]/g,\n          (c: string) => (({ '<': '&lt;', '>': '&gt;', '&': '&amp;', '\"': '&quot;' } as Record<string, string>)[c]),\n        );\n      })\n      .replace(\n        /[<&\"]/g,\n        (c: string) => (({ '<': '&lt;', '>': '&gt;', '&': '&amp;', '\"': '&quot;' } as Record<string, string>)[c]),\n      );\n  }\n\n  return useMemo(() => {\n    if (!markdown) {\n      return <pre children={markdown || ''} ref={preRef} className={`${prefixCls}-text-pre wmde-markdown-color`} />;\n    }\n    const str = rehype()\n      .data('settings', { fragment: true })\n      .use(rehypePrism, { ignoreMissing: true })\n      .processSync(\n        `<pre class=\"language-markdown ${prefixCls}-text-pre wmde-markdown-color\"><code class=\"language-markdown\">${html2Escape(\n          markdown,\n        )}\\n</code></pre>`,\n      );\n    return React.createElement('div', {\n      className: 'wmde-markdown-color',\n      dangerouslySetInnerHTML: { __html: str.value as string },\n    });\n  }, [markdown, preRef, prefixCls]);\n}\n","import { TextRange } from '../commands';\n\nexport interface TextSection {\n  text: string;\n  selection: TextRange;\n}\n\nexport function selectWord({ text, selection }: TextSection): TextRange {\n  if (text && text.length && selection.start === selection.end) {\n    // the user is pointing to a word\n    return getSurroundingWord(text, selection.start);\n  }\n  return selection;\n}\n\n/**\n *  Gets the number of line-breaks that would have to be inserted before the given 'startPosition'\n *  to make sure there's an empty line between 'startPosition' and the previous text\n */\nexport function getBreaksNeededForEmptyLineBefore(text = '', startPosition: number): number {\n  if (startPosition === 0) return 0;\n\n  // rules:\n  // - If we're in the first line, no breaks are needed\n  // - Otherwise there must be 2 breaks before the previous character. Depending on how many breaks exist already, we\n  //      may need to insert 0, 1 or 2 breaks\n\n  let neededBreaks = 2;\n  let isInFirstLine = true;\n  for (let i = startPosition - 1; i >= 0 && neededBreaks >= 0; i--) {\n    switch (text.charCodeAt(i)) {\n      case 32: // blank space\n        continue;\n      case 10: // line break\n        neededBreaks--;\n        isInFirstLine = false;\n        break;\n      default:\n        return neededBreaks;\n    }\n  }\n  return isInFirstLine ? 0 : neededBreaks;\n}\n\n/**\n *  Gets the number of line-breaks that would have to be inserted after the given 'startPosition'\n *  to make sure there's an empty line between 'startPosition' and the next text\n */\nexport function getBreaksNeededForEmptyLineAfter(text = '', startPosition: number): number {\n  if (startPosition === text.length - 1) return 0;\n\n  // rules:\n  // - If we're in the first line, no breaks are needed\n  // - Otherwise there must be 2 breaks before the previous character. Depending on how many breaks exist already, we\n  //      may need to insert 0, 1 or 2 breaks\n\n  let neededBreaks = 2;\n  let isInLastLine = true;\n  for (let i = startPosition; i < text.length && neededBreaks >= 0; i++) {\n    switch (text.charCodeAt(i)) {\n      case 32:\n        continue;\n      case 10: {\n        neededBreaks--;\n        isInLastLine = false;\n        break;\n      }\n      default:\n        return neededBreaks;\n    }\n  }\n  return isInLastLine ? 0 : neededBreaks;\n}\n\nexport function getSurroundingWord(text: string, position: number): TextRange {\n  if (!text) throw Error(\"Argument 'text' should be truthy\");\n\n  const isWordDelimiter = (c: string) => c === ' ' || c.charCodeAt(0) === 10;\n\n  // leftIndex is initialized to 0 because if selection is 0, it won't even enter the iteration\n  let start = 0;\n  // rightIndex is initialized to text.length because if selection is equal to text.length it won't even enter the interation\n  let end = text.length;\n\n  // iterate to the left\n  for (let i = position; i - 1 > -1; i--) {\n    if (isWordDelimiter(text[i - 1])) {\n      start = i;\n      break;\n    }\n  }\n\n  // iterate to the right\n  for (let i = position; i < text.length; i++) {\n    if (isWordDelimiter(text[i])) {\n      end = i;\n      break;\n    }\n  }\n\n  return { start, end };\n}\n","import * as React from 'react';\nimport { ICommand, TextState, TextAreaTextApi } from './';\nimport { selectWord } from '../utils/markdownUtils';\n\nexport const bold: ICommand = {\n  name: 'bold',\n  keyCommand: 'bold',\n  shortcuts: 'ctrlcmd+b',\n  buttonProps: { 'aria-label': 'Add bold text', title: 'Add bold text' },\n  icon: (\n    <svg role=\"img\" width=\"12\" height=\"12\" viewBox=\"0 0 384 512\">\n      <path\n        fill=\"currentColor\"\n        d=\"M304.793 243.891c33.639-18.537 53.657-54.16 53.657-95.693 0-48.236-26.25-87.626-68.626-104.179C265.138 34.01 240.849 32 209.661 32H24c-8.837 0-16 7.163-16 16v33.049c0 8.837 7.163 16 16 16h33.113v318.53H24c-8.837 0-16 7.163-16 16V464c0 8.837 7.163 16 16 16h195.69c24.203 0 44.834-1.289 66.866-7.584C337.52 457.193 376 410.647 376 350.014c0-52.168-26.573-91.684-71.207-106.123zM142.217 100.809h67.444c16.294 0 27.536 2.019 37.525 6.717 15.828 8.479 24.906 26.502 24.906 49.446 0 35.029-20.32 56.79-53.029 56.79h-76.846V100.809zm112.642 305.475c-10.14 4.056-22.677 4.907-31.409 4.907h-81.233V281.943h84.367c39.645 0 63.057 25.38 63.057 63.057.001 28.425-13.66 52.483-34.782 61.284z\"\n      />\n    </svg>\n  ),\n  execute: (state: TextState, api: TextAreaTextApi) => {\n    // Adjust the selection to encompass the whole word if the caret is inside one\n    const newSelectionRange = selectWord({ text: state.text, selection: state.selection });\n    const state1 = api.setSelectionRange(newSelectionRange);\n    // Replaces the current selection with the bold mark up\n    const state2 = api.replaceSelection(`**${state1.selectedText}**`);\n    // Adjust the selection to not contain the **\n    api.setSelectionRange({\n      start: state2.selection.end - 2 - state1.selectedText.length,\n      end: state2.selection.end - 2,\n    });\n  },\n};\n","import * as React from 'react';\nimport { ICommand, TextState, TextAreaTextApi } from './';\nimport {\n  selectWord,\n  getBreaksNeededForEmptyLineBefore,\n  getBreaksNeededForEmptyLineAfter,\n} from '../utils/markdownUtils';\n\nexport const code: ICommand = {\n  name: 'code',\n  keyCommand: 'code',\n  shortcuts: 'ctrlcmd+j',\n  buttonProps: { 'aria-label': 'Insert code', title: 'Insert code' },\n  icon: (\n    <svg width=\"12\" height=\"12\" role=\"img\" viewBox=\"0 0 640 512\">\n      <path\n        fill=\"currentColor\"\n        d=\"M278.9 511.5l-61-17.7c-6.4-1.8-10-8.5-8.2-14.9L346.2 8.7c1.8-6.4 8.5-10 14.9-8.2l61 17.7c6.4 1.8 10 8.5 8.2 14.9L293.8 503.3c-1.9 6.4-8.5 10.1-14.9 8.2zm-114-112.2l43.5-46.4c4.6-4.9 4.3-12.7-.8-17.2L117 256l90.6-79.7c5.1-4.5 5.5-12.3.8-17.2l-43.5-46.4c-4.5-4.8-12.1-5.1-17-.5L3.8 247.2c-5.1 4.7-5.1 12.8 0 17.5l144.1 135.1c4.9 4.6 12.5 4.4 17-.5zm327.2.6l144.1-135.1c5.1-4.7 5.1-12.8 0-17.5L492.1 112.1c-4.8-4.5-12.4-4.3-17 .5L431.6 159c-4.6 4.9-4.3 12.7.8 17.2L523 256l-90.6 79.7c-5.1 4.5-5.5 12.3-.8 17.2l43.5 46.4c4.5 4.9 12.1 5.1 17 .6z\"\n      />\n    </svg>\n  ),\n  execute: (tate: TextState, api: TextAreaTextApi) => {\n    // Adjust the selection to encompass the whole word if the caret is inside one\n    const newSelectionRange = selectWord({ text: tate.text, selection: tate.selection });\n    const state1 = api.setSelectionRange(newSelectionRange);\n    // when there's no breaking line\n    if (state1.selectedText.indexOf('\\n') === -1) {\n      api.replaceSelection(`\\`${state1.selectedText}\\``);\n      // Adjust the selection to not contain the **\n\n      const selectionStart = state1.selection.start + 1;\n      const selectionEnd = selectionStart + state1.selectedText.length;\n\n      api.setSelectionRange({\n        start: selectionStart,\n        end: selectionEnd,\n      });\n      return;\n    }\n\n    const breaksBeforeCount = getBreaksNeededForEmptyLineBefore(state1.text, state1.selection.start);\n    const breaksBefore = Array(breaksBeforeCount + 1).join('\\n');\n\n    const breaksAfterCount = getBreaksNeededForEmptyLineAfter(state1.text, state1.selection.end);\n    const breaksAfter = Array(breaksAfterCount + 1).join('\\n');\n\n    api.replaceSelection(`${breaksBefore}\\`\\`\\`\\n${state1.selectedText}\\n\\`\\`\\`${breaksAfter}`);\n\n    const selectionStart = state1.selection.start + breaksBeforeCount + 4;\n    const selectionEnd = selectionStart + state1.selectedText.length;\n\n    api.setSelectionRange({\n      start: selectionStart,\n      end: selectionEnd,\n    });\n  },\n};\n\nexport const codeBlock: ICommand = {\n  name: 'codeBlock',\n  keyCommand: 'codeBlock',\n  shortcuts: 'ctrlcmd+shift+j',\n  icon: (\n    <svg width=\"12\" height=\"12\" role=\"img\" viewBox=\"0 0 156 156\">\n      <path\n        fill=\"currentColor\"\n        d=\"M110.85 120.575 43.7 120.483333 43.7083334 110.091667 110.85 110.191667 110.841667 120.583333 110.85 120.575ZM85.1333334 87.1916666 43.625 86.7083332 43.7083334 76.3166666 85.2083334 76.7916666 85.1333334 87.1916666 85.1333334 87.1916666ZM110.841667 53.4166666 43.7 53.3166666 43.7083334 42.925 110.85 43.025 110.841667 53.4166666ZM36 138C27.2916666 138 20.75 136.216667 16.4 132.666667 12.1333334 129.2 10 124.308333 10 118L10 95.3333332C10 91.0666666 9.25 88.1333332 7.7333334 86.5333332 6.3166668 84.8416666 3.7333334 84 0 84L0 72C3.7333334 72 6.3083334 71.2 7.7333334 69.6 9.2416668 67.9083334 10 64.9333334 10 60.6666666L10 38C10 31.775 12.1333334 26.8833334 16.4 23.3333332 20.7583334 19.7749998 27.2916666 18 36 18L40.6666668 18 40.6666668 30 36 30C34.0212222 29.9719277 32.1263151 30.7979128 30.8 32.2666666 29.3605875 33.8216362 28.5938182 35.8823287 28.6666668 38L28.6666668 60.6666666C28.6666668 67.5083332 26.6666668 72.4 22.6666668 75.3333332 20.9317416 76.7274684 18.8640675 77.6464347 16.6666668 78 18.8916668 78.35 20.8916668 79.2416666 22.6666668 80.6666666 26.6666668 83.95 28.6666668 88.8416666 28.6666668 95.3333332L28.6666668 118C28.6666668 120.308333 29.3750002 122.216667 30.8 123.733333 32.2166666 125.241667 33.9583334 126 36 126L40.6666668 126 40.6666668 138 36 138 36 138ZM114.116667 126 118.783333 126C120.833333 126 122.566667 125.241667 123.983333 123.733333 125.422746 122.178364 126.189515 120.117671 126.116667 118L126.116667 95.3333332C126.116667 88.8333332 128.116667 83.9499998 132.116667 80.6666666 133.9 79.2416666 135.9 78.35 138.116667 78 135.919156 77.6468047 133.851391 76.7277979 132.116667 75.3333332 128.116667 72.3999998 126.116667 67.5 126.116667 60.6666666L126.116667 38C126.189515 35.8823287 125.422746 33.8216361 123.983333 32.2666666 122.657018 30.7979128 120.762111 29.9719277 118.783333 30L114.116667 30 114.116667 18 118.783333 18C127.5 18 133.983333 19.775 138.25 23.3333332 142.608333 26.8833332 144.783333 31.7749998 144.783333 38L144.783333 60.6666666C144.783333 64.9333332 145.5 67.9083332 146.916667 69.6 148.433333 71.2 151.05 72 154.783333 72L154.783333 84C151.05 84 148.433333 84.8333334 146.916667 86.5333332 145.5 88.1333332 144.783333 91.0666666 144.783333 95.3333332L144.783333 118C144.783333 124.308333 142.616667 129.2 138.25 132.666667 133.983333 136.216667 127.5 138 118.783333 138L114.116667 138 114.116667 126 114.116667 126Z\"\n      />\n    </svg>\n  ),\n  buttonProps: { 'aria-label': 'Insert Code Block', title: 'Insert Code Block' },\n  execute: (tate: TextState, api: TextAreaTextApi) => {\n    // Adjust the selection to encompass the whole word if the caret is inside one\n    const newSelectionRange = selectWord({ text: tate.text, selection: tate.selection });\n    const state1 = api.setSelectionRange(newSelectionRange);\n\n    const breaksBeforeCount = getBreaksNeededForEmptyLineBefore(state1.text, state1.selection.start);\n    const breaksBefore = Array(breaksBeforeCount + 1).join('\\n');\n\n    const breaksAfterCount = getBreaksNeededForEmptyLineAfter(state1.text, state1.selection.end);\n    const breaksAfter = Array(breaksAfterCount + 1).join('\\n');\n\n    api.replaceSelection(`${breaksBefore}\\`\\`\\`\\n${state1.selectedText}\\n\\`\\`\\`${breaksAfter}`);\n\n    const selectionStart = state1.selection.start + breaksBeforeCount + 4;\n    const selectionEnd = selectionStart + state1.selectedText.length;\n\n    api.setSelectionRange({\n      start: selectionStart,\n      end: selectionEnd,\n    });\n  },\n};\n","import * as React from 'react';\nimport { ICommand, TextState, TextAreaTextApi } from './';\nimport { selectWord } from '../utils/markdownUtils';\n\nexport const italic: ICommand = {\n  name: 'italic',\n  keyCommand: 'italic',\n  shortcuts: 'ctrlcmd+i',\n  buttonProps: { 'aria-label': 'Add italic text', title: 'Add italic text' },\n  icon: (\n    <svg data-name=\"italic\" width=\"12\" height=\"12\" role=\"img\" viewBox=\"0 0 320 512\">\n      <path\n        fill=\"currentColor\"\n        d=\"M204.758 416h-33.849l62.092-320h40.725a16 16 0 0 0 15.704-12.937l6.242-32C297.599 41.184 290.034 32 279.968 32H120.235a16 16 0 0 0-15.704 12.937l-6.242 32C96.362 86.816 103.927 96 113.993 96h33.846l-62.09 320H46.278a16 16 0 0 0-15.704 12.935l-6.245 32C22.402 470.815 29.967 480 40.034 480h158.479a16 16 0 0 0 15.704-12.935l6.245-32c1.927-9.88-5.638-19.065-15.704-19.065z\"\n      />\n    </svg>\n  ),\n  execute: (state: TextState, api: TextAreaTextApi) => {\n    // Adjust the selection to encompass the whole word if the caret is inside one\n    const newSelectionRange = selectWord({ text: state.text, selection: state.selection });\n    const state1 = api.setSelectionRange(newSelectionRange);\n    // Replaces the current selection with the italic mark up\n    const state2 = api.replaceSelection(`*${state1.selectedText}*`);\n    // Adjust the selection to not contain the *\n    api.setSelectionRange({\n      start: state2.selection.end - 1 - state1.selectedText.length,\n      end: state2.selection.end - 1,\n    });\n  },\n};\n","import * as React from 'react';\nimport { ICommand, TextState, TextAreaTextApi } from './';\nimport { selectWord } from '../utils/markdownUtils';\n\nexport const link: ICommand = {\n  name: 'link',\n  keyCommand: 'link',\n  shortcuts: 'ctrlcmd+k',\n  buttonProps: { 'aria-label': 'Add a link', title: 'Add a link' },\n  icon: (\n    <svg data-name=\"italic\" width=\"12\" height=\"12\" role=\"img\" viewBox=\"0 0 520 520\">\n      <path\n        fill=\"currentColor\"\n        d=\"M331.751196,182.121107 C392.438214,241.974735 391.605313,337.935283 332.11686,396.871226 C332.005129,396.991316 331.873084,397.121413 331.751196,397.241503 L263.493918,464.491645 C203.291404,523.80587 105.345257,523.797864 45.151885,464.491645 C-15.0506283,405.187427 -15.0506283,308.675467 45.151885,249.371249 L82.8416853,212.237562 C92.836501,202.39022 110.049118,208.9351 110.56511,222.851476 C111.223305,240.5867 114.451306,258.404985 120.407566,275.611815 C122.424812,281.438159 120.983487,287.882964 116.565047,292.23621 L103.272145,305.332975 C74.8052033,333.379887 73.9123737,379.047937 102.098973,407.369054 C130.563883,435.969378 177.350591,436.139505 206.033884,407.879434 L274.291163,340.6393 C302.9257,312.427264 302.805844,266.827265 274.291163,238.733318 C270.531934,235.036561 266.74528,232.16442 263.787465,230.157924 C259.544542,227.2873 256.928256,222.609848 256.731165,217.542518 C256.328935,206.967633 260.13184,196.070508 268.613213,187.714278 L289.998463,166.643567 C295.606326,161.118448 304.403592,160.439942 310.906317,164.911276 C318.353355,170.034591 325.328531,175.793397 331.751196,182.121107 Z M240.704978,55.4828366 L172.447607,122.733236 C172.325719,122.853326 172.193674,122.983423 172.081943,123.103513 C117.703294,179.334654 129.953294,261.569283 185.365841,328.828764 C191.044403,335.721376 198.762988,340.914712 206.209732,346.037661 C212.712465,350.509012 221.510759,349.829503 227.117615,344.305363 L248.502893,323.234572 C256.984277,314.87831 260.787188,303.981143 260.384957,293.406218 C260.187865,288.338869 257.571576,283.661398 253.328648,280.790763 C250.370829,278.78426 246.58417,275.912107 242.824936,272.215337 C214.310216,244.121282 206.209732,204.825874 229.906702,179.334654 L298.164073,112.094263 C326.847404,83.8340838 373.633159,84.0042113 402.099123,112.604645 C430.285761,140.92587 429.393946,186.594095 400.92595,214.641114 L387.63303,227.737929 C383.214584,232.091191 381.773257,238.536021 383.790506,244.362388 C389.746774,261.569283 392.974779,279.387637 393.632975,297.122928 C394.149984,311.039357 411.361608,317.584262 421.356437,307.736882 L459.046288,270.603053 C519.249898,211.29961 519.249898,114.787281 459.047304,55.4828366 C398.853851,-3.82360914 300.907572,-3.83161514 240.704978,55.4828366 Z\"\n      />\n    </svg>\n  ),\n  execute: (state: TextState, api: TextAreaTextApi) => {\n    // Adjust the selection to encompass the whole word if the caret is inside one\n    const newSelectionRange = selectWord({ text: state.text, selection: state.selection });\n    const state1 = api.setSelectionRange(newSelectionRange);\n    // Replaces the current selection with the bold mark up\n    const state2 = api.replaceSelection(`[${state1.selectedText}](url)`);\n    // Adjust the selection to not contain the **\n    api.setSelectionRange({\n      start: state2.selection.end - 6 - state1.selectedText.length,\n      end: state2.selection.end - 6,\n    });\n  },\n};\n","import * as React from 'react';\nimport { ICommand, TextState, TextAreaTextApi } from './';\nimport {\n  selectWord,\n  getBreaksNeededForEmptyLineBefore,\n  getBreaksNeededForEmptyLineAfter,\n} from '../utils/markdownUtils';\n\nexport type AlterLineFunction = (line: string, index: number) => string;\n\n/**\n * Inserts insertionString before each line\n */\nexport function insertBeforeEachLine(\n  selectedText: string,\n  insertBefore: string | AlterLineFunction,\n): { modifiedText: string; insertionLength: number } {\n  const lines = selectedText.split(/\\n/);\n\n  let insertionLength = 0;\n  const modifiedText = lines\n    .map((item, index) => {\n      if (typeof insertBefore === 'string') {\n        insertionLength += insertBefore.length;\n        return insertBefore + item;\n      } else if (typeof insertBefore === 'function') {\n        const insertionResult = insertBefore(item, index);\n        insertionLength += insertionResult.length;\n        return insertBefore(item, index) + item;\n      }\n      throw Error('insertion is expected to be either a string or a function');\n    })\n    .join('\\n');\n\n  return { modifiedText, insertionLength };\n}\n\nexport const makeList = (state: TextState, api: TextAreaTextApi, insertBefore: string | AlterLineFunction) => {\n  // Adjust the selection to encompass the whole word if the caret is inside one\n  const newSelectionRange = selectWord({ text: state.text, selection: state.selection });\n  const state1 = api.setSelectionRange(newSelectionRange);\n\n  const breaksBeforeCount = getBreaksNeededForEmptyLineBefore(state1.text, state1.selection.start);\n  const breaksBefore = Array(breaksBeforeCount + 1).join('\\n');\n\n  const breaksAfterCount = getBreaksNeededForEmptyLineAfter(state1.text, state1.selection.end);\n  const breaksAfter = Array(breaksAfterCount + 1).join('\\n');\n\n  const modifiedText = insertBeforeEachLine(state1.selectedText, insertBefore);\n\n  api.replaceSelection(`${breaksBefore}${modifiedText.modifiedText}${breaksAfter}`);\n\n  // Specifically when the text has only one line, we can exclude the \"- \", for example, from the selection\n  const oneLinerOffset = state1.selectedText.indexOf('\\n') === -1 ? modifiedText.insertionLength : 0;\n\n  const selectionStart = state1.selection.start + breaksBeforeCount + oneLinerOffset;\n  const selectionEnd = selectionStart + modifiedText.modifiedText.length - oneLinerOffset;\n\n  // Adjust the selection to not contain the **\n  api.setSelectionRange({\n    start: selectionStart,\n    end: selectionEnd,\n  });\n};\n\nexport const unorderedListCommand: ICommand = {\n  name: 'unordered-list',\n  keyCommand: 'list',\n  shortcuts: 'ctrl+shift+l',\n  buttonProps: { 'aria-label': 'Add unordered list', title: 'Add unordered list' },\n  icon: (\n    <svg data-name=\"unordered-list\" width=\"12\" height=\"12\" viewBox=\"0 0 512 512\">\n      <path\n        fill=\"currentColor\"\n        d=\"M96 96c0 26.51-21.49 48-48 48S0 122.51 0 96s21.49-48 48-48 48 21.49 48 48zM48 208c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zm0 160c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zm96-236h352c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H144c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h352c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H144c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h352c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H144c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z\"\n      />\n    </svg>\n  ),\n  execute: (state: TextState, api: TextAreaTextApi) => {\n    makeList(state, api, '- ');\n  },\n};\n\nexport const orderedListCommand: ICommand = {\n  name: 'ordered-list',\n  keyCommand: 'list',\n  shortcuts: 'ctrl+shift+o',\n  buttonProps: { 'aria-label': 'Add ordered list', title: 'Add ordered list' },\n  icon: (\n    <svg data-name=\"ordered-list\" width=\"12\" height=\"12\" role=\"img\" viewBox=\"0 0 512 512\">\n      <path\n        fill=\"currentColor\"\n        d=\"M3.263 139.527c0-7.477 3.917-11.572 11.573-11.572h15.131V88.078c0-5.163.534-10.503.534-10.503h-.356s-1.779 2.67-2.848 3.738c-4.451 4.273-10.504 4.451-15.666-1.068l-5.518-6.231c-5.342-5.341-4.984-11.216.534-16.379l21.72-19.938C32.815 33.602 36.732 32 42.785 32H54.89c7.656 0 11.749 3.916 11.749 11.572v84.384h15.488c7.655 0 11.572 4.094 11.572 11.572v8.901c0 7.477-3.917 11.572-11.572 11.572H14.836c-7.656 0-11.573-4.095-11.573-11.572v-8.902zM2.211 304.591c0-47.278 50.955-56.383 50.955-69.165 0-7.18-5.954-8.755-9.28-8.755-3.153 0-6.479 1.051-9.455 3.852-5.079 4.903-10.507 7.004-16.111 2.451l-8.579-6.829c-5.779-4.553-7.18-9.805-2.803-15.409C13.592 201.981 26.025 192 47.387 192c19.437 0 44.476 10.506 44.476 39.573 0 38.347-46.753 46.402-48.679 56.909h39.049c7.529 0 11.557 4.027 11.557 11.382v8.755c0 7.354-4.028 11.382-11.557 11.382h-67.94c-7.005 0-12.083-4.028-12.083-11.382v-4.028zM5.654 454.61l5.603-9.28c3.853-6.654 9.105-7.004 15.584-3.152 4.903 2.101 9.63 3.152 14.359 3.152 10.155 0 14.358-3.502 14.358-8.23 0-6.654-5.604-9.106-15.934-9.106h-4.728c-5.954 0-9.28-2.101-12.258-7.88l-1.05-1.926c-2.451-4.728-1.226-9.806 2.801-14.884l5.604-7.004c6.829-8.405 12.257-13.483 12.257-13.483v-.35s-4.203 1.051-12.608 1.051H16.685c-7.53 0-11.383-4.028-11.383-11.382v-8.755c0-7.53 3.853-11.382 11.383-11.382h58.484c7.529 0 11.382 4.027 11.382 11.382v3.327c0 5.778-1.401 9.806-5.079 14.183l-17.509 20.137c19.611 5.078 28.716 20.487 28.716 34.845 0 21.363-14.358 44.126-48.503 44.126-16.636 0-28.192-4.728-35.896-9.455-5.779-4.202-6.304-9.805-2.626-15.934zM144 132h352c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H144c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h352c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H144c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h352c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H144c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z\"\n      />\n    </svg>\n  ),\n  execute: (state: TextState, api: TextAreaTextApi) => {\n    makeList(state, api, (item, index) => `${index + 1}. `);\n  },\n};\n\nexport const checkedListCommand: ICommand = {\n  name: 'checked-list',\n  keyCommand: 'list',\n  shortcuts: 'ctrl+shift+c',\n  buttonProps: { 'aria-label': 'Add checked list', title: 'Add checked list' },\n  icon: (\n    <svg data-name=\"checked-list\" width=\"12\" height=\"12\" role=\"img\" viewBox=\"0 0 512 512\">\n      <path\n        fill=\"currentColor\"\n        d=\"M208 132h288c8.8 0 16-7.2 16-16V76c0-8.8-7.2-16-16-16H208c-8.8 0-16 7.2-16 16v40c0 8.8 7.2 16 16 16zm0 160h288c8.8 0 16-7.2 16-16v-40c0-8.8-7.2-16-16-16H208c-8.8 0-16 7.2-16 16v40c0 8.8 7.2 16 16 16zm0 160h288c8.8 0 16-7.2 16-16v-40c0-8.8-7.2-16-16-16H208c-8.8 0-16 7.2-16 16v40c0 8.8 7.2 16 16 16zM64 368c-26.5 0-48.6 21.5-48.6 48s22.1 48 48.6 48 48-21.5 48-48-21.5-48-48-48zm92.5-299l-72.2 72.2-15.6 15.6c-4.7 4.7-12.9 4.7-17.6 0L3.5 109.4c-4.7-4.7-4.7-12.3 0-17l15.7-15.7c4.7-4.7 12.3-4.7 17 0l22.7 22.1 63.7-63.3c4.7-4.7 12.3-4.7 17 0l17 16.5c4.6 4.7 4.6 12.3-.1 17zm0 159.6l-72.2 72.2-15.7 15.7c-4.7 4.7-12.9 4.7-17.6 0L3.5 269c-4.7-4.7-4.7-12.3 0-17l15.7-15.7c4.7-4.7 12.3-4.7 17 0l22.7 22.1 63.7-63.7c4.7-4.7 12.3-4.7 17 0l17 17c4.6 4.6 4.6 12.2-.1 16.9z\"\n      />\n    </svg>\n  ),\n  execute: (state: TextState, api: TextAreaTextApi) => {\n    makeList(state, api, (item, index) => `- [ ] `);\n  },\n};\n","/**\n * The MIT License\n * Copyright (c) 2018 Dmitriy Kubyshkin\n * Copied from https://github.com/grassator/insert-text-at-cursor\n */\n\nlet browserSupportsTextareaTextNodes: any;\n\n/**\n * @param {HTMLElement} input\n * @return {boolean}\n */\nfunction canManipulateViaTextNodes(input: HTMLTextAreaElement | HTMLInputElement): boolean {\n  if (input.nodeName !== 'TEXTAREA') {\n    return false;\n  }\n  if (typeof browserSupportsTextareaTextNodes === 'undefined') {\n    const textarea: HTMLTextAreaElement = document.createElement('textarea');\n    textarea.value = '1';\n    browserSupportsTextareaTextNodes = !!textarea.firstChild;\n  }\n  return browserSupportsTextareaTextNodes;\n}\n\n/**\n * @param {string} val\n * @param {number} cursorIdx\n * @param {HTMLTextAreaElement|HTMLInputElement} input\n * @return {void}\n */\nexport const insertAtLineStart = (\n  val: string,\n  cursorIdx: number,\n  input: HTMLTextAreaElement | HTMLInputElement,\n): void => {\n  const content = input.value;\n  let startIdx = 0;\n\n  while (cursorIdx--) {\n    let char = content[cursorIdx];\n    if (char === '\\n') {\n      startIdx = cursorIdx + 1;\n      break;\n    }\n  }\n\n  input.focus();\n  input.setRangeText(val, startIdx, startIdx);\n  input.dispatchEvent(new Event('input', { bubbles: true }));\n};\n\n/**\n * @param {HTMLTextAreaElement|HTMLInputElement} input\n * @param {string} text\n * @returns {void}\n */\nexport function insertTextAtPosition(input: HTMLTextAreaElement | HTMLInputElement, text: string): void {\n  // Most of the used APIs only work with the field selected\n  input.focus();\n\n  // IE 8-10\n  if ((document as any).selection) {\n    const ieRange = (document as any).selection.createRange();\n    ieRange.text = text;\n\n    // Move cursor after the inserted text\n    ieRange.collapse(false /* to the end */);\n    ieRange.select();\n\n    return;\n  }\n\n  // Webkit + Edge\n  const isSuccess = document.execCommand && document.execCommand('insertText', false, text);\n  if (!isSuccess) {\n    const start = input.selectionStart!;\n    const end = input.selectionEnd!;\n    // Firefox (non-standard method)\n    if (typeof input.setRangeText === 'function') {\n      input.setRangeText(text);\n    } else {\n      // To make a change we just need a Range, not a Selection\n      const range = document.createRange();\n      const textNode = document.createTextNode(text);\n\n      if (canManipulateViaTextNodes(input)) {\n        let node = input.firstChild;\n\n        // If textarea is empty, just insert the text\n        if (!node) {\n          input.appendChild(textNode);\n        } else {\n          // Otherwise we need to find a nodes for start and end\n          let offset = 0;\n          let startNode = null;\n          let endNode = null;\n\n          while (node && (startNode === null || endNode === null)) {\n            const nodeLength = node.nodeValue!.length;\n\n            // if start of the selection falls into current node\n            if (start >= offset && start <= offset + nodeLength) {\n              range.setStart((startNode = node), start - offset);\n            }\n\n            // if end of the selection falls into current node\n            if (end >= offset && end <= offset + nodeLength) {\n              range.setEnd((endNode = node), end - offset);\n            }\n\n            offset += nodeLength;\n            node = node.nextSibling;\n          }\n\n          // If there is some text selected, remove it as we should replace it\n          if (start !== end) {\n            range.deleteContents();\n          }\n        }\n      }\n\n      // If the node is a textarea and the range doesn't span outside the element\n      //\n      // Get the commonAncestorContainer of the selected range and test its type\n      // If the node is of type `#text` it means that we're still working with text nodes within our textarea element\n      // otherwise, if it's of type `#document` for example it means our selection spans outside the textarea.\n      if (canManipulateViaTextNodes(input) && range.commonAncestorContainer.nodeName === '#text') {\n        // Finally insert a new node. The browser will automatically split start and end nodes into two if necessary\n        range.insertNode(textNode);\n      } else {\n        // If the node is not a textarea or the range spans outside a textarea the only way is to replace the whole value\n        const value = input.value;\n        input.value = value.slice(0, start) + text + value.slice(end);\n      }\n    }\n\n    // Correct the cursor position to be at the end of the insertion\n    input.setSelectionRange(start + text.length, start + text.length);\n\n    // Notify any possible listeners of the change\n    const e = document.createEvent('UIEvent');\n    e.initEvent('input', true, false);\n    input.dispatchEvent(e);\n  }\n}\n","import * as React from 'react';\nimport { ICommand, TextState, TextAreaTextApi } from './';\nimport {\n  getBreaksNeededForEmptyLineBefore,\n  getBreaksNeededForEmptyLineAfter,\n  selectWord,\n} from '../utils/markdownUtils';\n\nexport const quote: ICommand = {\n  name: 'quote',\n  keyCommand: 'quote',\n  shortcuts: 'ctrlcmd+q',\n  buttonProps: { 'aria-label': 'Insert a quote', title: 'Insert a quote' },\n  icon: (\n    <svg width=\"12\" height=\"12\" viewBox=\"0 0 520 520\">\n      <path\n        fill=\"currentColor\"\n        d=\"M520,95.75 L520,225.75 C520,364.908906 457.127578,437.050625 325.040469,472.443125 C309.577578,476.586875 294.396016,464.889922 294.396016,448.881641 L294.396016,414.457031 C294.396016,404.242891 300.721328,395.025078 310.328125,391.554687 C377.356328,367.342187 414.375,349.711094 414.375,274.5 L341.25,274.5 C314.325781,274.5 292.5,252.674219 292.5,225.75 L292.5,95.75 C292.5,68.8257812 314.325781,47 341.25,47 L471.25,47 C498.174219,47 520,68.8257812 520,95.75 Z M178.75,47 L48.75,47 C21.8257813,47 0,68.8257812 0,95.75 L0,225.75 C0,252.674219 21.8257813,274.5 48.75,274.5 L121.875,274.5 C121.875,349.711094 84.8563281,367.342187 17.828125,391.554687 C8.22132813,395.025078 1.89601563,404.242891 1.89601563,414.457031 L1.89601563,448.881641 C1.89601563,464.889922 17.0775781,476.586875 32.5404687,472.443125 C164.627578,437.050625 227.5,364.908906 227.5,225.75 L227.5,95.75 C227.5,68.8257812 205.674219,47 178.75,47 Z\"\n      />\n    </svg>\n  ),\n  execute: (state: TextState, api: TextAreaTextApi) => {\n    // Adjust the selection to encompass the whole word if the caret is inside one\n    const newSelectionRange = selectWord({ text: state.text, selection: state.selection });\n    const state1 = api.setSelectionRange(newSelectionRange);\n    const breaksBeforeCount = getBreaksNeededForEmptyLineBefore(state1.text, state1.selection.start);\n    const breaksBefore = Array(breaksBeforeCount + 1).join('\\n');\n\n    const breaksAfterCount = getBreaksNeededForEmptyLineAfter(state1.text, state1.selection.end);\n    const breaksAfter = Array(breaksAfterCount + 1).join('\\n');\n\n    // Replaces the current selection with the quote mark up\n    api.replaceSelection(`${breaksBefore}> ${state1.selectedText}${breaksAfter}`);\n\n    const selectionStart = state1.selection.start + breaksBeforeCount + 2;\n    const selectionEnd = selectionStart + state1.selectedText.length;\n\n    api.setSelectionRange({\n      start: selectionStart,\n      end: selectionEnd,\n    });\n  },\n};\n","import * as React from 'react';\nimport { ICommand, TextState, TextAreaTextApi } from './';\n\nexport const hr: ICommand = {\n  name: 'hr',\n  keyCommand: 'hr',\n  shortcuts: 'ctrlcmd+h',\n  buttonProps: { 'aria-label': 'Insert HR', title: 'Insert HR' },\n  icon: (\n    <svg width=\"12\" height=\"12\" viewBox=\"0 0 175 175\">\n      <path\n        fill=\"currentColor\"\n        d=\"M0,129 L175,129 L175,154 L0,154 L0,129 Z M3,9 L28.2158203,9 L28.2158203,47.9824219 L55.7695313,47.9824219 L55.7695313,9 L81.0966797,9 L81.0966797,107.185547 L55.7695313,107.185547 L55.7695313,68.0214844 L28.2158203,68.0214844 L28.2158203,107.185547 L3,107.185547 L3,9 Z M93.1855469,100.603516 L93.1855469,19 L135.211914,19 C143.004922,19 148.960917,19.6679621 153.080078,21.0039063 C157.199239,22.3398504 160.520495,24.8168764 163.043945,28.4350586 C165.567395,32.0532407 166.829102,36.459935 166.829102,41.6552734 C166.829102,46.1826398 165.864267,50.0883625 163.93457,53.3725586 C162.004873,56.6567547 159.351579,59.3193257 155.974609,61.3603516 C153.822255,62.6591862 150.872089,63.7353473 147.124023,64.5888672 C150.129898,65.5908253 152.319329,66.5927684 153.692383,67.5947266 C154.620122,68.2626987 155.965323,69.6913953 157.728027,71.8808594 C159.490731,74.0703234 160.668942,75.7587831 161.262695,76.9462891 L173,100.603516 L144.953125,100.603516 L131.482422,75.6660156 C129.775382,72.4374839 128.253913,70.3408251 126.917969,69.3759766 C125.0996,68.1142515 123.040051,67.4833984 120.739258,67.4833984 L118.512695,67.4833984 L118.512695,100.603516 L93.1855469,100.603516 Z M118.512695,52.0644531 L129.144531,52.0644531 C130.294928,52.0644531 132.521468,51.6933631 135.824219,50.9511719 C137.494149,50.6171858 138.857905,49.7636787 139.915527,48.390625 C140.97315,47.0175713 141.501953,45.4404386 141.501953,43.6591797 C141.501953,41.0244009 140.667001,39.0019602 138.99707,37.5917969 C137.32714,36.1816336 134.191429,35.4765625 129.589844,35.4765625 L117.512695,35.4765625 L118.512695,52.0644531 Z\"\n        transform=\"translate(0 9)\"\n      />\n    </svg>\n  ),\n  execute: (state: TextState, api: TextAreaTextApi) => {\n    api.replaceSelection(`${state.selectedText}\\n\\n----------\\n\\n`);\n  },\n};\n","import * as React from 'react';\nimport { insertAtLineStart } from '../utils/InsertTextAtPosition';\nimport { ICommand, TextState, TextAreaTextApi } from './';\n\nexport const title2: ICommand = {\n  name: 'title2',\n  keyCommand: 'title2',\n  shortcuts: 'ctrlcmd+2',\n  buttonProps: { 'aria-label': 'Insert title2', title: 'Insert title 2' },\n  icon: <div style={{ fontSize: 16, textAlign: 'left' }}>Title 2</div>,\n  execute: (state: TextState, api: TextAreaTextApi) => {\n    if (state.selection.start === 0 || /\\n$/.test(state.text)) {\n      api.replaceSelection('## ');\n    } else {\n      insertAtLineStart('## ', state.selection.start, api.textArea);\n    }\n  },\n};\n","import React from 'react';\nimport { ICommand } from './';\nimport { title2 } from './title2';\n\nexport const title: ICommand = {\n  ...title2,\n  icon: (\n    <svg width=\"12\" height=\"12\" viewBox=\"0 0 520 520\">\n      <path\n        fill=\"currentColor\"\n        d=\"M15.7083333,468 C7.03242448,468 0,462.030833 0,454.666667 L0,421.333333 C0,413.969167 7.03242448,408 15.7083333,408 L361.291667,408 C369.967576,408 377,413.969167 377,421.333333 L377,454.666667 C377,462.030833 369.967576,468 361.291667,468 L15.7083333,468 Z M21.6666667,366 C9.69989583,366 0,359.831861 0,352.222222 L0,317.777778 C0,310.168139 9.69989583,304 21.6666667,304 L498.333333,304 C510.300104,304 520,310.168139 520,317.777778 L520,352.222222 C520,359.831861 510.300104,366 498.333333,366 L21.6666667,366 Z M136.835938,64 L136.835937,126 L107.25,126 L107.25,251 L40.75,251 L40.75,126 L-5.68434189e-14,126 L-5.68434189e-14,64 L136.835938,64 Z M212,64 L212,251 L161.648438,251 L161.648438,64 L212,64 Z M378,64 L378,126 L343.25,126 L343.25,251 L281.75,251 L281.75,126 L238,126 L238,64 L378,64 Z M449.047619,189.550781 L520,189.550781 L520,251 L405,251 L405,64 L449.047619,64 L449.047619,189.550781 Z\"\n      />\n    </svg>\n  ),\n};\n","import { ICommand, TextState, TextAreaTextApi } from './';\nimport { selectWord } from '../utils/markdownUtils';\n\nexport const comment: ICommand = {\n  name: 'comment',\n  keyCommand: 'comment',\n  shortcuts: 'ctrlcmd+/',\n  execute: (state: TextState, api: TextAreaTextApi) => {\n    // Adjust the selection to encompass the whole word if the caret is inside one\n    const newSelectionRange = selectWord({ text: state.text, selection: state.selection });\n    const state1 = api.setSelectionRange(newSelectionRange);\n    // Replaces the current selection with the bold mark up\n    const state2 = api.replaceSelection(`<!-- ${state1.selectedText} -->`);\n    // Adjust the selection to not contain the **\n    api.setSelectionRange({\n      start: state2.selection.end - 4 - state1.selectedText.length,\n      end: state2.selection.end - 4,\n    });\n  },\n};\n","import { ICommand } from './';\n\nexport const divider: ICommand = {\n  keyCommand: 'divider',\n};\n","import * as React from 'react';\nimport { ICommand } from './';\n\nexport const codePreview: ICommand = {\n  name: 'preview',\n  keyCommand: 'preview',\n  value: 'preview',\n  buttonProps: { 'aria-label': 'Preview code', title: 'Preview code' },\n  icon: (\n    <svg width=\"12\" height=\"12\" viewBox=\"0 0 520 520\">\n      <polygon\n        fill=\"currentColor\"\n        points=\"0 71.293 0 122 38.023 123 38.023 398 0 397 0 449.707 91.023 450.413 91.023 72.293\"\n      />\n      <polygon\n        fill=\"currentColor\"\n        points=\"148.023 72.293 520 71.293 520 122 200.023 124 200.023 397 520 396 520 449.707 148.023 450.413\"\n      />\n    </svg>\n  ),\n  execute: () => {},\n};\n\nexport const codeEdit: ICommand = {\n  name: 'edit',\n  keyCommand: 'preview',\n  value: 'edit',\n  buttonProps: { 'aria-label': 'Edit code', title: 'Edit code' },\n  icon: (\n    <svg width=\"12\" height=\"12\" viewBox=\"0 0 520 520\">\n      <polygon fill=\"currentColor\" points=\"0 71.293 0 122 319 122 319 397 0 397 0 449.707 372 449.413 372 71.293\" />\n      <polygon\n        fill=\"currentColor\"\n        points=\"429 71.293 520 71.293 520 122 481 123 481 396 520 396 520 449.707 429 449.413\"\n      />\n    </svg>\n  ),\n  execute: () => {},\n};\n\nexport const codeLive: ICommand = {\n  name: 'live',\n  keyCommand: 'preview',\n  value: 'live',\n  buttonProps: { 'aria-label': 'Live code', title: 'Live code' },\n  icon: (\n    <svg width=\"12\" height=\"12\" viewBox=\"0 0 520 520\">\n      <polygon fill=\"currentColor\" points=\"0 71.293 0 122 179 122 179 397 0 397 0 449.707 232 449.413 232 71.293\" />\n      <polygon\n        fill=\"currentColor\"\n        points=\"289 71.293 520 71.293 520 122 341 123 341 396 520 396 520 449.707 289 449.413\"\n      />\n    </svg>\n  ),\n  execute: () => {},\n};\n","import * as React from 'react';\nimport { ICommand, TextState, TextAreaTextApi } from './';\nimport { ContextStore, ExecuteCommandState } from '../Context';\n\nexport const fullscreen: ICommand = {\n  name: 'fullscreen',\n  keyCommand: 'fullscreen',\n  shortcuts: 'escape',\n  buttonProps: { 'aria-label': 'fullscreen', title: 'fullscreen' },\n  icon: (\n    <svg width=\"12\" height=\"12\" viewBox=\"0 0 520 520\">\n      <path\n        fill=\"currentColor\"\n        d=\"M118 171.133334L118 342.200271C118 353.766938 126.675 365.333605 141.133333 365.333605L382.634614 365.333605C394.201281 365.333605 405.767948 356.658605 405.767948 342.200271L405.767948 171.133334C405.767948 159.566667 397.092948 148 382.634614 148L141.133333 148C126.674999 148 117.999999 156.675 118 171.133334zM465.353591 413.444444L370 413.444444 370 471.222222 474.0221 471.222222C500.027624 471.222222 520.254143 451 520.254143 425L520.254143 321 462.464089 321 462.464089 413.444444 465.353591 413.444444zM471.0221 43L367 43 367 100.777778 462.353591 100.777778 462.353591 196.111111 520.143647 196.111111 520.143647 89.2222219C517.254144 63.2222219 497.027624 43 471.0221 43zM57.7900547 100.777778L153.143646 100.777778 153.143646 43 46.2320439 43C20.2265191 43 0 63.2222219 0 89.2222219L0 193.222222 57.7900547 193.222222 57.7900547 100.777778zM57.7900547 321L0 321 0 425C0 451 20.2265191 471.222222 46.2320439 471.222223L150.254143 471.222223 150.254143 413.444445 57.7900547 413.444445 57.7900547 321z\"\n      />\n    </svg>\n  ),\n  execute: (\n    state: TextState,\n    api: TextAreaTextApi,\n    dispatch?: React.Dispatch<ContextStore>,\n    executeCommandState?: ExecuteCommandState,\n  ) => {\n    api.textArea.focus();\n    if (dispatch && executeCommandState && executeCommandState.fullscreen) {\n      dispatch({ fullscreen: false });\n    }\n  },\n};\n","import * as React from 'react';\nimport { ICommand, TextState, TextAreaTextApi } from './';\nimport { selectWord } from '../utils/markdownUtils';\n\nexport const image: ICommand = {\n  name: 'image',\n  keyCommand: 'image',\n  shortcuts: 'ctrlcmd+i',\n  buttonProps: { 'aria-label': 'Add image', title: 'Add image' },\n  icon: (\n    <svg width=\"12\" height=\"12\" viewBox=\"0 0 20 20\">\n      <path\n        fill=\"currentColor\"\n        d=\"M15 9c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm4-7H1c-.55 0-1 .45-1 1v14c0 .55.45 1 1 1h18c.55 0 1-.45 1-1V3c0-.55-.45-1-1-1zm-1 13l-6-5-2 2-4-5-4 8V4h16v11z\"\n      />\n    </svg>\n  ),\n  execute: (state: TextState, api: TextAreaTextApi) => {\n    // Select everything\n    const newSelectionRange = selectWord({ text: state.text, selection: state.selection });\n    const state1 = api.setSelectionRange(newSelectionRange);\n    // Replaces the current selection with the image\n    const imageTemplate = state1.selectedText || 'https://example.com/your-image.png';\n    api.replaceSelection(`![](${imageTemplate})`);\n    // Adjust the selection to not contain the **\n    api.setSelectionRange({\n      start: 4 + state1.selection.start,\n      end: 4 + state1.selection.start + imageTemplate.length,\n    });\n  },\n};\n","import * as React from 'react';\nimport { ICommand, TextState, TextAreaTextApi } from './';\nimport { selectWord } from '../utils/markdownUtils';\n\nexport const strikethrough: ICommand = {\n  name: 'strikethrough',\n  keyCommand: 'strikethrough',\n  shortcuts: 'ctrl+shift+x',\n  buttonProps: { 'aria-label': 'Add strikethrough text', title: 'Add strikethrough text' },\n  icon: (\n    <svg data-name=\"strikethrough\" width=\"12\" height=\"12\" role=\"img\" viewBox=\"0 0 512 512\">\n      <path\n        fill=\"currentColor\"\n        d=\"M496 288H16c-8.837 0-16-7.163-16-16v-32c0-8.837 7.163-16 16-16h480c8.837 0 16 7.163 16 16v32c0 8.837-7.163 16-16 16zm-214.666 16c27.258 12.937 46.524 28.683 46.524 56.243 0 33.108-28.977 53.676-75.621 53.676-32.325 0-76.874-12.08-76.874-44.271V368c0-8.837-7.164-16-16-16H113.75c-8.836 0-16 7.163-16 16v19.204c0 66.845 77.717 101.82 154.487 101.82 88.578 0 162.013-45.438 162.013-134.424 0-19.815-3.618-36.417-10.143-50.6H281.334zm-30.952-96c-32.422-13.505-56.836-28.946-56.836-59.683 0-33.92 30.901-47.406 64.962-47.406 42.647 0 64.962 16.593 64.962 32.985V136c0 8.837 7.164 16 16 16h45.613c8.836 0 16-7.163 16-16v-30.318c0-52.438-71.725-79.875-142.575-79.875-85.203 0-150.726 40.972-150.726 125.646 0 22.71 4.665 41.176 12.777 56.547h129.823z\"\n      />\n    </svg>\n  ),\n  execute: (state: TextState, api: TextAreaTextApi) => {\n    // Adjust the selection to encompass the whole word if the caret is inside one\n    const newSelectionRange = selectWord({ text: state.text, selection: state.selection });\n    const state1 = api.setSelectionRange(newSelectionRange);\n    // Replaces the current selection with the strikethrough mark up\n    const state2 = api.replaceSelection(`~~${state1.selectedText}~~`);\n    // Adjust the selection to not contain the ~~\n    api.setSelectionRange({\n      start: state2.selection.end - 2 - state1.selectedText.length,\n      end: state2.selection.end - 2,\n    });\n  },\n};\n","import { bold } from './bold';\nimport { code, codeBlock } from './code';\nimport { italic } from './italic';\nimport { link } from './link';\nimport { unorderedListCommand, orderedListCommand, checkedListCommand } from './list';\nimport { quote } from './quote';\nimport { hr } from './hr';\nimport { title } from './title';\nimport { title1 } from './title1';\nimport { title2 } from './title2';\nimport { title3 } from './title3';\nimport { title4 } from './title4';\nimport { title5 } from './title5';\nimport { title6 } from './title6';\nimport { comment } from './comment';\nimport { group } from './group';\nimport { divider } from './divider';\nimport { codePreview, codeEdit, codeLive } from './preview';\nimport { fullscreen } from './fullscreen';\nimport { image } from './image';\nimport { strikethrough } from './strikeThrough';\nimport { insertTextAtPosition } from '../utils/InsertTextAtPosition';\nimport { ContextStore, ExecuteCommandState } from '../Context';\n\nexport interface CommandOrchestrator {\n  executeCommand(command: ICommand): void;\n}\n\nexport interface ICommandChildHandle<T = string> extends ICommandBase<T> {\n  children?: (handle: {\n    close: () => void;\n    execute: () => void;\n    getState?: TextAreaCommandOrchestrator['getState'];\n    textApi?: TextAreaTextApi;\n  }) => React.ReactElement;\n}\n\nexport interface ICommandChildCommands<T = string> extends ICommandBase<T> {\n  children?: Array<ICommand<T>>;\n}\n\nexport interface ICommandBase<T> {\n  parent?: ICommand<any>;\n  keyCommand?: string;\n  name?: string;\n  shortcuts?: string;\n  groupName?: string;\n  icon?: React.ReactElement;\n  value?: T;\n  position?: 'right';\n  liProps?: React.LiHTMLAttributes<HTMLLIElement>;\n  buttonProps?: React.ButtonHTMLAttributes<HTMLButtonElement> | null;\n  execute?: (\n    state: TextState,\n    api: TextAreaTextApi,\n    dispatch?: React.Dispatch<ContextStore>,\n    executeCommandState?: ExecuteCommandState,\n  ) => void;\n}\n\nexport type ICommand<T = string> = ICommandChildCommands<T> | ICommandChildHandle<T>;\n\nexport interface TextRange {\n  start: number;\n  end: number;\n}\n\nexport interface TextState {\n  text: string;\n  selectedText: string;\n  selection: TextRange;\n}\n\nconst getCommands: () => ICommand[] = () => [\n  comment,\n  bold,\n  italic,\n  strikethrough,\n  hr,\n  title,\n  divider,\n  link,\n  quote,\n  code,\n  codeBlock,\n  image,\n  divider,\n  unorderedListCommand,\n  orderedListCommand,\n  checkedListCommand,\n];\n\nconst getExtraCommands: () => ICommand[] = () => [codeEdit, codeLive, codePreview, divider, fullscreen];\n\nfunction getStateFromTextArea(textArea: HTMLTextAreaElement): TextState {\n  return {\n    selection: {\n      start: textArea.selectionStart,\n      end: textArea.selectionEnd,\n    },\n    text: textArea.value,\n    selectedText: textArea.value.slice(textArea.selectionStart, textArea.selectionEnd),\n  };\n}\n\nclass TextAreaTextApi {\n  textArea: HTMLTextAreaElement;\n\n  constructor(textArea: HTMLTextAreaElement) {\n    this.textArea = textArea;\n  }\n\n  /**\n   * Replaces the current selection with the new text. This will make the new selectedText to be empty, the\n   * selection start and selection end will be the same and will both point to the end\n   * @param text Text that should replace the current selection\n   */\n  replaceSelection(text: string): TextState {\n    insertTextAtPosition(this.textArea, text);\n    return getStateFromTextArea(this.textArea);\n  }\n\n  /**\n   * Selects the specified text range\n   * @param selection\n   */\n  setSelectionRange(selection: TextRange): TextState {\n    this.textArea.focus();\n    this.textArea.selectionStart = selection.start;\n    this.textArea.selectionEnd = selection.end;\n    return getStateFromTextArea(this.textArea);\n  }\n}\n\nclass TextAreaCommandOrchestrator implements CommandOrchestrator {\n  textArea: HTMLTextAreaElement;\n  textApi: TextAreaTextApi;\n\n  constructor(textArea: HTMLTextAreaElement) {\n    this.textArea = textArea;\n    this.textApi = new TextAreaTextApi(textArea);\n  }\n\n  getState() {\n    if (!this.textArea) return false;\n    return getStateFromTextArea(this.textArea);\n  }\n\n  executeCommand(\n    command: ICommand<string>,\n    dispatch?: React.Dispatch<ContextStore>,\n    state?: ExecuteCommandState,\n  ): void {\n    command.execute && command.execute(getStateFromTextArea(this.textArea), this.textApi, dispatch, state);\n  }\n}\n\nexport {\n  // Toolbars.\n  title,\n  title1,\n  title2,\n  title3,\n  title4,\n  title5,\n  title6,\n  bold,\n  codeBlock,\n  italic,\n  strikethrough,\n  hr,\n  group,\n  divider,\n  link,\n  quote,\n  code,\n  image,\n  unorderedListCommand,\n  orderedListCommand,\n  checkedListCommand,\n  codeEdit,\n  codeLive,\n  codePreview,\n  fullscreen,\n  // Tool method.\n  getCommands,\n  getExtraCommands,\n  getStateFromTextArea,\n  TextAreaCommandOrchestrator,\n  TextAreaTextApi,\n};\n","import { insertTextAtPosition } from '../../utils/InsertTextAtPosition';\nimport { TextAreaTextApi } from '../../commands';\nimport { insertBeforeEachLine } from '../../commands/list';\n\n/**\n * - `13` - `Enter`\n * - `9` - `Tab`\n */\nfunction stopPropagation(e: KeyboardEvent | React.KeyboardEvent<HTMLTextAreaElement>) {\n  e.stopPropagation();\n  e.preventDefault();\n}\n\nexport default function handleKeyDown(\n  e: KeyboardEvent | React.KeyboardEvent<HTMLTextAreaElement>,\n  tabSize: number = 2,\n  defaultTabEnable: boolean = false,\n) {\n  const target = e.target as HTMLTextAreaElement;\n  const starVal = target.value.substr(0, target.selectionStart);\n  const valArr = starVal.split('\\n');\n  const currentLineStr = valArr[valArr.length - 1];\n  const textArea = new TextAreaTextApi(target);\n\n  /**\n   * `9` - `Tab`\n   */\n  if (!defaultTabEnable && e.code && e.code.toLowerCase() === 'tab') {\n    stopPropagation(e);\n    const space = new Array(tabSize + 1).join('  ');\n    if (target.selectionStart !== target.selectionEnd) {\n      const _star = target.value.substring(0, target.selectionStart).split('\\n');\n      const _end = target.value.substring(0, target.selectionEnd).split('\\n');\n      const modifiedTextLine: string[] = [];\n      _end.forEach((item, idx) => {\n        if (item !== _star[idx]) {\n          modifiedTextLine.push(item);\n        }\n      });\n      const modifiedText = modifiedTextLine.join('\\n');\n      const oldSelectText = target.value.substring(target.selectionStart, target.selectionEnd);\n      const newStarNum = target.value.substring(0, target.selectionStart).length;\n\n      textArea.setSelectionRange({\n        start: target.value.indexOf(modifiedText),\n        end: target.selectionEnd,\n      });\n\n      const modifiedTextObj = insertBeforeEachLine(modifiedText, e.shiftKey ? '' : space);\n\n      let text = modifiedTextObj.modifiedText;\n      if (e.shiftKey) {\n        text = text\n          .split('\\n')\n          .map((item) => item.replace(new RegExp(`^${space}`), ''))\n          .join('\\n');\n      }\n      textArea.replaceSelection(text);\n\n      let startTabSize = e.shiftKey ? -tabSize : tabSize;\n      let endTabSize = e.shiftKey ? -modifiedTextLine.length * tabSize : modifiedTextLine.length * tabSize;\n\n      textArea.setSelectionRange({\n        start: newStarNum + startTabSize,\n        end: newStarNum + oldSelectText.length + endTabSize,\n      });\n    } else {\n      return insertTextAtPosition(target, space);\n    }\n  } else if (\n    e.code &&\n    e.code.toLowerCase() === 'enter' &&\n    (/^(-|\\*)\\s/.test(currentLineStr) || /^\\d+.\\s/.test(currentLineStr))\n  ) {\n    /**\n     * `13` - `Enter`\n     */\n    stopPropagation(e);\n    let startStr = '\\n- ';\n\n    if (currentLineStr.startsWith('*')) {\n      startStr = '\\n* ';\n    }\n\n    if (currentLineStr.startsWith('- [ ]')) {\n      startStr = '\\n- [ ] ';\n    } else if (currentLineStr.startsWith('- [X]')) {\n      startStr = '\\n- [X] ';\n    }\n\n    if (/^\\d+.\\s/.test(currentLineStr)) {\n      startStr = `\\n${parseInt(currentLineStr) + 1}. `;\n    }\n    return insertTextAtPosition(target, startStr);\n  }\n}\n","import React, { useContext, useEffect } from 'react';\nimport { IProps } from '../../Editor';\nimport { EditorContext, ExecuteCommandState } from '../../Context';\nimport { TextAreaCommandOrchestrator } from '../../commands';\nimport handleKeyDown from './handleKeyDown';\nimport shortcuts from './shortcuts';\nimport './index.less';\n\nexport interface TextAreaProps extends Omit<React.TextareaHTMLAttributes<HTMLTextAreaElement>, 'value'>, IProps {}\n\nexport default function Textarea(props: TextAreaProps) {\n  const { prefixCls, onChange, ...other } = props;\n  const {\n    markdown,\n    commands,\n    fullscreen,\n    preview,\n    highlightEnable,\n    extraCommands,\n    tabSize,\n    defaultTabEnable,\n    dispatch,\n  } = useContext(EditorContext);\n  const textRef = React.useRef<HTMLTextAreaElement>(null);\n  const executeRef = React.useRef<TextAreaCommandOrchestrator>();\n  const statesRef = React.useRef<ExecuteCommandState>({ fullscreen, preview });\n\n  useEffect(() => {\n    statesRef.current = { fullscreen, preview, highlightEnable };\n  }, [fullscreen, preview, highlightEnable]);\n\n  useEffect(() => {\n    if (textRef.current && dispatch) {\n      const commandOrchestrator = new TextAreaCommandOrchestrator(textRef.current);\n      executeRef.current = commandOrchestrator;\n      dispatch({ textarea: textRef.current, commandOrchestrator });\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const onKeyDown = (e: KeyboardEvent | React.KeyboardEvent<HTMLTextAreaElement>) => {\n    handleKeyDown(e, tabSize, defaultTabEnable);\n    shortcuts(e, [...(commands || []), ...(extraCommands || [])], executeRef.current, dispatch, statesRef.current);\n  };\n  useEffect(() => {\n    if (textRef.current) {\n      textRef.current.addEventListener('keydown', onKeyDown);\n    }\n    return () => {\n      if (textRef.current) {\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n        textRef.current.removeEventListener('keydown', onKeyDown);\n      }\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  return (\n    <textarea\n      autoComplete=\"off\"\n      autoCorrect=\"off\"\n      autoCapitalize=\"off\"\n      spellCheck={false}\n      {...other}\n      ref={textRef}\n      className={`${prefixCls}-text-input ${other.className ? other.className : ''}`}\n      value={markdown}\n      onChange={(e) => {\n        dispatch && dispatch({ markdown: e.target.value });\n        onChange && onChange(e);\n      }}\n    />\n  );\n}\n","import React, { useEffect, Fragment, useContext } from 'react';\nimport { EditorContext, ContextStore, ExecuteCommandState } from '../../Context';\nimport shortcuts from './shortcuts';\nimport Markdown from './Markdown';\nimport Textarea, { TextAreaProps } from './Textarea';\nimport { IProps } from '../../Editor';\nimport { TextAreaCommandOrchestrator, ICommand } from '../../commands';\nimport './index.less';\n\ntype RenderTextareaHandle = {\n  dispatch: ContextStore['dispatch'];\n  onChange?: TextAreaProps['onChange'];\n  useContext?: {\n    commands: ContextStore['commands'];\n    extraCommands: ContextStore['extraCommands'];\n    commandOrchestrator?: TextAreaCommandOrchestrator;\n  };\n  shortcuts?: (\n    e: KeyboardEvent | React.KeyboardEvent<HTMLTextAreaElement>,\n    commands: ICommand[],\n    commandOrchestrator?: TextAreaCommandOrchestrator,\n    dispatch?: React.Dispatch<ContextStore>,\n    state?: ExecuteCommandState,\n  ) => void;\n};\n\nexport interface ITextAreaProps\n  extends Omit<React.TextareaHTMLAttributes<HTMLTextAreaElement>, 'value' | 'onScroll'>,\n    IProps {\n  value?: string;\n  onScroll?: (e: React.UIEvent<HTMLDivElement>) => void;\n  renderTextarea?: (\n    props: React.TextareaHTMLAttributes<HTMLTextAreaElement> | React.HTMLAttributes<HTMLDivElement>,\n    opts: RenderTextareaHandle,\n  ) => JSX.Element;\n}\n\nexport type TextAreaRef = {\n  text?: HTMLTextAreaElement;\n  warp?: HTMLDivElement;\n};\n\nexport default function TextArea(props: ITextAreaProps) {\n  const { prefixCls, className, onScroll, renderTextarea, ...otherProps } = props || {};\n  const { markdown, scrollTop, commands, highlightEnable, extraCommands, dispatch } = useContext(EditorContext);\n  const textRef = React.useRef<HTMLTextAreaElement>(null);\n  const executeRef = React.useRef<TextAreaCommandOrchestrator>();\n  const warp = React.createRef<HTMLDivElement>();\n  useEffect(() => {\n    const state: ContextStore = {};\n    if (warp.current) {\n      state.textareaWarp = warp.current || undefined;\n      warp.current.scrollTop = scrollTop || 0;\n    }\n    if (dispatch) {\n      dispatch({ ...state });\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  useEffect(() => {\n    if (textRef.current && dispatch) {\n      const commandOrchestrator = new TextAreaCommandOrchestrator(textRef.current);\n      executeRef.current = commandOrchestrator;\n      dispatch({ textarea: textRef.current, commandOrchestrator });\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  // @ts-ignore\n  const textStyle: React.CSSProperties = highlightEnable ? {} : { '-webkit-text-fill-color': 'inherit' };\n\n  return (\n    <div ref={warp} className={`${prefixCls}-aree ${className || ''}`} onScroll={onScroll}>\n      <div className={`${prefixCls}-text`}>\n        {renderTextarea ? (\n          React.cloneElement(\n            renderTextarea(\n              {\n                ...otherProps,\n                value: markdown,\n                autoComplete: 'off',\n                autoCorrect: 'off',\n                spellCheck: 'false',\n                autoCapitalize: 'off',\n                className: `${prefixCls}-text-input`,\n                style: {\n                  WebkitTextFillColor: 'inherit',\n                  overflow: 'auto',\n                },\n              },\n              {\n                dispatch,\n                onChange: otherProps.onChange,\n                shortcuts,\n                useContext: { commands, extraCommands, commandOrchestrator: executeRef.current },\n              },\n            ),\n            {\n              ref: textRef,\n            },\n          )\n        ) : (\n          <Fragment>\n            {highlightEnable && <Markdown prefixCls={prefixCls} />}\n            <Textarea prefixCls={prefixCls} {...otherProps} style={textStyle} />\n          </Fragment>\n        )}\n      </div>\n    </div>\n  );\n}\n","import React, { useContext, useMemo } from 'react';\nimport './Child.less';\nimport Toolbar, { IToolbarProps } from './';\nimport { EditorContext } from '../../Context';\n\nexport type ChildProps = IToolbarProps & {\n  children?: JSX.Element;\n  groupName?: string;\n};\n\nexport default function Child(props: ChildProps) {\n  const { prefixCls, groupName, commands, children } = props || {};\n  const { barPopup = {} } = useContext(EditorContext);\n  return useMemo(\n    () => (\n      <div\n        className={`${prefixCls}-toolbar-child ${groupName && barPopup[groupName] ? 'active' : ''}`}\n        onClick={(e) => e.stopPropagation()}\n      >\n        {Array.isArray(commands) ? <Toolbar commands={commands} {...props} height=\"\" isChild /> : children}\n      </div>\n    ),\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [commands, barPopup, groupName, prefixCls],\n  );\n}\n","import React, { Fragment, useContext, useEffect, useRef } from 'react';\nimport { IProps } from '../../Editor';\nimport { EditorContext, PreviewType, ContextStore } from '../../Context';\nimport { ICommand } from '../../commands';\nimport Child from './Child';\nimport './index.less';\n\nexport interface IToolbarProps extends IProps {\n  overflow?: boolean;\n  height?: React.CSSProperties['height'];\n  toolbarBottom?: boolean;\n  onCommand?: (command: ICommand<string>, groupName?: string) => void;\n  commands?: ICommand<string>[];\n  isChild?: boolean;\n}\n\nexport function ToolbarItems(props: IToolbarProps) {\n  const { prefixCls, overflow } = props;\n  const { fullscreen, preview, barPopup = {}, commandOrchestrator, dispatch } = useContext(EditorContext);\n  const originalOverflow = useRef('');\n\n  function handleClick(command: ICommand<string>, name?: string) {\n    if (!dispatch) return;\n    const state: ContextStore = { barPopup: { ...barPopup } };\n    if (command.keyCommand === 'preview') {\n      state.preview = command.value as PreviewType;\n    }\n    if (command.keyCommand === 'fullscreen') {\n      state.fullscreen = !fullscreen;\n    }\n    if (props.commands && command.keyCommand === 'group') {\n      props.commands.forEach((item) => {\n        if (name === item.groupName) {\n          state.barPopup![name!] = true;\n        } else if (item.keyCommand) {\n          state.barPopup![item.groupName!] = false;\n        }\n      });\n    } else if (name || command.parent) {\n      Object.keys(state.barPopup || {}).forEach((keyName) => {\n        state.barPopup![keyName] = false;\n      });\n    }\n\n    if (Object.keys(state).length) {\n      dispatch({ ...state });\n    }\n    commandOrchestrator && commandOrchestrator.executeCommand(command);\n  }\n\n  useEffect(() => {\n    if (document && overflow) {\n      if (fullscreen) {\n        // prevent scroll on fullscreen\n        document.body.style.overflow = 'hidden';\n      } else {\n        // get the original overflow only the first time\n        if (!originalOverflow.current) {\n          originalOverflow.current = window.getComputedStyle(document.body, null).overflow;\n        }\n        // reset to the original overflow\n        document.body.style.overflow = originalOverflow.current;\n      }\n    }\n  }, [fullscreen, originalOverflow, overflow]);\n\n  return (\n    <ul>\n      {(props.commands || []).map((item, idx) => {\n        if (item.keyCommand === 'divider') {\n          return <li key={idx} {...item.liProps} className={`${prefixCls}-toolbar-divider`} />;\n        }\n        if (!item.keyCommand) return <Fragment key={idx} />;\n        const activeBtn =\n          (fullscreen && item.keyCommand === 'fullscreen') || (item.keyCommand === 'preview' && preview === item.value);\n        const childNode =\n          item.children && typeof item.children === 'function'\n            ? item.children({\n                getState: () => commandOrchestrator!.getState(),\n                textApi: commandOrchestrator ? commandOrchestrator!.textApi : undefined,\n                close: () => handleClick({}, item.groupName),\n                execute: () => handleClick({ execute: item.execute }),\n              })\n            : undefined;\n        const disabled = barPopup && preview && preview === 'preview' && !/(preview|fullscreen)/.test(item.keyCommand);\n        return (\n          <li key={idx} {...item.liProps} className={activeBtn ? `active` : ''}>\n            {!item.buttonProps && item.icon}\n            {item.buttonProps &&\n              React.createElement(\n                'button',\n                {\n                  type: 'button',\n                  key: idx,\n                  disabled,\n                  'data-name': item.name,\n                  ...item.buttonProps,\n                  onClick: (evn: React.MouseEvent<HTMLButtonElement, MouseEvent>) => {\n                    evn.stopPropagation();\n                    handleClick(item, item.groupName);\n                  },\n                },\n                item.icon,\n              )}\n            {item.children && (\n              <Child\n                overflow={overflow}\n                groupName={item.groupName}\n                prefixCls={prefixCls}\n                children={childNode}\n                commands={Array.isArray(item.children) ? item.children : undefined}\n              />\n            )}\n          </li>\n        );\n      })}\n    </ul>\n  );\n}\n\nexport default function Toolbar(props: IToolbarProps = {}) {\n  const { prefixCls, height = 29, toolbarBottom, isChild } = props;\n  const { commands, extraCommands } = useContext(EditorContext);\n  const bottomClassName = toolbarBottom ? 'bottom' : '';\n  return (\n    <div className={`${prefixCls}-toolbar ${bottomClassName}`} style={{ height }}>\n      <ToolbarItems {...props} commands={props.commands || commands || []} />\n      {!isChild && <ToolbarItems {...props} commands={extraCommands || []} />}\n    </div>\n  );\n}\n","import React, { useEffect, useMemo, useRef } from 'react';\nimport { IProps } from '../../Editor';\nimport './index.less';\n\nexport interface IDragBarProps extends IProps {\n  height: number;\n  maxHeight: number;\n  minHeight: number;\n  onChange: (value: number) => void;\n}\n\nconst DragBar: React.FC<IDragBarProps> = (props) => {\n  const { prefixCls, onChange } = props || {};\n  const dragRef = useRef<{ height: number; dragY: number }>();\n  function handleMouseMove(event: MouseEvent) {\n    if (dragRef.current) {\n      const newHeight = dragRef.current.height + event.clientY - dragRef.current.dragY;\n      if (newHeight >= props.minHeight && newHeight <= props.maxHeight) {\n        onChange && onChange(dragRef.current.height + (event.clientY - dragRef.current.dragY));\n      }\n    }\n  }\n  function handleMouseUp() {\n    dragRef.current = undefined;\n  }\n  function handleMouseDown(event: React.MouseEvent<HTMLDivElement, MouseEvent>) {\n    dragRef.current = {\n      height: props.height,\n      dragY: event.clientY,\n    };\n  }\n\n  useEffect(() => {\n    if (document) {\n      document.addEventListener('mousemove', handleMouseMove);\n      document.addEventListener('mouseup', handleMouseUp);\n    }\n    return () => {\n      if (document) {\n        document.removeEventListener('mousemove', handleMouseMove);\n        document.removeEventListener('mouseup', handleMouseUp);\n      }\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  const svg = useMemo(\n    () => (\n      <svg viewBox=\"0 0 512 512\" height=\"100%\">\n        <path\n          fill=\"currentColor\"\n          d=\"M304 256c0 26.5-21.5 48-48 48s-48-21.5-48-48 21.5-48 48-48 48 21.5 48 48zm120-48c-26.5 0-48 21.5-48 48s21.5 48 48 48 48-21.5 48-48-21.5-48-48-48zm-336 0c-26.5 0-48 21.5-48 48s21.5 48 48 48 48-21.5 48-48-21.5-48-48-48z\"\n        />\n      </svg>\n    ),\n    [],\n  );\n  return (\n    <div className={`${prefixCls}-bar`} onMouseDown={handleMouseDown}>\n      {svg}\n    </div>\n  );\n};\n\nexport default DragBar;\n","import React, { useEffect, useReducer, useMemo, useRef, useImperativeHandle } from 'react';\nimport MarkdownPreview, { MarkdownPreviewProps, MarkdownPreviewRef } from '@uiw/react-markdown-preview';\nimport TextArea, { ITextAreaProps } from './components/TextArea';\nimport Toolbar from './components/Toolbar';\nimport DragBar from './components/DragBar';\nimport { getCommands, getExtraCommands, ICommand } from './commands';\nimport { reducer, EditorContext, ContextStore, PreviewType } from './Context';\nimport './index.less';\n\nexport interface IProps {\n  prefixCls?: string;\n  className?: string;\n}\n\nexport interface MDEditorProps extends Omit<React.HTMLAttributes<HTMLDivElement>, 'onChange'>, IProps {\n  /**\n   * The Markdown value.\n   */\n  value?: string;\n  /**\n   * Event handler for the `onChange` event.\n   */\n  onChange?: (value?: string, event?: React.ChangeEvent<HTMLTextAreaElement>, state?: ContextStore) => void;\n  /**\n   * editor height change listener\n   */\n  onHeightChange?: (value?: number, oldValue?: number, state?: ContextStore) => void;\n  /**\n   * Can be used to make `Markdown Editor` focus itself on initialization. Defaults to on.\n   * it will be set to true when either the source `textarea` is focused,\n   * or it has an `autofocus` attribute and no other element is focused.\n   */\n  autoFocus?: ITextAreaProps['autoFocus'];\n  /**\n   * The height of the editor.\n   */\n  height?: number;\n  /**\n   * Custom toolbar heigth\n   * @default 29px\n   */\n  toolbarHeight?: number;\n  /**\n   * Show drag and drop tool. Set the height of the editor.\n   */\n  visiableDragbar?: boolean;\n  /**\n   * Show markdown preview.\n   */\n  preview?: PreviewType;\n  /**\n   * Full screen display editor.\n   */\n  fullscreen?: boolean;\n  /**\n   * Disable `fullscreen` setting body styles\n   */\n  overflow?: boolean;\n  /**\n   * Maximum drag height. `visiableDragbar=true`\n   */\n  maxHeight?: number;\n  /**\n   * Minimum drag height. `visiableDragbar=true`\n   */\n  minHeight?: number;\n  /**\n   * This is reset [react-markdown](https://github.com/rexxars/react-markdown) settings.\n   */\n  previewOptions?: Omit<MarkdownPreviewProps, 'source'>;\n  /**\n   * Set the `textarea` related props.\n   */\n  textareaProps?: ITextAreaProps;\n  /** Use div to replace TextArea or re-render TextArea */\n  renderTextarea?: ITextAreaProps['renderTextarea'];\n  /**\n   * Disable editing area code highlighting. The value is `false`, which increases the editing speed.\n   * @default true\n   */\n  highlightEnable?: boolean;\n  /**\n   * The number of characters to insert when pressing tab key.\n   * Default `2` spaces.\n   */\n  tabSize?: number;\n  /**\n   * If `false`, the `tab` key inserts a tab character into the textarea. If `true`, the `tab` key executes default behavior e.g. focus shifts to next element.\n   */\n  defaultTabEnable?: boolean;\n  /**\n   * You can create your own commands or reuse existing commands.\n   */\n  commands?: ICommand[];\n  /**\n   * Filter or modify your commands.\n   * https://github.com/uiwjs/react-md-editor/issues/296\n   */\n  commandsFilter?: (command: ICommand, isExtra: boolean) => false | ICommand;\n  /**\n   * You can create your own commands or reuse existing commands.\n   */\n  extraCommands?: ICommand[];\n  /**\n   * Hide the tool bar\n   */\n  hideToolbar?: boolean;\n  /** Whether to enable scrolling */\n  enableScroll?: boolean;\n  /** Toolbar on bottom */\n  toolbarBottom?: boolean;\n}\n\nfunction setGroupPopFalse(data: Record<string, boolean> = {}) {\n  Object.keys(data).forEach((keyname) => {\n    data[keyname] = false;\n  });\n  return data;\n}\n\nconst InternalMDEditor = (\n  props: MDEditorProps,\n  ref?: ((instance: ContextStore) => void) | React.RefObject<ContextStore> | null,\n) => {\n  const {\n    prefixCls = 'w-md-editor',\n    className,\n    value: propsValue,\n    commands = getCommands(),\n    commandsFilter,\n    extraCommands = getExtraCommands(),\n    height = 200,\n    toolbarHeight = 29,\n    enableScroll = true,\n    visiableDragbar = true,\n    highlightEnable = true,\n    preview: previewType = 'live',\n    fullscreen = false,\n    overflow = true,\n    previewOptions = {},\n    textareaProps,\n    maxHeight = 1200,\n    minHeight = 100,\n    autoFocus,\n    tabSize = 2,\n    defaultTabEnable = false,\n    onChange,\n    onHeightChange,\n    hideToolbar,\n    toolbarBottom = false,\n    renderTextarea,\n    ...other\n  } = props || {};\n  const cmds = commands\n    .map((item) => (commandsFilter ? commandsFilter(item, false) : item))\n    .filter(Boolean) as ICommand[];\n  const extraCmds = extraCommands\n    .map((item) => (commandsFilter ? commandsFilter(item, true) : item))\n    .filter(Boolean) as ICommand[];\n  let [state, dispatch] = useReducer(reducer, {\n    markdown: propsValue,\n    preview: previewType,\n    height,\n    highlightEnable,\n    tabSize,\n    defaultTabEnable,\n    scrollTop: 0,\n    scrollTopPreview: 0,\n    commands: cmds,\n    extraCommands: extraCmds,\n    fullscreen,\n    barPopup: {},\n  });\n  const container = useRef<HTMLDivElement>(null);\n  const previewRef = useRef<MarkdownPreviewRef>(null);\n  const enableScrollRef = useRef(enableScroll);\n\n  useImperativeHandle(ref, () => ({ ...state }));\n  useMemo(() => (enableScrollRef.current = enableScroll), [enableScroll]);\n  useEffect(() => {\n    const stateInit: ContextStore = {};\n    if (container.current) {\n      stateInit.container = container.current || undefined;\n    }\n    stateInit.markdown = propsValue || '';\n    stateInit.barPopup = {};\n    if (dispatch) {\n      dispatch({ ...state, ...stateInit });\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const cls = [\n    className,\n    'wmde-markdown-var',\n    prefixCls,\n    state.preview ? `${prefixCls}-show-${state.preview}` : null,\n    state.fullscreen ? `${prefixCls}-fullscreen` : null,\n  ]\n    .filter(Boolean)\n    .join(' ')\n    .trim();\n\n  useMemo(\n    () => propsValue !== state.markdown && dispatch({ markdown: propsValue || '' }),\n    [propsValue, state.markdown],\n  );\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  useMemo(() => previewType !== state.preview && dispatch({ preview: previewType }), [previewType]);\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  useMemo(() => tabSize !== state.tabSize && dispatch({ tabSize }), [tabSize]);\n  useMemo(\n    () => highlightEnable !== state.highlightEnable && dispatch({ highlightEnable }),\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [highlightEnable],\n  );\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  useMemo(() => autoFocus !== state.autoFocus && dispatch({ autoFocus: autoFocus }), [autoFocus]);\n  useMemo(\n    () => fullscreen !== state.fullscreen && dispatch({ fullscreen: fullscreen }),\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [fullscreen],\n  );\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  useMemo(() => height !== state.height && dispatch({ height: height }), [height]);\n  useMemo(\n    () => height !== state.height && onHeightChange && onHeightChange(state.height, height, state),\n    [height, onHeightChange, state],\n  );\n\n  const textareaDomRef = useRef<HTMLDivElement>();\n  const active = useRef<'text' | 'preview'>('preview');\n  const initScroll = useRef(false);\n\n  useMemo(() => {\n    textareaDomRef.current = state.textareaWarp;\n    if (state.textareaWarp) {\n      state.textareaWarp.addEventListener('mouseover', () => {\n        active.current = 'text';\n      });\n      state.textareaWarp.addEventListener('mouseleave', () => {\n        active.current = 'preview';\n      });\n    }\n  }, [state.textareaWarp]);\n\n  const handleScroll = (e: React.UIEvent<HTMLDivElement>, type: 'text' | 'preview') => {\n    if (!enableScrollRef.current) return;\n    const textareaDom = textareaDomRef.current;\n    const previewDom = previewRef.current ? previewRef.current.mdp.current : undefined;\n    if (!initScroll.current) {\n      active.current = type;\n      initScroll.current = true;\n    }\n    if (textareaDom && previewDom) {\n      const scale =\n        (textareaDom.scrollHeight - textareaDom.offsetHeight) / (previewDom.scrollHeight - previewDom.offsetHeight);\n      if (e.target === textareaDom && active.current === 'text') {\n        previewDom.scrollTop = textareaDom.scrollTop / scale;\n      }\n      if (e.target === previewDom && active.current === 'preview') {\n        textareaDom.scrollTop = previewDom.scrollTop * scale;\n      }\n      let scrollTop = 0;\n      if (active.current === 'text') {\n        scrollTop = textareaDom.scrollTop || 0;\n      } else if (active.current === 'preview') {\n        scrollTop = previewDom.scrollTop || 0;\n      }\n      dispatch({ scrollTop });\n    }\n  };\n\n  const mdPreview = useMemo(\n    () => (\n      <MarkdownPreview\n        {...previewOptions}\n        onScroll={(e) => handleScroll(e, 'preview')}\n        ref={previewRef}\n        source={state.markdown || ''}\n        className={`${prefixCls}-preview ${previewOptions.className || ''}`}\n      />\n    ),\n    [prefixCls, previewOptions, state.markdown],\n  );\n\n  return (\n    <EditorContext.Provider value={{ ...state, dispatch }}>\n      <div\n        ref={container}\n        className={cls}\n        {...other}\n        onClick={() => {\n          dispatch({ barPopup: { ...setGroupPopFalse(state.barPopup) } });\n        }}\n        style={{\n          ...other.style,\n          height: state.fullscreen ? '100%' : hideToolbar ? Number(state.height) - toolbarHeight : state.height,\n        }}\n      >\n        {!hideToolbar && !toolbarBottom && (\n          <Toolbar prefixCls={prefixCls} height={toolbarHeight} overflow={overflow} toolbarBottom={toolbarBottom} />\n        )}\n        <div\n          className={`${prefixCls}-content`}\n          style={{\n            height: state.fullscreen ? `calc(100% - ${toolbarHeight}px)` : Number(state.height) - toolbarHeight,\n          }}\n        >\n          {/(edit|live)/.test(state.preview || '') && (\n            <TextArea\n              className={`${prefixCls}-input`}\n              prefixCls={prefixCls}\n              autoFocus={autoFocus}\n              {...textareaProps}\n              onChange={(evn) => {\n                onChange && onChange(evn.target.value, evn, state);\n                if (textareaProps && textareaProps.onChange) {\n                  textareaProps.onChange(evn);\n                }\n              }}\n              renderTextarea={renderTextarea}\n              onScroll={(e) => handleScroll(e, 'text')}\n            />\n          )}\n          {/(live|preview)/.test(state.preview || '') && mdPreview}\n        </div>\n        {visiableDragbar && !state.fullscreen && (\n          <DragBar\n            prefixCls={prefixCls}\n            height={state.height as number}\n            maxHeight={maxHeight!}\n            minHeight={minHeight!}\n            onChange={(newHeight) => {\n              dispatch({ height: newHeight });\n            }}\n          />\n        )}\n        {!hideToolbar && toolbarBottom && (\n          <Toolbar prefixCls={prefixCls} height={toolbarHeight} overflow={overflow} toolbarBottom={toolbarBottom} />\n        )}\n      </div>\n    </EditorContext.Provider>\n  );\n};\n\nconst mdEditor = React.forwardRef<ContextStore, MDEditorProps>(InternalMDEditor);\n\ntype MDEditor = typeof mdEditor & {\n  Markdown: typeof MarkdownPreview;\n};\n\n(mdEditor as MDEditor).Markdown = MarkdownPreview;\n\nexport default mdEditor as MDEditor;\n","import MDEditor from './Editor';\nimport * as commands from './commands';\nimport * as MarkdownUtil from './utils/markdownUtils';\n\nexport * from './commands';\nexport * from './utils/markdownUtils';\nexport * from './Editor';\nexport * from './Context';\n\nexport { MarkdownUtil, commands };\n\nexport default MDEditor;\n","import { useEffect, useRef, useState } from 'react';\nimport { Wrapper, StyledLayout, CopyButton } from '@wcj/tools-react-components';\nimport MDEditor from '@uiw/react-md-editor';\n\nexport interface SimpleMarkdownEditorProps {}\n\nexport default function SimpleMarkdownEditor(props: SimpleMarkdownEditorProps) {\n  const [value, setValue] = useState('**Hello world!!!**');\n  const [height, setHeight] = useState(500);\n  const ref = useRef<any>(null);\n\n  const handleResize = () => {\n    if (ref.current) {\n      setHeight(ref.current.clientHeight - 40);\n    }\n  };\n\n  useEffect(() => {\n    window.addEventListener('resize', handleResize, false);\n    if (ref.current) {\n      setHeight(ref.current.clientHeight - 40);\n    }\n  }, [ref]);\n\n  return (\n    <Wrapper>\n      <StyledLayout ref={ref} title=\"Markdown Editor\" extra={value && <CopyButton value={value} />}>\n        <MDEditor value={value} height={height} onChange={(val) => setValue(val || '')} />\n      </StyledLayout>\n    </Wrapper>\n  );\n}\n"],"names":["module","exports","trueFunc","falseFunc","parser_context_1","require","render_1","CssSelectorParser","this","pseudos","attrEqualityMods","ruleNestingOperators","substitutesEnabled","prototype","registerSelectorPseudos","_i","arguments","length","_a","pseudos_1","pseudo","unregisterSelectorPseudos","pseudos_2","registerNumericPseudos","pseudos_3","unregisterNumericPseudos","pseudos_4","registerNestingOperators","operators","operators_1","operator","unregisterNestingOperators","operators_2","registerAttrEqualityMods","mods","mods_1","mod","unregisterAttrEqualityMods","mods_2","enableSubstitutes","disableSubstitutes","parse","str","parseCssSelector","render","path","renderEntity","trim","Object","defineProperty","value","utils_1","pos","l","chr","getStr","quote","escapeTable","result","charAt","esc","undefined","isHex","hex","String","fromCharCode","parseInt","getIdent","isIdent","Error","identSpecialChars","skipWhitespace","parseSelector","selector","parseSingleSelector","res","type","selectors","push","rule","parseRule","currentRule","op","nestingOperator","tagName","isIdentStart","classNames","id","attr","name","attrValue","valueType","doubleQuotesEscapeChars","singleQuoteEscapeChars","attrs","pseudoName","entity","currentEntity","parts","join","map","escapeIdentifier","cn","escapeStr","c","s","len","i","charCode","charCodeAt","extraCharCode","toString","replacement","strReplacementsRev","n","r","t","f","compile","boolbase_1","parsed","a","b","index","absA","Math","abs","bMod","parse_1","compile_1","formula","whitespace","Set","ZERO","NINE","toLowerCase","idx","sign","readSign","number","readNumber","start","has","ReactPropTypesSecret","emptyFunction","emptyFunctionWithReset","resetWarningCache","shim","props","propName","componentName","location","propFullName","secret","err","getShim","isRequired","ReactPropTypes","array","bigint","bool","func","object","string","symbol","any","arrayOf","element","elementType","instanceOf","node","objectOf","oneOf","oneOfType","shape","exact","checkPropTypes","PropTypes","u","Symbol","for","d","e","g","h","k","m","p","q","v","$$typeof","ContextConsumer","ContextProvider","Element","ForwardRef","Fragment","Lazy","Memo","Portal","Profiler","StrictMode","Suspense","SuspenseList","isAsyncMode","isConcurrentMode","isContextConsumer","isContextProvider","isElement","isForwardRef","isFragment","isLazy","isMemo","isPortal","isProfiler","isStrictMode","isSuspense","isSuspenseList","isValidElementType","getModuleId","typeOf","rehypeFilter","options","allowedElements","disallowedElements","TypeError","allowElement","tree","visit","parent_","remove","parent","includes","unwrapDisallowed","children","splice","protocols","own","hasOwnProperty","tableElements","childrenToReact","context","child","childIndex","toReact","skipHtml","property","parentSchema","schema","properties","space","svg","call","addProperty","listDepth","position","line","column","offset","end","component","components","basic","React","ReactIs","key","linkTarget","target","href","title","transformLinkUri","inline","level","Number","transformImageUri","src","alt","input","getInputElement","checked","Boolean","getElementsBeforeCount","ordered","depth","align","style","textAlign","isHeader","sourcePos","rawSourcePos","sourcePosition","includeElementIndex","siblingCount","count","prop","ctx","info","find","Array","isArray","commaSeparated","commas","spaces","iterator","slice","replace","styleReplacer","parseStyle","hastToReact","attribute","_","$1","toUpperCase","deprecated","plugins","to","renderers","astPlugins","allowDangerousHtml","escapeHtml","source","allowNode","allowedTypes","disallowedTypes","includeNodeIndex","ReactMarkdown","deprecation","console","warn","processor","unified","use","remarkParse","remarkPlugins","remarkRehype","remarkRehypeOptions","rehypePlugins","file","VFile","hastNode","runSync","html","className","defaultProps","uri","url","first","colon","indexOf","protocol","propTypes","nextChild","data","test","nextNode","getCommentObject","param","match","reduce","keys","forEach","keyName","isNaN","propertiesHandle","defaultAttrs","JSON","stringify","rehyp","defaultOptions","opts","firstChild","prevChild","splitTextByLine","ast","lines","split","o","entries","rehypePrismGenerator","refractor","visitor","meta","refractorRoot","lang","classListItem","highlight","concat","ignoreMissing","message","startLineNum","nodeWithPosition","addNodePosition","numLines","initialLineNum","textArray","shouldHighlightLine","RE","parsedMeta","strlineNumbers","exec","lineNumbers","rangeParser","startingLineNumber","groups","codeLineArray","pop","showLineNumbers","substring","treeExtract","filter","rehypePrismAll","refractorCommon","refractorAll","ltrRange","rtl","RegExp","ltr","convertElement","enterState","state","dirInferred","found","language","currentDirection","direction","editableOrEditingHost","xmlLang","dir","dirProperty","contentEditable","dirBidi","EXIT","SKIP","noop","handle","zwitch","unknown","query","invalid","shallow","descendant","handlers","null","indexedSearch","nest","previous","one","_1","_2","from","firstElementOnly","elementsBefore","elements","elementsByTypeBefore","types","delayed","elementIndex","typeIndex","elementCount","typeCount","add","exit","factory","check","tags","ranges","left","cast","right","matches","rightIndex","range","leftIndex","next","tag","extendedFilter","lastIndexOf","values","hasProperty","blank","someChildren","_3","disabled","empty","enabled","assertDeep","scopeElements","appendScope","not","optional","required","readWrite","root","scope","needsIndex","normalizeValue","collector","Collector","collectAll","ruleSet","configure","collect","nthCheck","fauxEsmNthCheck","nth","parser","selectAll","getCodeString","code","rewrite","selected","octiconLink","viewBox","version","width","height","ariaHidden","fillRule","reservedMeta","ref","prefixCls","disableCopy","onScroll","onMouseOver","pluginsFilter","warpperElement","other","mdp","useImperativeHandle","cls","rehypePrism","rehypeRaw","slug","headings","rehypeRewrite","class","onClick","event","currentTarget","classList","copyTextToClipboard","dataset","setTimeout","fill","rehypeAttrs","gfm","_jsx","reducer","action","EditorContext","markdown","getCommands","resulte","item","keyCommand","shortcuts","execute","toLocaleLowerCase","shortcutsHandle","commands","commandOrchestrator","dispatch","altKey","shiftKey","metaKey","ctrlKey","command","every","stopPropagation","preventDefault","executeCommand","rehype","rehypeParse","rehypeStringify","freeze","Markdown","useContext","preRef","useEffect","current","textareaPre","useMemo","fragment","processSync","dangerouslySetInnerHTML","__html","selectWord","text","selection","isWordDelimiter","getSurroundingWord","getBreaksNeededForEmptyLineBefore","startPosition","neededBreaks","isInFirstLine","getBreaksNeededForEmptyLineAfter","isInLastLine","bold","buttonProps","icon","role","api","newSelectionRange","state1","setSelectionRange","state2","replaceSelection","selectedText","tate","breaksBeforeCount","breaksBefore","breaksAfterCount","breaksAfter","selectionStart","selectionEnd","codeBlock","italic","link","insertBeforeEachLine","insertBefore","insertionLength","modifiedText","insertionResult","browserSupportsTextareaTextNodes","makeList","oneLinerOffset","unorderedListCommand","orderedListCommand","checkedListCommand","hr","transform","canManipulateViaTextNodes","nodeName","textarea","document","createElement","insertAtLineStart","val","cursorIdx","content","startIdx","focus","setRangeText","dispatchEvent","Event","bubbles","insertTextAtPosition","ieRange","createRange","collapse","select","execCommand","textNode","createTextNode","startNode","endNode","nodeLength","nodeValue","setStart","setEnd","nextSibling","deleteContents","appendChild","commonAncestorContainer","insertNode","createEvent","initEvent","title2","fontSize","textArea","comment","divider","codePreview","_jsxs","points","codeEdit","codeLive","fullscreen","executeCommandState","image","imageTemplate","strikethrough","getExtraCommands","getStateFromTextArea","TextAreaTextApi","constructor","TextAreaCommandOrchestrator","textApi","getState","Textarea","onChange","preview","highlightEnable","extraCommands","tabSize","defaultTabEnable","textRef","executeRef","statesRef","onKeyDown","valArr","substr","currentLineStr","_star","_end","modifiedTextLine","oldSelectText","newStarNum","startTabSize","endTabSize","startStr","startsWith","handleKeyDown","addEventListener","removeEventListener","autoComplete","autoCorrect","autoCapitalize","spellCheck","TextArea","renderTextarea","otherProps","scrollTop","warp","textareaWarp","textStyle","WebkitTextFillColor","overflow","Child","groupName","barPopup","Toolbar","isChild","ToolbarItems","originalOverflow","useRef","handleClick","body","window","getComputedStyle","liProps","activeBtn","childNode","close","evn","toolbarBottom","bottomClassName","dragRef","handleMouseMove","newHeight","clientY","dragY","minHeight","maxHeight","handleMouseUp","onMouseDown","InternalMDEditor","propsValue","commandsFilter","toolbarHeight","enableScroll","visiableDragbar","previewType","previewOptions","textareaProps","autoFocus","onHeightChange","hideToolbar","cmds","extraCmds","useReducer","scrollTopPreview","container","previewRef","enableScrollRef","stateInit","textareaDomRef","active","initScroll","handleScroll","textareaDom","previewDom","scale","scrollHeight","offsetHeight","mdPreview","MarkdownPreview","Provider","keyname","DragBar","mdEditor","SimpleMarkdownEditor","useState","setValue","setHeight","handleResize","clientHeight","Wrapper","StyledLayout","extra","CopyButton","MDEditor"],"sourceRoot":""}