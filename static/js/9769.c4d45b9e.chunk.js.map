{"version":3,"file":"static/js/9769.c4d45b9e.chunk.js","mappings":"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","sources":["../../packages/pdf-to-img/esm/index.js"],"sourcesContent":["import _taggedTemplateLiteralLoose from \"@babel/runtime/helpers/taggedTemplateLiteralLoose\";\nvar _templateObject, _templateObject2;\nimport { useState, useRef, useEffect } from 'react';\nimport { Wrapper, Spacing, StyledLayout, Button } from '@wcj/tools-react-components';\nimport * as PDF from 'pdfjs-dist';\nimport styled from 'styled-components';\n\n// @ts-ignore\nimport pdfjsWorker from 'pdfjs-dist/build/pdf.worker.entry';\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nPDF.GlobalWorkerOptions.workerSrc = pdfjsWorker;\nvar InputPDF = styled.input(_templateObject || (_templateObject = _taggedTemplateLiteralLoose([\"\"])));\nvar Canvas = styled.canvas(_templateObject2 || (_templateObject2 = _taggedTemplateLiteralLoose([\"\\n  border: 1px solid var(--color-border-default);\\n\"])));\nexport default function QRCodeGenerator() {\n  var canvas = useRef(null);\n  var [type, setType] = useState('png');\n  var [saveAll, setSaveAll] = useState(false);\n  var [pdf, setPdf] = useState();\n  var [name, setName] = useState();\n  var [pageNum, setPageNum] = useState(1);\n  var [pageNumInfo, setPageNumInfo] = useState();\n  var [loading, setLoading] = useState();\n  useEffect(() => {\n    if (saveAll) {\n      renderPage(() => {\n        if (pageNum >= pdf.numPages) {\n          setSaveAll(false);\n          return;\n        }\n        save();\n        setPageNum(pageNum + 1);\n        setSaveAll(true);\n      });\n    } else if (pdf && pageNum) {\n      renderPage();\n    }\n  }, [pdf, pageNum, saveAll]);\n  function renderPage(callback) {\n    pdf == null || pdf.getPage(pageNum).then(page => {\n      var scale = 1.5;\n      var viewport = page.getViewport({\n        scale: scale\n      });\n      canvas.current.height = viewport.height;\n      canvas.current.width = viewport.width;\n      canvas.current.style.width = viewport.width + \"px\";\n      canvas.current.style.height = viewport.height + \"px\";\n      var context = canvas.current.getContext('2d');\n      var renderContext = {\n        canvasContext: context,\n        viewport: viewport\n      };\n      page.render(renderContext).promise.then(callback);\n    });\n    setPageNumInfo(pageNum + \" / \" + pdf.numPages);\n  }\n  function showPDF(url) {\n    var loadingTask = PDF.getDocument(url);\n    loadingTask.promise.then(doc => {\n      setLoading(false);\n      setPdf(doc);\n      setPageNum(1);\n    }, reason => {\n      alert(reason);\n    });\n  }\n  var handleInput = evn => {\n    if (!evn.target.files) return;\n    var file = evn.target.files[0];\n    setLoading(true);\n    setPageNumInfo('');\n    setName(file.name);\n    var reader = new FileReader();\n    reader.onload = e => {\n      var _e$target;\n      return showPDF((_e$target = e.target) == null ? void 0 : _e$target.result);\n    };\n    reader.readAsDataURL(file);\n  };\n  function save() {\n    var a = document.createElement('a');\n    var event = new MouseEvent('click');\n    a.download = name + '-' + pageNum + '.' + type;\n    a.href = canvas.current.toDataURL(type === 'png' ? 'image/png' : 'image/jpeg');\n    a.dispatchEvent(event);\n  }\n  var savePage = () => {\n    if (pageNum > pdf.numPages) {\n      alert('All saved successfully');\n      return;\n    }\n    save();\n  };\n  function prevPage() {\n    if (pageNum <= 1) {\n      return;\n    }\n    setPageNum(pageNum - 1);\n  }\n  function nextPage() {\n    if (pageNum >= pdf.numPages) {\n      return;\n    }\n    setPageNum(pageNum + 1);\n  }\n  return /*#__PURE__*/_jsx(Wrapper, {\n    children: /*#__PURE__*/_jsx(StyledLayout, {\n      title: \"Selected PDF File\",\n      overflow: \"initial\",\n      children: /*#__PURE__*/_jsxs(Spacing, {\n        children: [/*#__PURE__*/_jsx(InputPDF, {\n          type: \"file\",\n          accept: \"application/pdf\",\n          onChange: handleInput\n        }), pageNumInfo && /*#__PURE__*/_jsxs(Spacing, {\n          direction: \"row\",\n          children: [/*#__PURE__*/_jsx(Button, {\n            onClick: prevPage,\n            disabled: pageNum === 1,\n            children: \"Previous page\"\n          }), /*#__PURE__*/_jsx(Button, {\n            onClick: nextPage,\n            disabled: !pdf || pageNum >= pdf.numPages,\n            children: \"Next page\"\n          }), /*#__PURE__*/_jsx(Button, {\n            onClick: savePage,\n            children: \"Save this page\"\n          }), /*#__PURE__*/_jsx(Button, {\n            onClick: () => {\n              setPageNum(1);\n              setSaveAll(true);\n            },\n            children: \"Save all\"\n          })]\n        }), pageNumInfo && /*#__PURE__*/_jsxs(\"div\", {\n          children: [name, \", Page: \", pageNumInfo]\n        }), loading === true && /*#__PURE__*/_jsx(\"div\", {\n          children: \"Loading...\"\n        }), loading === false && /*#__PURE__*/_jsx(Canvas, {\n          ref: canvas\n        })]\n      })\n    })\n  });\n}"],"names":["_templateObject","_templateObject2","PDF","workerSrc","pdfjsWorker","InputPDF","styled","input","_taggedTemplateLiteralLoose","Canvas","canvas","QRCodeGenerator","useRef","type","setType","useState","saveAll","setSaveAll","pdf","setPdf","name","setName","pageNum","setPageNum","pageNumInfo","setPageNumInfo","loading","setLoading","renderPage","callback","getPage","then","page","viewport","getViewport","scale","current","height","width","style","renderContext","canvasContext","getContext","render","promise","numPages","useEffect","save","a","document","createElement","event","MouseEvent","download","href","toDataURL","dispatchEvent","_jsx","Wrapper","children","StyledLayout","title","overflow","_jsxs","Spacing","accept","onChange","evn","target","files","file","reader","FileReader","onload","e","_e$target","url","result","doc","reason","alert","readAsDataURL","direction","Button","onClick","disabled","savePage","ref"],"sourceRoot":""}